{"version":3,"names":["_getJestObj","mock","supabaseClient","getCurrentUser","jest","fn","getSupabaseClient","exercises$","get","mockReturnValue","set","_interopRequireDefault","require","_asyncToGenerator2","_syncConfig","_require3","describe","afterEach","global","navigator","test","expect","syncHelpers","isSyncing","toBe","onLine","isOnline","getPendingChangesCount","hasErrors","getErrorMessage","toBeUndefined","default","_require","mockResolvedValue","forceSync","resolves","not","toThrow","_require2","consoleErrorSpy","spyOn","console","mockImplementation","mockRejectedValue","Error","toHaveBeenCalledWith","any","mockRestore"],"sources":["syncHelpers-test.ts"],"sourcesContent":["import { syncHelpers } from \"@/lib/data/sync/syncConfig\";\n\n// Mock the SupabaseClient since syncHelpers uses it internally\njest.mock(\"@/lib/data/supabase/SupabaseClient\", () => ({\n  supabaseClient: {\n    getCurrentUser: jest.fn(),\n    getSupabaseClient: jest.fn(),\n  },\n}));\n\n// Mock the store\njest.mock(\"@/lib/data/store\", () => ({\n  exercises$: {\n    get: jest.fn().mockReturnValue([]),\n    set: jest.fn(),\n  },\n}));\n\ndescribe(\"syncHelpers\", () => {\n  afterEach(() => {\n    // Reset navigator mock after each test\n    delete (global as any).navigator;\n  });\n\n  describe(\"isSyncing\", () => {\n    test(\"returns false by default\", () => {\n      expect(syncHelpers.isSyncing()).toBe(false);\n    });\n  });\n\n  describe(\"isOnline\", () => {\n    test(\"returns true when navigator.onLine is true\", () => {\n      // Mock navigator.onLine\n      (global as any).navigator = { onLine: true };\n\n      expect(syncHelpers.isOnline()).toBe(true);\n    });\n\n    test(\"returns false when navigator.onLine is false\", () => {\n      (global as any).navigator = { onLine: false };\n\n      expect(syncHelpers.isOnline()).toBe(false);\n    });\n\n    test(\"returns true when navigator is undefined\", () => {\n      // No navigator defined\n      expect(syncHelpers.isOnline()).toBe(true);\n    });\n\n    test(\"returns true when navigator.onLine is undefined\", () => {\n      (global as any).navigator = {};\n\n      expect(syncHelpers.isOnline()).toBe(true);\n    });\n  });\n\n  describe(\"getPendingChangesCount\", () => {\n    test(\"returns 0 by default\", () => {\n      expect(syncHelpers.getPendingChangesCount()).toBe(0);\n    });\n  });\n\n  describe(\"hasErrors\", () => {\n    test(\"returns false by default\", () => {\n      expect(syncHelpers.hasErrors()).toBe(false);\n    });\n  });\n\n  describe(\"getErrorMessage\", () => {\n    test(\"returns undefined by default\", () => {\n      expect(syncHelpers.getErrorMessage()).toBeUndefined();\n    });\n  });\n\n  describe(\"forceSync\", () => {\n    test(\"executes without throwing when user is not authenticated\", async () => {\n      const { supabaseClient } = require(\"@/lib/data/supabase/SupabaseClient\");\n      supabaseClient.getCurrentUser.mockResolvedValue(null);\n\n      await expect(syncHelpers.forceSync()).resolves.not.toThrow();\n    });\n\n    test(\"handles errors gracefully\", async () => {\n      const { supabaseClient } = require(\"@/lib/data/supabase/SupabaseClient\");\n      const consoleErrorSpy = jest.spyOn(console, 'error').mockImplementation();\n      \n      supabaseClient.getCurrentUser.mockRejectedValue(new Error(\"Auth failed\"));\n\n      await expect(syncHelpers.forceSync()).resolves.not.toThrow();\n      expect(consoleErrorSpy).toHaveBeenCalledWith('Failed to force sync:', expect.any(Error));\n      \n      consoleErrorSpy.mockRestore();\n    });\n  });\n});"],"mappings":"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","ignoreList":[]}