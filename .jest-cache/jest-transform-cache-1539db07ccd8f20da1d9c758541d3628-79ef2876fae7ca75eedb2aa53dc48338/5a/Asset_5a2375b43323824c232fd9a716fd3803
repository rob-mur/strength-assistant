ec52e71181942e4cb7dcf9902c698d63
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.Asset = exports.ANDROID_EMBEDDED_URL_BASE_RESOURCE = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var _registry = require("@react-native/assets-registry/registry");
var _expoModulesCore = require("expo-modules-core");
var _AssetSources = require("./AssetSources");
var AssetUris = _interopRequireWildcard(require("./AssetUris"));
var _ExpoAsset = require("./ExpoAsset");
var ImageAssets = _interopRequireWildcard(require("./ImageAssets"));
var _LocalAssets = require("./LocalAssets");
var _PlatformUtils = require("./PlatformUtils");
var _resolveAssetSource2 = _interopRequireDefault(require("./resolveAssetSource"));
function _interopRequireWildcard(e, t) { if ("function" == typeof WeakMap) var r = new WeakMap(), n = new WeakMap(); return (_interopRequireWildcard = function _interopRequireWildcard(e, t) { if (!t && e && e.__esModule) return e; var o, i, f = { __proto__: null, default: e }; if (null === e || "object" != typeof e && "function" != typeof e) return f; if (o = t ? n : r) { if (o.has(e)) return o.get(e); o.set(e, f); } for (var _t in e) "default" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]); return f; })(e, t); }
var ANDROID_EMBEDDED_URL_BASE_RESOURCE = exports.ANDROID_EMBEDDED_URL_BASE_RESOURCE = 'file:///android_res/';
var Asset = exports.Asset = function () {
  function Asset(_ref) {
    var name = _ref.name,
      type = _ref.type,
      _ref$hash = _ref.hash,
      hash = _ref$hash === void 0 ? null : _ref$hash,
      uri = _ref.uri,
      width = _ref.width,
      height = _ref.height;
    (0, _classCallCheck2.default)(this, Asset);
    this.hash = null;
    this.localUri = null;
    this.width = null;
    this.height = null;
    this.downloading = false;
    this.downloaded = false;
    this._downloadCallbacks = [];
    this.name = name;
    this.type = type;
    this.hash = hash;
    this.uri = uri;
    if (typeof width === 'number') {
      this.width = width;
    }
    if (typeof height === 'number') {
      this.height = height;
    }
    if (hash) {
      var _this$localUri;
      this.localUri = (0, _LocalAssets.getLocalAssetUri)(hash, type);
      if ((_this$localUri = this.localUri) != null && _this$localUri.startsWith(ANDROID_EMBEDDED_URL_BASE_RESOURCE)) {
        this.uri = this.localUri;
        this.localUri = null;
      } else if (this.localUri) {
        this.downloaded = true;
      }
    }
    if (_expoModulesCore.Platform.OS === 'web') {
      if (!name) {
        this.name = AssetUris.getFilename(uri);
      }
      if (!type) {
        this.type = AssetUris.getFileExtension(uri);
      }
    }
  }
  return (0, _createClass2.default)(Asset, [{
    key: "downloadAsync",
    value: function () {
      var _downloadAsync2 = (0, _asyncToGenerator2.default)(function* () {
        var _this = this;
        if (this.downloaded) {
          return this;
        }
        if (this.downloading) {
          yield new Promise(function (resolve, reject) {
            _this._downloadCallbacks.push({
              resolve: resolve,
              reject: reject
            });
          });
          return this;
        }
        this.downloading = true;
        try {
          if (_expoModulesCore.Platform.OS === 'web') {
            if (ImageAssets.isImageType(this.type)) {
              var _yield$ImageAssets$ge = yield ImageAssets.getImageInfoAsync(this.uri),
                width = _yield$ImageAssets$ge.width,
                height = _yield$ImageAssets$ge.height,
                name = _yield$ImageAssets$ge.name;
              this.width = width;
              this.height = height;
              this.name = name;
            } else {
              this.name = AssetUris.getFilename(this.uri);
            }
          }
          this.localUri = yield (0, _ExpoAsset.downloadAsync)(this.uri, this.hash, this.type);
          this.downloaded = true;
          this._downloadCallbacks.forEach(function (_ref2) {
            var resolve = _ref2.resolve;
            return resolve();
          });
        } catch (e) {
          this._downloadCallbacks.forEach(function (_ref3) {
            var reject = _ref3.reject;
            return reject(e);
          });
          throw e;
        } finally {
          this.downloading = false;
          this._downloadCallbacks = [];
        }
        return this;
      });
      function downloadAsync() {
        return _downloadAsync2.apply(this, arguments);
      }
      return downloadAsync;
    }()
  }], [{
    key: "loadAsync",
    value: function loadAsync(moduleId) {
      var moduleIds = Array.isArray(moduleId) ? moduleId : [moduleId];
      return Promise.all(moduleIds.map(function (moduleId) {
        return Asset.fromModule(moduleId).downloadAsync();
      }));
    }
  }, {
    key: "fromModule",
    value: function fromModule(virtualAssetModule) {
      if (typeof virtualAssetModule === 'string') {
        return Asset.fromURI(virtualAssetModule);
      }
      if (typeof virtualAssetModule === 'object' && 'uri' in virtualAssetModule && typeof virtualAssetModule.uri === 'string') {
        var extension = AssetUris.getFileExtension(virtualAssetModule.uri);
        return new Asset({
          name: '',
          type: extension.startsWith('.') ? extension.substring(1) : extension,
          hash: null,
          uri: virtualAssetModule.uri,
          width: virtualAssetModule.width,
          height: virtualAssetModule.height
        });
      }
      var meta = (0, _registry.getAssetByID)(virtualAssetModule);
      if (!meta) {
        throw new Error(`Module "${virtualAssetModule}" is missing from the asset registry`);
      }
      if (!_PlatformUtils.IS_ENV_WITH_LOCAL_ASSETS) {
        var _resolveAssetSource = (0, _resolveAssetSource2.default)(virtualAssetModule),
          uri = _resolveAssetSource.uri;
        var asset = new Asset({
          name: meta.name,
          type: meta.type,
          hash: meta.hash,
          uri: uri,
          width: meta.width,
          height: meta.height
        });
        if (_expoModulesCore.Platform.OS === 'android' && !uri.includes(':') && (meta.width || meta.height)) {
          asset.localUri = asset.uri;
          asset.downloaded = true;
        }
        Asset.byHash[meta.hash] = asset;
        return asset;
      }
      return Asset.fromMetadata(meta);
    }
  }, {
    key: "fromMetadata",
    value: function fromMetadata(meta) {
      var metaHash = meta.hash;
      if (Asset.byHash[metaHash]) {
        return Asset.byHash[metaHash];
      }
      var _selectAssetSource = (0, _AssetSources.selectAssetSource)(meta),
        uri = _selectAssetSource.uri,
        hash = _selectAssetSource.hash;
      var asset = new Asset({
        name: meta.name,
        type: meta.type,
        hash: hash,
        uri: uri,
        width: meta.width,
        height: meta.height
      });
      Asset.byHash[metaHash] = asset;
      return asset;
    }
  }, {
    key: "fromURI",
    value: function fromURI(uri) {
      if (Asset.byUri[uri]) {
        return Asset.byUri[uri];
      }
      var type = '';
      if (uri.indexOf(';base64') > -1) {
        type = uri.split(';')[0].split('/')[1];
      } else {
        var extension = AssetUris.getFileExtension(uri);
        type = extension.startsWith('.') ? extension.substring(1) : extension;
      }
      var asset = new Asset({
        name: '',
        type: type,
        hash: null,
        uri: uri
      });
      Asset.byUri[uri] = asset;
      return asset;
    }
  }]);
}();
Asset.byHash = {};
Asset.byUri = {};
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfcmVnaXN0cnkiLCJyZXF1aXJlIiwiX2V4cG9Nb2R1bGVzQ29yZSIsIl9Bc3NldFNvdXJjZXMiLCJBc3NldFVyaXMiLCJfaW50ZXJvcFJlcXVpcmVXaWxkY2FyZCIsIl9FeHBvQXNzZXQiLCJJbWFnZUFzc2V0cyIsIl9Mb2NhbEFzc2V0cyIsIl9QbGF0Zm9ybVV0aWxzIiwiX3Jlc29sdmVBc3NldFNvdXJjZTIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiZSIsInQiLCJXZWFrTWFwIiwiciIsIm4iLCJfX2VzTW9kdWxlIiwibyIsImkiLCJmIiwiX19wcm90b19fIiwiZGVmYXVsdCIsImhhcyIsImdldCIsInNldCIsIl90IiwiaGFzT3duUHJvcGVydHkiLCJjYWxsIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJnZXRPd25Qcm9wZXJ0eURlc2NyaXB0b3IiLCJBTkRST0lEX0VNQkVEREVEX1VSTF9CQVNFX1JFU09VUkNFIiwiZXhwb3J0cyIsIkFzc2V0IiwiX3JlZiIsIm5hbWUiLCJ0eXBlIiwiX3JlZiRoYXNoIiwiaGFzaCIsInVyaSIsIndpZHRoIiwiaGVpZ2h0IiwiX2NsYXNzQ2FsbENoZWNrMiIsImxvY2FsVXJpIiwiZG93bmxvYWRpbmciLCJkb3dubG9hZGVkIiwiX2Rvd25sb2FkQ2FsbGJhY2tzIiwiX3RoaXMkbG9jYWxVcmkiLCJnZXRMb2NhbEFzc2V0VXJpIiwic3RhcnRzV2l0aCIsIlBsYXRmb3JtIiwiT1MiLCJnZXRGaWxlbmFtZSIsImdldEZpbGVFeHRlbnNpb24iLCJfY3JlYXRlQ2xhc3MyIiwia2V5IiwidmFsdWUiLCJfZG93bmxvYWRBc3luYzIiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJfdGhpcyIsIlByb21pc2UiLCJyZXNvbHZlIiwicmVqZWN0IiwicHVzaCIsImlzSW1hZ2VUeXBlIiwiX3lpZWxkJEltYWdlQXNzZXRzJGdlIiwiZ2V0SW1hZ2VJbmZvQXN5bmMiLCJkb3dubG9hZEFzeW5jIiwiZm9yRWFjaCIsIl9yZWYyIiwiX3JlZjMiLCJhcHBseSIsImFyZ3VtZW50cyIsImxvYWRBc3luYyIsIm1vZHVsZUlkIiwibW9kdWxlSWRzIiwiQXJyYXkiLCJpc0FycmF5IiwiYWxsIiwibWFwIiwiZnJvbU1vZHVsZSIsInZpcnR1YWxBc3NldE1vZHVsZSIsImZyb21VUkkiLCJleHRlbnNpb24iLCJzdWJzdHJpbmciLCJtZXRhIiwiZ2V0QXNzZXRCeUlEIiwiRXJyb3IiLCJJU19FTlZfV0lUSF9MT0NBTF9BU1NFVFMiLCJfcmVzb2x2ZUFzc2V0U291cmNlIiwicmVzb2x2ZUFzc2V0U291cmNlIiwiYXNzZXQiLCJpbmNsdWRlcyIsImJ5SGFzaCIsImZyb21NZXRhZGF0YSIsIm1ldGFIYXNoIiwiX3NlbGVjdEFzc2V0U291cmNlIiwic2VsZWN0QXNzZXRTb3VyY2UiLCJieVVyaSIsImluZGV4T2YiLCJzcGxpdCJdLCJzb3VyY2VzIjpbIi4uL3NyYy9Bc3NldC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBnZXRBc3NldEJ5SUQgfSBmcm9tICdAcmVhY3QtbmF0aXZlL2Fzc2V0cy1yZWdpc3RyeS9yZWdpc3RyeSc7XG5pbXBvcnQgeyBQbGF0Zm9ybSB9IGZyb20gJ2V4cG8tbW9kdWxlcy1jb3JlJztcblxuaW1wb3J0IHsgQXNzZXRNZXRhZGF0YSwgc2VsZWN0QXNzZXRTb3VyY2UgfSBmcm9tICcuL0Fzc2V0U291cmNlcyc7XG5pbXBvcnQgKiBhcyBBc3NldFVyaXMgZnJvbSAnLi9Bc3NldFVyaXMnO1xuaW1wb3J0IHsgZG93bmxvYWRBc3luYyB9IGZyb20gJy4vRXhwb0Fzc2V0JztcbmltcG9ydCAqIGFzIEltYWdlQXNzZXRzIGZyb20gJy4vSW1hZ2VBc3NldHMnO1xuaW1wb3J0IHsgZ2V0TG9jYWxBc3NldFVyaSB9IGZyb20gJy4vTG9jYWxBc3NldHMnO1xuaW1wb3J0IHsgSVNfRU5WX1dJVEhfTE9DQUxfQVNTRVRTIH0gZnJvbSAnLi9QbGF0Zm9ybVV0aWxzJztcbmltcG9ydCByZXNvbHZlQXNzZXRTb3VyY2UgZnJvbSAnLi9yZXNvbHZlQXNzZXRTb3VyY2UnO1xuXG4vLyBAZG9jc01pc3NpbmdcbmV4cG9ydCB0eXBlIEFzc2V0RGVzY3JpcHRvciA9IHtcbiAgbmFtZTogc3RyaW5nO1xuICB0eXBlOiBzdHJpbmc7XG4gIGhhc2g/OiBzdHJpbmcgfCBudWxsO1xuICB1cmk6IHN0cmluZztcbiAgd2lkdGg/OiBudW1iZXIgfCBudWxsO1xuICBoZWlnaHQ/OiBudW1iZXIgfCBudWxsO1xufTtcblxudHlwZSBEb3dubG9hZFByb21pc2VDYWxsYmFja3MgPSB7XG4gIHJlc29sdmU6ICgpID0+IHZvaWQ7XG4gIHJlamVjdDogKGVycm9yOiBFcnJvcikgPT4gdm9pZDtcbn07XG5cbmV4cG9ydCB7IEFzc2V0TWV0YWRhdGEgfTtcblxuLyoqXG4gKiBBbmRyb2lkIHJlc291cmNlIFVSTCBwcmVmaXguXG4gKiBAaGlkZGVuXG4gKi9cbmV4cG9ydCBjb25zdCBBTkRST0lEX0VNQkVEREVEX1VSTF9CQVNFX1JFU09VUkNFID0gJ2ZpbGU6Ly8vYW5kcm9pZF9yZXMvJztcblxuLyoqXG4gKiBUaGUgYEFzc2V0YCBjbGFzcyByZXByZXNlbnRzIGFuIGFzc2V0IGluIHlvdXIgYXBwLiBJdCBnaXZlcyBtZXRhZGF0YSBhYm91dCB0aGUgYXNzZXQgKHN1Y2ggYXMgaXRzXG4gKiBuYW1lIGFuZCB0eXBlKSBhbmQgcHJvdmlkZXMgZmFjaWxpdGllcyB0byBsb2FkIHRoZSBhc3NldCBkYXRhLlxuICovXG5leHBvcnQgY2xhc3MgQXNzZXQge1xuICBwcml2YXRlIHN0YXRpYyBieUhhc2g6IFJlY29yZDxzdHJpbmcsIEFzc2V0IHwgdW5kZWZpbmVkPiA9IHt9O1xuICBwcml2YXRlIHN0YXRpYyBieVVyaTogUmVjb3JkPHN0cmluZywgQXNzZXQgfCB1bmRlZmluZWQ+ID0ge307XG5cbiAgLyoqXG4gICAqIFRoZSBuYW1lIG9mIHRoZSBhc3NldCBmaWxlIHdpdGhvdXQgdGhlIGV4dGVuc2lvbi4gQWxzbyB3aXRob3V0IHRoZSBwYXJ0IGZyb20gYEBgIG9ud2FyZCBpbiB0aGVcbiAgICogZmlsZW5hbWUgKHVzZWQgdG8gc3BlY2lmeSBzY2FsZSBmYWN0b3IgZm9yIGltYWdlcykuXG4gICAqL1xuICBwdWJsaWMgbmFtZTogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIGV4dGVuc2lvbiBvZiB0aGUgYXNzZXQgZmlsZW5hbWUuXG4gICAqL1xuICBwdWJsaWMgcmVhZG9ubHkgdHlwZTogc3RyaW5nO1xuICAvKipcbiAgICogVGhlIE1ENSBoYXNoIG9mIHRoZSBhc3NldCdzIGRhdGEuXG4gICAqL1xuICBwdWJsaWMgcmVhZG9ubHkgaGFzaDogc3RyaW5nIHwgbnVsbCA9IG51bGw7XG4gIC8qKlxuICAgKiBBIFVSSSB0aGF0IHBvaW50cyB0byB0aGUgYXNzZXQncyBkYXRhIG9uIHRoZSByZW1vdGUgc2VydmVyLiBXaGVuIHJ1bm5pbmcgdGhlIHB1Ymxpc2hlZCB2ZXJzaW9uXG4gICAqIG9mIHlvdXIgYXBwLCB0aGlzIHJlZmVycyB0byB0aGUgbG9jYXRpb24gb24gRXhwbydzIGFzc2V0IHNlcnZlciB3aGVyZSBFeHBvIGhhcyBzdG9yZWQgeW91clxuICAgKiBhc3NldC4gV2hlbiBydW5uaW5nIHRoZSBhcHAgZnJvbSBFeHBvIENMSSBkdXJpbmcgZGV2ZWxvcG1lbnQsIHRoaXMgVVJJIHBvaW50cyB0byBFeHBvIENMSSdzXG4gICAqIHNlcnZlciBydW5uaW5nIG9uIHlvdXIgY29tcHV0ZXIgYW5kIHRoZSBhc3NldCBpcyBzZXJ2ZWQgZGlyZWN0bHkgZnJvbSB5b3VyIGNvbXB1dGVyLiBJZiB5b3VcbiAgICogYXJlIG5vdCB1c2luZyBDbGFzc2ljIFVwZGF0ZXMgKGxlZ2FjeSksIHRoaXMgZmllbGQgc2hvdWxkIGJlIGlnbm9yZWQgYXMgd2UgZW5zdXJlIHlvdXIgYXNzZXRzXG4gICAqIGFyZSBvbiBkZXZpY2UgYmVmb3JlIHJ1bm5pbmcgeW91ciBhcHBsaWNhdGlvbiBsb2dpYy5cbiAgICovXG4gIHB1YmxpYyByZWFkb25seSB1cmk6IHN0cmluZztcbiAgLyoqXG4gICAqIElmIHRoZSBhc3NldCBoYXMgYmVlbiBkb3dubG9hZGVkIChieSBjYWxsaW5nIFtgZG93bmxvYWRBc3luYygpYF0oI2Rvd25sb2FkYXN5bmMpKSwgdGhlXG4gICAqIGBmaWxlOi8vYCBVUkkgcG9pbnRpbmcgdG8gdGhlIGxvY2FsIGZpbGUgb24gdGhlIGRldmljZSB0aGF0IGNvbnRhaW5zIHRoZSBhc3NldCBkYXRhLlxuICAgKi9cbiAgcHVibGljIGxvY2FsVXJpOiBzdHJpbmcgfCBudWxsID0gbnVsbDtcbiAgLyoqXG4gICAqIElmIHRoZSBhc3NldCBpcyBhbiBpbWFnZSwgdGhlIHdpZHRoIG9mIHRoZSBpbWFnZSBkYXRhIGRpdmlkZWQgYnkgdGhlIHNjYWxlIGZhY3Rvci4gVGhlIHNjYWxlXG4gICAqIGZhY3RvciBpcyB0aGUgbnVtYmVyIGFmdGVyIGBAYCBpbiB0aGUgZmlsZW5hbWUsIG9yIGAxYCBpZiBub3QgcHJlc2VudC5cbiAgICovXG4gIHB1YmxpYyB3aWR0aDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG4gIC8qKlxuICAgKiBJZiB0aGUgYXNzZXQgaXMgYW4gaW1hZ2UsIHRoZSBoZWlnaHQgb2YgdGhlIGltYWdlIGRhdGEgZGl2aWRlZCBieSB0aGUgc2NhbGUgZmFjdG9yLiBUaGUgc2NhbGUgZmFjdG9yIGlzIHRoZSBudW1iZXIgYWZ0ZXIgYEBgIGluIHRoZSBmaWxlbmFtZSwgb3IgYDFgIGlmIG5vdCBwcmVzZW50LlxuICAgKi9cbiAgcHVibGljIGhlaWdodDogbnVtYmVyIHwgbnVsbCA9IG51bGw7XG5cbiAgcHJpdmF0ZSBkb3dubG9hZGluZzogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIC8qKlxuICAgKiBXaGV0aGVyIHRoZSBhc3NldCBoYXMgZmluaXNoZWQgZG93bmxvYWRpbmcgZnJvbSBhIGNhbGwgdG8gW2Bkb3dubG9hZEFzeW5jKClgXSgjZG93bmxvYWRhc3luYykuXG4gICAqL1xuICBwdWJsaWMgZG93bmxvYWRlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIHByaXZhdGUgX2Rvd25sb2FkQ2FsbGJhY2tzOiBEb3dubG9hZFByb21pc2VDYWxsYmFja3NbXSA9IFtdO1xuXG4gIGNvbnN0cnVjdG9yKHsgbmFtZSwgdHlwZSwgaGFzaCA9IG51bGwsIHVyaSwgd2lkdGgsIGhlaWdodCB9OiBBc3NldERlc2NyaXB0b3IpIHtcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xuICAgIHRoaXMudHlwZSA9IHR5cGU7XG4gICAgdGhpcy5oYXNoID0gaGFzaDtcbiAgICB0aGlzLnVyaSA9IHVyaTtcblxuICAgIGlmICh0eXBlb2Ygd2lkdGggPT09ICdudW1iZXInKSB7XG4gICAgICB0aGlzLndpZHRoID0gd2lkdGg7XG4gICAgfVxuICAgIGlmICh0eXBlb2YgaGVpZ2h0ID09PSAnbnVtYmVyJykge1xuICAgICAgdGhpcy5oZWlnaHQgPSBoZWlnaHQ7XG4gICAgfVxuXG4gICAgaWYgKGhhc2gpIHtcbiAgICAgIHRoaXMubG9jYWxVcmkgPSBnZXRMb2NhbEFzc2V0VXJpKGhhc2gsIHR5cGUpO1xuICAgICAgaWYgKHRoaXMubG9jYWxVcmk/LnN0YXJ0c1dpdGgoQU5EUk9JRF9FTUJFRERFRF9VUkxfQkFTRV9SRVNPVVJDRSkpIHtcbiAgICAgICAgLy8gVHJlYXQgQW5kcm9pZCBlbWJlZGRlZCByZXNvdXJjZXMgYXMgbm90IGRvd25sb2FkZWQgc3RhdGUsIGJlY2F1c2UgdGhlIHVyaSBpcyBub3QgZGlyZWN0IGFjY2Vzc2libGUuXG4gICAgICAgIHRoaXMudXJpID0gdGhpcy5sb2NhbFVyaTtcbiAgICAgICAgdGhpcy5sb2NhbFVyaSA9IG51bGw7XG4gICAgICB9IGVsc2UgaWYgKHRoaXMubG9jYWxVcmkpIHtcbiAgICAgICAgdGhpcy5kb3dubG9hZGVkID0gdHJ1ZTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoUGxhdGZvcm0uT1MgPT09ICd3ZWInKSB7XG4gICAgICBpZiAoIW5hbWUpIHtcbiAgICAgICAgdGhpcy5uYW1lID0gQXNzZXRVcmlzLmdldEZpbGVuYW1lKHVyaSk7XG4gICAgICB9XG4gICAgICBpZiAoIXR5cGUpIHtcbiAgICAgICAgdGhpcy50eXBlID0gQXNzZXRVcmlzLmdldEZpbGVFeHRlbnNpb24odXJpKTtcbiAgICAgIH1cbiAgICB9XG4gIH1cblxuICAvLyBAbmVlZHNBdWRpdFxuICAvKipcbiAgICogQSBoZWxwZXIgdGhhdCB3cmFwcyBgQXNzZXQuZnJvbU1vZHVsZShtb2R1bGUpLmRvd25sb2FkQXN5bmNgIGZvciBjb252ZW5pZW5jZS5cbiAgICogQHBhcmFtIG1vZHVsZUlkIEFuIGFycmF5IG9mIGByZXF1aXJlKCdwYXRoL3RvL2ZpbGUnKWAgb3IgZXh0ZXJuYWwgbmV0d29yayBVUkxzLiBDYW4gYWxzbyBiZVxuICAgKiBqdXN0IG9uZSBtb2R1bGUgb3IgVVJMIHdpdGhvdXQgYW4gQXJyYXkuXG4gICAqIEByZXR1cm4gUmV0dXJucyBhIFByb21pc2UgdGhhdCBmdWxmaWxscyB3aXRoIGFuIGFycmF5IG9mIGBBc3NldGBzIHdoZW4gdGhlIGFzc2V0KHMpIGhhcyBiZWVuXG4gICAqIHNhdmVkIHRvIGRpc2suXG4gICAqIEBleGFtcGxlXG4gICAqIGBgYHRzXG4gICAqIGNvbnN0IFt7IGxvY2FsVXJpIH1dID0gYXdhaXQgQXNzZXQubG9hZEFzeW5jKHJlcXVpcmUoJy4vYXNzZXRzL3NuYWNrLWljb24ucG5nJykpO1xuICAgKiBgYGBcbiAgICovXG4gIHN0YXRpYyBsb2FkQXN5bmMobW9kdWxlSWQ6IG51bWJlciB8IG51bWJlcltdIHwgc3RyaW5nIHwgc3RyaW5nW10pOiBQcm9taXNlPEFzc2V0W10+IHtcbiAgICBjb25zdCBtb2R1bGVJZHMgPSBBcnJheS5pc0FycmF5KG1vZHVsZUlkKSA/IG1vZHVsZUlkIDogW21vZHVsZUlkXTtcbiAgICByZXR1cm4gUHJvbWlzZS5hbGwobW9kdWxlSWRzLm1hcCgobW9kdWxlSWQpID0+IEFzc2V0LmZyb21Nb2R1bGUobW9kdWxlSWQpLmRvd25sb2FkQXN5bmMoKSkpO1xuICB9XG5cbiAgLy8gQG5lZWRzQXVkaXRcbiAgLyoqXG4gICAqIFJldHVybnMgdGhlIFtgQXNzZXRgXSgjYXNzZXQpIGluc3RhbmNlIHJlcHJlc2VudGluZyBhbiBhc3NldCBnaXZlbiBpdHMgbW9kdWxlIG9yIFVSTC5cbiAgICogQHBhcmFtIHZpcnR1YWxBc3NldE1vZHVsZSBUaGUgdmFsdWUgb2YgYHJlcXVpcmUoJ3BhdGgvdG8vZmlsZScpYCBmb3IgdGhlIGFzc2V0IG9yIGV4dGVybmFsXG4gICAqIG5ldHdvcmsgVVJMXG4gICAqIEByZXR1cm4gVGhlIFtgQXNzZXRgXSgjYXNzZXQpIGluc3RhbmNlIGZvciB0aGUgYXNzZXQuXG4gICAqL1xuICBzdGF0aWMgZnJvbU1vZHVsZShcbiAgICB2aXJ0dWFsQXNzZXRNb2R1bGU6IG51bWJlciB8IHN0cmluZyB8IHsgdXJpOiBzdHJpbmc7IHdpZHRoOiBudW1iZXI7IGhlaWdodDogbnVtYmVyIH1cbiAgKTogQXNzZXQge1xuICAgIGlmICh0eXBlb2YgdmlydHVhbEFzc2V0TW9kdWxlID09PSAnc3RyaW5nJykge1xuICAgICAgcmV0dXJuIEFzc2V0LmZyb21VUkkodmlydHVhbEFzc2V0TW9kdWxlKTtcbiAgICB9XG4gICAgaWYgKFxuICAgICAgdHlwZW9mIHZpcnR1YWxBc3NldE1vZHVsZSA9PT0gJ29iamVjdCcgJiZcbiAgICAgICd1cmknIGluIHZpcnR1YWxBc3NldE1vZHVsZSAmJlxuICAgICAgdHlwZW9mIHZpcnR1YWxBc3NldE1vZHVsZS51cmkgPT09ICdzdHJpbmcnXG4gICAgKSB7XG4gICAgICBjb25zdCBleHRlbnNpb24gPSBBc3NldFVyaXMuZ2V0RmlsZUV4dGVuc2lvbih2aXJ0dWFsQXNzZXRNb2R1bGUudXJpKTtcbiAgICAgIHJldHVybiBuZXcgQXNzZXQoe1xuICAgICAgICBuYW1lOiAnJyxcbiAgICAgICAgdHlwZTogZXh0ZW5zaW9uLnN0YXJ0c1dpdGgoJy4nKSA/IGV4dGVuc2lvbi5zdWJzdHJpbmcoMSkgOiBleHRlbnNpb24sXG4gICAgICAgIGhhc2g6IG51bGwsXG4gICAgICAgIHVyaTogdmlydHVhbEFzc2V0TW9kdWxlLnVyaSxcbiAgICAgICAgd2lkdGg6IHZpcnR1YWxBc3NldE1vZHVsZS53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiB2aXJ0dWFsQXNzZXRNb2R1bGUuaGVpZ2h0LFxuICAgICAgfSk7XG4gICAgfVxuXG4gICAgY29uc3QgbWV0YSA9IGdldEFzc2V0QnlJRCh2aXJ0dWFsQXNzZXRNb2R1bGUpO1xuICAgIGlmICghbWV0YSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBNb2R1bGUgXCIke3ZpcnR1YWxBc3NldE1vZHVsZX1cIiBpcyBtaXNzaW5nIGZyb20gdGhlIGFzc2V0IHJlZ2lzdHJ5YCk7XG4gICAgfVxuXG4gICAgLy8gT3V0c2lkZSBvZiB0aGUgbWFuYWdlZCBlbnYgd2UgbmVlZCB0aGUgbW9kdWxlSWQgdG8gaW5pdGlhbGl6ZSB0aGUgYXNzZXRcbiAgICAvLyBiZWNhdXNlIHJlc29sdmVBc3NldFNvdXJjZSBkZXBlbmRzIG9uIGl0XG4gICAgaWYgKCFJU19FTlZfV0lUSF9MT0NBTF9BU1NFVFMpIHtcbiAgICAgIC8vIG51bGwtY2hlY2sgaXMgcGVyZm9ybWVkIGFib3ZlIHdpdGggYGdldEFzc2V0QnlJRGAuXG4gICAgICBjb25zdCB7IHVyaSB9ID0gcmVzb2x2ZUFzc2V0U291cmNlKHZpcnR1YWxBc3NldE1vZHVsZSkhO1xuXG4gICAgICBjb25zdCBhc3NldCA9IG5ldyBBc3NldCh7XG4gICAgICAgIG5hbWU6IG1ldGEubmFtZSxcbiAgICAgICAgdHlwZTogbWV0YS50eXBlLFxuICAgICAgICBoYXNoOiBtZXRhLmhhc2gsXG4gICAgICAgIHVyaSxcbiAgICAgICAgd2lkdGg6IG1ldGEud2lkdGgsXG4gICAgICAgIGhlaWdodDogbWV0YS5oZWlnaHQsXG4gICAgICB9KTtcblxuICAgICAgLy8gRm9yIGltYWdlcyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5LFxuICAgICAgLy8ga2VlcHMgbG9jYWxVcmkgdGhlIHNhbWUgYXMgdXJpIGZvciBSZWFjdCBOYXRpdmUncyBJbWFnZSB0aGF0XG4gICAgICAvLyB3b3JrcyBmaW5lIHdpdGggZHJhd2FibGUgcmVzb3VyY2UgbmFtZXMuXG4gICAgICBpZiAoUGxhdGZvcm0uT1MgPT09ICdhbmRyb2lkJyAmJiAhdXJpLmluY2x1ZGVzKCc6JykgJiYgKG1ldGEud2lkdGggfHwgbWV0YS5oZWlnaHQpKSB7XG4gICAgICAgIGFzc2V0LmxvY2FsVXJpID0gYXNzZXQudXJpO1xuICAgICAgICBhc3NldC5kb3dubG9hZGVkID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgQXNzZXQuYnlIYXNoW21ldGEuaGFzaF0gPSBhc3NldDtcbiAgICAgIHJldHVybiBhc3NldDtcbiAgICB9XG5cbiAgICByZXR1cm4gQXNzZXQuZnJvbU1ldGFkYXRhKG1ldGEpO1xuICB9XG5cbiAgLy8gQGRvY3NNaXNzaW5nXG4gIHN0YXRpYyBmcm9tTWV0YWRhdGEobWV0YTogQXNzZXRNZXRhZGF0YSk6IEFzc2V0IHtcbiAgICAvLyBUaGUgaGFzaCBvZiB0aGUgd2hvbGUgYXNzZXQsIG5vdCB0byBiZSBjb25mdXNlZCB3aXRoIHRoZSBoYXNoIG9mIGEgc3BlY2lmaWMgZmlsZSByZXR1cm5lZFxuICAgIC8vIGZyb20gYHNlbGVjdEFzc2V0U291cmNlYFxuICAgIGNvbnN0IG1ldGFIYXNoID0gbWV0YS5oYXNoO1xuICAgIGlmIChBc3NldC5ieUhhc2hbbWV0YUhhc2hdKSB7XG4gICAgICByZXR1cm4gQXNzZXQuYnlIYXNoW21ldGFIYXNoXTtcbiAgICB9XG5cbiAgICBjb25zdCB7IHVyaSwgaGFzaCB9ID0gc2VsZWN0QXNzZXRTb3VyY2UobWV0YSk7XG4gICAgY29uc3QgYXNzZXQgPSBuZXcgQXNzZXQoe1xuICAgICAgbmFtZTogbWV0YS5uYW1lLFxuICAgICAgdHlwZTogbWV0YS50eXBlLFxuICAgICAgaGFzaCxcbiAgICAgIHVyaSxcbiAgICAgIHdpZHRoOiBtZXRhLndpZHRoLFxuICAgICAgaGVpZ2h0OiBtZXRhLmhlaWdodCxcbiAgICB9KTtcbiAgICBBc3NldC5ieUhhc2hbbWV0YUhhc2hdID0gYXNzZXQ7XG4gICAgcmV0dXJuIGFzc2V0O1xuICB9XG5cbiAgLy8gQGRvY3NNaXNzaW5nXG4gIHN0YXRpYyBmcm9tVVJJKHVyaTogc3RyaW5nKTogQXNzZXQge1xuICAgIGlmIChBc3NldC5ieVVyaVt1cmldKSB7XG4gICAgICByZXR1cm4gQXNzZXQuYnlVcmlbdXJpXTtcbiAgICB9XG5cbiAgICAvLyBQb3NzaWJseSBhIEJhc2U2NC1lbmNvZGVkIFVSSVxuICAgIGxldCB0eXBlID0gJyc7XG4gICAgaWYgKHVyaS5pbmRleE9mKCc7YmFzZTY0JykgPiAtMSkge1xuICAgICAgdHlwZSA9IHVyaS5zcGxpdCgnOycpWzBdLnNwbGl0KCcvJylbMV07XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnN0IGV4dGVuc2lvbiA9IEFzc2V0VXJpcy5nZXRGaWxlRXh0ZW5zaW9uKHVyaSk7XG4gICAgICB0eXBlID0gZXh0ZW5zaW9uLnN0YXJ0c1dpdGgoJy4nKSA/IGV4dGVuc2lvbi5zdWJzdHJpbmcoMSkgOiBleHRlbnNpb247XG4gICAgfVxuXG4gICAgY29uc3QgYXNzZXQgPSBuZXcgQXNzZXQoe1xuICAgICAgbmFtZTogJycsXG4gICAgICB0eXBlLFxuICAgICAgaGFzaDogbnVsbCxcbiAgICAgIHVyaSxcbiAgICB9KTtcblxuICAgIEFzc2V0LmJ5VXJpW3VyaV0gPSBhc3NldDtcblxuICAgIHJldHVybiBhc3NldDtcbiAgfVxuXG4gIC8vIEBuZWVkc0F1ZGl0XG4gIC8qKlxuICAgKiBEb3dubG9hZHMgdGhlIGFzc2V0IGRhdGEgdG8gYSBsb2NhbCBmaWxlIGluIHRoZSBkZXZpY2UncyBjYWNoZSBkaXJlY3RvcnkuIE9uY2UgdGhlIHJldHVybmVkXG4gICAqIHByb21pc2UgaXMgZnVsZmlsbGVkIHdpdGhvdXQgZXJyb3IsIHRoZSBbYGxvY2FsVXJpYF0oI2xvY2FsdXJpKSBmaWVsZCBvZiB0aGlzIGFzc2V0IHBvaW50c1xuICAgKiB0byBhIGxvY2FsIGZpbGUgY29udGFpbmluZyB0aGUgYXNzZXQgZGF0YS4gVGhlIGFzc2V0IGlzIG9ubHkgZG93bmxvYWRlZCBpZiBhbiB1cC10by1kYXRlIGxvY2FsXG4gICAqIGZpbGUgZm9yIHRoZSBhc3NldCBpc24ndCBhbHJlYWR5IHByZXNlbnQgZHVlIHRvIGFuIGVhcmxpZXIgZG93bmxvYWQuIFRoZSBkb3dubG9hZGVkIGBBc3NldGBcbiAgICogd2lsbCBiZSByZXR1cm5lZCB3aGVuIHRoZSBwcm9taXNlIGlzIHJlc29sdmVkLlxuICAgKiBAcmV0dXJuIFJldHVybnMgYSBQcm9taXNlIHdoaWNoIGZ1bGZpbGxzIHdpdGggYW4gYEFzc2V0YCBpbnN0YW5jZS5cbiAgICovXG4gIGFzeW5jIGRvd25sb2FkQXN5bmMoKTogUHJvbWlzZTx0aGlzPiB7XG4gICAgaWYgKHRoaXMuZG93bmxvYWRlZCkge1xuICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuICAgIGlmICh0aGlzLmRvd25sb2FkaW5nKSB7XG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZTx2b2lkPigocmVzb2x2ZSwgcmVqZWN0KSA9PiB7XG4gICAgICAgIHRoaXMuX2Rvd25sb2FkQ2FsbGJhY2tzLnB1c2goeyByZXNvbHZlLCByZWplY3QgfSk7XG4gICAgICB9KTtcbiAgICAgIHJldHVybiB0aGlzO1xuICAgIH1cbiAgICB0aGlzLmRvd25sb2FkaW5nID0gdHJ1ZTtcblxuICAgIHRyeSB7XG4gICAgICBpZiAoUGxhdGZvcm0uT1MgPT09ICd3ZWInKSB7XG4gICAgICAgIGlmIChJbWFnZUFzc2V0cy5pc0ltYWdlVHlwZSh0aGlzLnR5cGUpKSB7XG4gICAgICAgICAgY29uc3QgeyB3aWR0aCwgaGVpZ2h0LCBuYW1lIH0gPSBhd2FpdCBJbWFnZUFzc2V0cy5nZXRJbWFnZUluZm9Bc3luYyh0aGlzLnVyaSk7XG4gICAgICAgICAgdGhpcy53aWR0aCA9IHdpZHRoO1xuICAgICAgICAgIHRoaXMuaGVpZ2h0ID0gaGVpZ2h0O1xuICAgICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdGhpcy5uYW1lID0gQXNzZXRVcmlzLmdldEZpbGVuYW1lKHRoaXMudXJpKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgdGhpcy5sb2NhbFVyaSA9IGF3YWl0IGRvd25sb2FkQXN5bmModGhpcy51cmksIHRoaXMuaGFzaCwgdGhpcy50eXBlKTtcblxuICAgICAgdGhpcy5kb3dubG9hZGVkID0gdHJ1ZTtcbiAgICAgIHRoaXMuX2Rvd25sb2FkQ2FsbGJhY2tzLmZvckVhY2goKHsgcmVzb2x2ZSB9KSA9PiByZXNvbHZlKCkpO1xuICAgIH0gY2F0Y2ggKGU6IGFueSkge1xuICAgICAgdGhpcy5fZG93bmxvYWRDYWxsYmFja3MuZm9yRWFjaCgoeyByZWplY3QgfSkgPT4gcmVqZWN0KGUpKTtcbiAgICAgIHRocm93IGU7XG4gICAgfSBmaW5hbGx5IHtcbiAgICAgIHRoaXMuZG93bmxvYWRpbmcgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2Rvd25sb2FkQ2FsbGJhY2tzID0gW107XG4gICAgfVxuICAgIHJldHVybiB0aGlzO1xuICB9XG59XG4iXSwibWFwcGluZ3MiOiI7Ozs7Ozs7O0FBQUEsSUFBQUEsU0FBQSxHQUFBQyxPQUFBO0FBQ0EsSUFBQUMsZ0JBQUEsR0FBQUQsT0FBQTtBQUVBLElBQUFFLGFBQUEsR0FBQUYsT0FBQTtBQUNBLElBQUFHLFNBQUEsR0FBQUMsdUJBQUEsQ0FBQUosT0FBQTtBQUNBLElBQUFLLFVBQUEsR0FBQUwsT0FBQTtBQUNBLElBQUFNLFdBQUEsR0FBQUYsdUJBQUEsQ0FBQUosT0FBQTtBQUNBLElBQUFPLFlBQUEsR0FBQVAsT0FBQTtBQUNBLElBQUFRLGNBQUEsR0FBQVIsT0FBQTtBQUNBLElBQUFTLG9CQUFBLEdBQUFDLHNCQUFBLENBQUFWLE9BQUE7QUFBc0QsU0FBQUksd0JBQUFPLENBQUEsRUFBQUMsQ0FBQSw2QkFBQUMsT0FBQSxNQUFBQyxDQUFBLE9BQUFELE9BQUEsSUFBQUUsQ0FBQSxPQUFBRixPQUFBLFlBQUFULHVCQUFBLFlBQUFBLHdCQUFBTyxDQUFB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