appId: com.jimmysolutions.strengthassistant.test
---
# Test: WiFi Disconnection - Real Network Loss
# Purpose: Test real WiFi disconnection scenarios
# 
# This test requires manually turning WiFi off/on to simulate real network loss

- launchApp

# Handle authentication - continue as guest
- assertVisible:
    text: "Continue as Guest"
- tapOn:
    id: "continue-as-guest"

# Navigate to exercises  
- tapOn:
    id: "exercisesTab"

# STEP 1: Instruction to turn off WiFi
- tapOn:
    text: "Settings"
- assertVisible:
    text: "TURN OFF WIFI NOW"
- assertVisible:
    text: "Disable WiFi in device settings, then tap Continue"
- tapOn:
    text: "Continue"

# Return to exercises and wait for network detection
- tapOn:
    id: "exercisesTab"

# App should detect WiFi is off
- assertVisible:
    id: "sync-status-offline"

# Create exercises while WiFi is actually off
- tapOn:
    id: "add-exercise"
- tapOn:
    id: "name"
- inputText: "WiFi Off Exercise 1"
- tapOn:
    id: "submit"

- tapOn:
    id: "add-exercise"
- tapOn:
    id: "name"
- inputText: "WiFi Off Exercise 2"
- tapOn:
    id: "submit"

# Verify exercises exist locally
- assertVisible:
    text: "WiFi Off Exercise 1"
- assertVisible:
    text: "WiFi Off Exercise 2"

# STEP 2: Restart app while WiFi is still off
- stopApp
- launchApp

# Check exercises persist through restart with no network
- tapOn:
    id: "exercisesTab"
- assertVisible:
    text: "WiFi Off Exercise 1"
- assertVisible:
    text: "WiFi Off Exercise 2"

# Should still show offline status
- assertVisible:
    id: "sync-status-offline"

# STEP 3: Turn WiFi back on
- tapOn:
    text: "Settings"
- assertVisible:
    text: "TURN ON WIFI NOW"
- assertVisible:
    text: "Enable WiFi in device settings, then tap Continue"
- tapOn:
    text: "Continue"

# Wait for WiFi reconnection and auto-sync
- tapOn:
    id: "exercisesTab"

# Should now show online/synced status
- assertVisible:
    id: "sync-status-synced"

# Exercises should still be there after sync
- assertVisible:
    text: "WiFi Off Exercise 1"
- assertVisible:
    text: "WiFi Off Exercise 2"

# STEP 4: Final restart test with WiFi on
- stopApp
- launchApp

# Everything should be preserved
- tapOn:
    id: "exercisesTab"
- assertVisible:
    text: "WiFi Off Exercise 1"
- assertVisible:
    text: "WiFi Off Exercise 2"
- assertVisible:
    id: "sync-status-synced"

# Clean up
- tapOn:
    text: "WiFi Off Exercise 1"
- tapOn:
    id: "delete-exercise-button"
- tapOn:
    text: "Delete"

- tapOn:
    id: "exercisesTab"
- tapOn:
    text: "WiFi Off Exercise 2"
- tapOn:
    id: "delete-exercise-button"
- tapOn:
    text: "Delete"