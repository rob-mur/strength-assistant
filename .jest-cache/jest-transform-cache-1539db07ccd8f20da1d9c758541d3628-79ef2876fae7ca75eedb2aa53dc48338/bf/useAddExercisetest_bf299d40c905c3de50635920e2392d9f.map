{"version":3,"names":["_getJestObj","mock","observable","jest","fn","observe","computed","virtual","initializeFirebaseServices","getDb","supabaseClient","getCurrentUser","exercises$","get","set","user$","syncExerciseToSupabase","deleteExerciseFromSupabase","syncHelpers","isSyncing","isOnline","getPendingChangesCount","forceSync","hasErrors","getErrorMessage","ExerciseValidator","validateExerciseInput","sanitizeExerciseName","collection","addDoc","deleteDoc","doc","onSnapshot","query","orderBy","v4","_interopRequireDefault","require","_asyncToGenerator2","_useAddExercise","_ExerciseRepo","_reactNative","_jestMockExtended","_require","mockRepo","describe","beforeEach","mockReset","mocked","ExerciseRepo","getInstance","mockReturnValue","test","testUid","_renderHook","renderHook","useAddExercise","result","expect","current","toBe","default","testExercise","addExercise","mockResolvedValue","undefined","_renderHook2","toHaveBeenCalledWith","name","_renderHook3","rejects","toThrow","testError","Error","mockRejectedValue","_renderHook4"],"sources":["useAddExercise-test.tsx"],"sourcesContent":["import { useAddExercise } from \"@/lib/hooks/useAddExercise\";\nimport { ExerciseRepo } from \"@/lib/repo/ExerciseRepo\";\nimport { renderHook } from \"@testing-library/react-native\";\nimport { mock, mockReset } from \"jest-mock-extended\";\n\n// Mock dependencies\njest.mock('@legendapp/state', () => ({\n  observable: jest.fn(),\n  observe: jest.fn(),\n  computed: jest.fn(),\n}), { virtual: true });\n\njest.mock('@/lib/data/firebase/initializer', () => ({\n  initializeFirebaseServices: jest.fn(),\n  getDb: jest.fn(),\n}));\n\njest.mock('@/lib/data/supabase/SupabaseClient', () => ({\n  supabaseClient: {\n    getCurrentUser: jest.fn(),\n  }\n}));\n\njest.mock('@/lib/data/store', () => ({\n  exercises$: {\n    get: jest.fn(),\n    set: jest.fn(),\n  },\n  user$: {\n    get: jest.fn(),\n  },\n}));\n\njest.mock('@/lib/data/sync/syncConfig', () => ({\n  syncExerciseToSupabase: jest.fn(),\n  deleteExerciseFromSupabase: jest.fn(),\n  syncHelpers: {\n    isSyncing: jest.fn(),\n    isOnline: jest.fn(),\n    getPendingChangesCount: jest.fn(),\n    forceSync: jest.fn(),\n    hasErrors: jest.fn(),\n    getErrorMessage: jest.fn(),\n  }\n}));\n\njest.mock('@/lib/models/Exercise', () => ({\n  ExerciseValidator: {\n    validateExerciseInput: jest.fn(),\n    sanitizeExerciseName: jest.fn(),\n  }\n}));\n\njest.mock('firebase/firestore', () => ({\n  collection: jest.fn(),\n  addDoc: jest.fn(),\n  deleteDoc: jest.fn(),\n  doc: jest.fn(),\n  onSnapshot: jest.fn(),\n  query: jest.fn(),\n  orderBy: jest.fn(),\n}));\n\njest.mock('uuid', () => ({\n  v4: jest.fn(() => 'test-uuid'),\n}));\n\njest.mock(\"@/lib/repo/ExerciseRepo\");\n\nconst mockRepo = mock<ExerciseRepo>();\n\ndescribe(\"useAddExercise\", () => {\n  beforeEach(() => {\n    mockReset(mockRepo);\n    jest.mocked(ExerciseRepo.getInstance).mockReturnValue(mockRepo);\n  });\n\n  test(\"returns a function that adds an exercise\", () => {\n    const testUid = \"test-user-uid\";\n    const { result } = renderHook(() => useAddExercise(testUid));\n    \n    expect(typeof result.current).toBe(\"function\");\n  });\n\n  test(\"calls repo addExercise with correct parameters\", async () => {\n    const testUid = \"test-user-uid\";\n    const testExercise = \"Push-ups\";\n    \n    mockRepo.addExercise.mockResolvedValue(undefined);\n    \n    const { result } = renderHook(() => useAddExercise(testUid));\n    \n    await result.current(testExercise);\n    \n    expect(mockRepo.addExercise).toHaveBeenCalledWith(testUid, { name: testExercise });\n  });\n\n  test(\"throws error when uid is empty\", async () => {\n    const { result } = renderHook(() => useAddExercise(\"\"));\n    \n    await expect(result.current(\"Push-ups\")).rejects.toThrow(\n      \"User must be authenticated to add exercises\"\n    );\n  });\n\n  test(\"propagates repo errors\", async () => {\n    const testUid = \"test-user-uid\";\n    const testError = new Error(\"Database error\");\n    \n    mockRepo.addExercise.mockRejectedValue(testError);\n    \n    const { result } = renderHook(() => useAddExercise(testUid));\n    \n    await expect(result.current(\"Push-ups\")).rejects.toThrow(\"Database error\");\n  });\n});"],"mappings":"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","ignoreList":[]}