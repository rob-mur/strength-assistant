dc6a5af1a03e5cf0a65d30ce78bec7a0
_getJestObj().mock("@/lib/data/supabase/SupabaseClient", function () {
  return {
    supabaseClient: {
      getCurrentUser: jest.fn(),
      getSupabaseClient: jest.fn()
    }
  };
});
_getJestObj().mock("@/lib/data/store", function () {
  return {
    exercises$: {
      get: jest.fn().mockReturnValue([]),
      set: jest.fn()
    }
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _syncConfig = require("@/lib/data/sync/syncConfig");
function _getJestObj() {
  var _require3 = require("@jest/globals"),
    jest = _require3.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
describe("syncHelpers", function () {
  afterEach(function () {
    delete global.navigator;
  });
  describe("isSyncing", function () {
    test("returns false by default", function () {
      expect(_syncConfig.syncHelpers.isSyncing()).toBe(false);
    });
  });
  describe("isOnline", function () {
    test("returns true when navigator.onLine is true", function () {
      global.navigator = {
        onLine: true
      };
      expect(_syncConfig.syncHelpers.isOnline()).toBe(true);
    });
    test("returns false when navigator.onLine is false", function () {
      global.navigator = {
        onLine: false
      };
      expect(_syncConfig.syncHelpers.isOnline()).toBe(false);
    });
    test("returns true when navigator is undefined", function () {
      expect(_syncConfig.syncHelpers.isOnline()).toBe(true);
    });
    test("returns true when navigator.onLine is undefined", function () {
      global.navigator = {};
      expect(_syncConfig.syncHelpers.isOnline()).toBe(true);
    });
  });
  describe("getPendingChangesCount", function () {
    test("returns 0 by default", function () {
      expect(_syncConfig.syncHelpers.getPendingChangesCount()).toBe(0);
    });
  });
  describe("hasErrors", function () {
    test("returns false by default", function () {
      expect(_syncConfig.syncHelpers.hasErrors()).toBe(false);
    });
  });
  describe("getErrorMessage", function () {
    test("returns undefined by default", function () {
      expect(_syncConfig.syncHelpers.getErrorMessage()).toBeUndefined();
    });
  });
  describe("forceSync", function () {
    test("executes without throwing when user is not authenticated", (0, _asyncToGenerator2.default)(function* () {
      var _require = require("@/lib/data/supabase/SupabaseClient"),
        supabaseClient = _require.supabaseClient;
      supabaseClient.getCurrentUser.mockResolvedValue(null);
      yield expect(_syncConfig.syncHelpers.forceSync()).resolves.not.toThrow();
    }));
    test("handles errors gracefully", (0, _asyncToGenerator2.default)(function* () {
      var _require2 = require("@/lib/data/supabase/SupabaseClient"),
        supabaseClient = _require2.supabaseClient;
      var consoleErrorSpy = jest.spyOn(console, 'error').mockImplementation();
      supabaseClient.getCurrentUser.mockRejectedValue(new Error("Auth failed"));
      yield expect(_syncConfig.syncHelpers.forceSync()).resolves.not.toThrow();
      expect(consoleErrorSpy).toHaveBeenCalledWith('Failed to force sync:', expect.any(Error));
      consoleErrorSpy.mockRestore();
    }));
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJzdXBhYmFzZUNsaWVudCIsImdldEN1cnJlbnRVc2VyIiwiamVzdCIsImZuIiwiZ2V0U3VwYWJhc2VDbGllbnQiLCJleGVyY2lzZXMkIiwiZ2V0IiwibW9ja1JldHVyblZhbHVlIiwic2V0IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsInJlcXVpcmUiLCJfYXN5bmNUb0dlbmVyYXRvcjIiLCJfc3luY0NvbmZpZyIsIl9yZXF1aXJlMyIsImRlc2NyaWJlIiwiYWZ0ZXJFYWNoIiwiZ2xvYmFsIiwibmF2aWdhdG9yIiwidGVzdCIsImV4cGVjdCIsInN5bmNIZWxwZXJzIiwiaXNTeW5jaW5nIiwidG9CZSIsIm9uTGluZSIsImlzT25saW5lIiwiZ2V0UGVuZGluZ0NoYW5nZXNDb3VudCIsImhhc0Vycm9ycyIsImdldEVycm9yTWVzc2FnZSIsInRvQmVVbmRlZmluZWQiLCJkZWZhdWx0IiwiX3JlcXVpcmUiLCJtb2NrUmVzb2x2ZWRWYWx1ZSIsImZvcmNlU3luYyIsInJlc29sdmVzIiwibm90IiwidG9UaHJvdyIsIl9yZXF1aXJlMiIsImNvbnNvbGVFcnJvclNweSIsInNweU9uIiwiY29uc29sZSIsIm1vY2tJbXBsZW1lbnRhdGlvbiIsIm1vY2tSZWplY3RlZFZhbHVlIiwiRXJyb3IiLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsImFueSIsIm1vY2tSZXN0b3JlIl0sInNvdXJjZXMiOlsic3luY0hlbHBlcnMtdGVzdC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBzeW5jSGVscGVycyB9IGZyb20gXCJAL2xpYi9kYXRhL3N5bmMvc3luY0NvbmZpZ1wiO1xuXG4vLyBNb2NrIHRoZSBTdXBhYmFzZUNsaWVudCBzaW5jZSBzeW5jSGVscGVycyB1c2VzIGl0IGludGVybmFsbHlcbmplc3QubW9jayhcIkAvbGliL2RhdGEvc3VwYWJhc2UvU3VwYWJhc2VDbGllbnRcIiwgKCkgPT4gKHtcbiAgc3VwYWJhc2VDbGllbnQ6IHtcbiAgICBnZXRDdXJyZW50VXNlcjogamVzdC5mbigpLFxuICAgIGdldFN1cGFiYXNlQ2xpZW50OiBqZXN0LmZuKCksXG4gIH0sXG59KSk7XG5cbi8vIE1vY2sgdGhlIHN0b3JlXG5qZXN0Lm1vY2soXCJAL2xpYi9kYXRhL3N0b3JlXCIsICgpID0+ICh7XG4gIGV4ZXJjaXNlcyQ6IHtcbiAgICBnZXQ6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoW10pLFxuICAgIHNldDogamVzdC5mbigpLFxuICB9LFxufSkpO1xuXG5kZXNjcmliZShcInN5bmNIZWxwZXJzXCIsICgpID0+IHtcbiAgYWZ0ZXJFYWNoKCgpID0+IHtcbiAgICAvLyBSZXNldCBuYXZpZ2F0b3IgbW9jayBhZnRlciBlYWNoIHRlc3RcbiAgICBkZWxldGUgKGdsb2JhbCBhcyBhbnkpLm5hdmlnYXRvcjtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJpc1N5bmNpbmdcIiwgKCkgPT4ge1xuICAgIHRlc3QoXCJyZXR1cm5zIGZhbHNlIGJ5IGRlZmF1bHRcIiwgKCkgPT4ge1xuICAgICAgZXhwZWN0KHN5bmNIZWxwZXJzLmlzU3luY2luZygpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcbiAgfSk7XG5cbiAgZGVzY3JpYmUoXCJpc09ubGluZVwiLCAoKSA9PiB7XG4gICAgdGVzdChcInJldHVybnMgdHJ1ZSB3aGVuIG5hdmlnYXRvci5vbkxpbmUgaXMgdHJ1ZVwiLCAoKSA9PiB7XG4gICAgICAvLyBNb2NrIG5hdmlnYXRvci5vbkxpbmVcbiAgICAgIChnbG9iYWwgYXMgYW55KS5uYXZpZ2F0b3IgPSB7IG9uTGluZTogdHJ1ZSB9O1xuXG4gICAgICBleHBlY3Qoc3luY0hlbHBlcnMuaXNPbmxpbmUoKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJyZXR1cm5zIGZhbHNlIHdoZW4gbmF2aWdhdG9yLm9uTGluZSBpcyBmYWxzZVwiLCAoKSA9PiB7XG4gICAgICAoZ2xvYmFsIGFzIGFueSkubmF2aWdhdG9yID0geyBvbkxpbmU6IGZhbHNlIH07XG5cbiAgICAgIGV4cGVjdChzeW5jSGVscGVycy5pc09ubGluZSgpKS50b0JlKGZhbHNlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJyZXR1cm5zIHRydWUgd2hlbiBuYXZpZ2F0b3IgaXMgdW5kZWZpbmVkXCIsICgpID0+IHtcbiAgICAgIC8vIE5vIG5hdmlnYXRvciBkZWZpbmVkXG4gICAgICBleHBlY3Qoc3luY0hlbHBlcnMuaXNPbmxpbmUoKSkudG9CZSh0cnVlKTtcbiAgICB9KTtcblxuICAgIHRlc3QoXCJyZXR1cm5zIHRydWUgd2hlbiBuYXZpZ2F0b3Iub25MaW5lIGlzIHVuZGVmaW5lZFwiLCAoKSA9PiB7XG4gICAgICAoZ2xvYmFsIGFzIGFueSkubmF2aWdhdG9yID0ge307XG5cbiAgICAgIGV4cGVjdChzeW5jSGVscGVycy5pc09ubGluZSgpKS50b0JlKHRydWUpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcImdldFBlbmRpbmdDaGFuZ2VzQ291bnRcIiwgKCkgPT4ge1xuICAgIHRlc3QoXCJyZXR1cm5zIDAgYnkgZGVmYXVsdFwiLCAoKSA9PiB7XG4gICAgICBleHBlY3Qoc3luY0hlbHBlcnMuZ2V0UGVuZGluZ0NoYW5nZXNDb3VudCgpKS50b0JlKDApO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcImhhc0Vycm9yc1wiLCAoKSA9PiB7XG4gICAgdGVzdChcInJldHVybnMgZmFsc2UgYnkgZGVmYXVsdFwiLCAoKSA9PiB7XG4gICAgICBleHBlY3Qoc3luY0hlbHBlcnMuaGFzRXJyb3JzKCkpLnRvQmUoZmFsc2UpO1xuICAgIH0pO1xuICB9KTtcblxuICBkZXNjcmliZShcImdldEVycm9yTWVzc2FnZVwiLCAoKSA9PiB7XG4gICAgdGVzdChcInJldHVybnMgdW5kZWZpbmVkIGJ5IGRlZmF1bHRcIiwgKCkgPT4ge1xuICAgICAgZXhwZWN0KHN5bmNIZWxwZXJzLmdldEVycm9yTWVzc2FnZSgpKS50b0JlVW5kZWZpbmVkKCk7XG4gICAgfSk7XG4gIH0pO1xuXG4gIGRlc2NyaWJlKFwiZm9yY2VTeW5jXCIsICgpID0+IHtcbiAgICB0ZXN0KFwiZXhlY3V0ZXMgd2l0aG91dCB0aHJvd2luZyB3aGVuIHVzZXIgaXMgbm90IGF1dGhlbnRpY2F0ZWRcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyBzdXBhYmFzZUNsaWVudCB9ID0gcmVxdWlyZShcIkAvbGliL2RhdGEvc3VwYWJhc2UvU3VwYWJhc2VDbGllbnRcIik7XG4gICAgICBzdXBhYmFzZUNsaWVudC5nZXRDdXJyZW50VXNlci5tb2NrUmVzb2x2ZWRWYWx1ZShudWxsKTtcblxuICAgICAgYXdhaXQgZXhwZWN0KHN5bmNIZWxwZXJzLmZvcmNlU3luYygpKS5yZXNvbHZlcy5ub3QudG9UaHJvdygpO1xuICAgIH0pO1xuXG4gICAgdGVzdChcImhhbmRsZXMgZXJyb3JzIGdyYWNlZnVsbHlcIiwgYXN5bmMgKCkgPT4ge1xuICAgICAgY29uc3QgeyBzdXBhYmFzZUNsaWVudCB9ID0gcmVxdWlyZShcIkAvbGliL2RhdGEvc3VwYWJhc2UvU3VwYWJhc2VDbGllbnRcIik7XG4gICAgICBjb25zdCBjb25zb2xlRXJyb3JTcHkgPSBqZXN0LnNweU9uKGNvbnNvbGUsICdlcnJvcicpLm1vY2tJbXBsZW1lbnRhdGlvbigpO1xuICAgICAgXG4gICAgICBzdXBhYmFzZUNsaWVudC5nZXRDdXJyZW50VXNlci5tb2NrUmVqZWN0ZWRWYWx1ZShuZXcgRXJyb3IoXCJBdXRoIGZhaWxlZFwiKSk7XG5cbiAgICAgIGF3YWl0IGV4cGVjdChzeW5jSGVscGVycy5mb3JjZVN5bmMoKSkucmVzb2x2ZXMubm90LnRvVGhyb3coKTtcbiAgICAgIGV4cGVjdChjb25zb2xlRXJyb3JTcHkpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKCdGYWlsZWQgdG8gZm9yY2Ugc3luYzonLCBleHBlY3QuYW55KEVycm9yKSk7XG4gICAgICBcbiAgICAgIGNvbnNvbGVFcnJvclNweS5tb2NrUmVzdG9yZSgpO1xuICAgIH0pO1xuICB9KTtcbn0pOyJd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