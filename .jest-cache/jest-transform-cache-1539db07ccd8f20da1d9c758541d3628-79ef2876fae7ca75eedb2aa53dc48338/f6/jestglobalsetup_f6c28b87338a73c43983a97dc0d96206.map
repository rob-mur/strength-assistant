{"version":3,"names":["_require","require","spawn","module","exports","_asyncToGenerator2","default","console","log","result","runTypeScriptValidation","exitCode","error","stderr","process","exit","message","Promise","resolve","_process$stdout","_process$stderr","stdio","shell","stdout","on","data","toString","setTimeout","kill"],"sources":["jest.global-setup.js"],"sourcesContent":["/**\n * Jest Global Setup: Constitutional TypeScript Validation\n * \n * This setup runs before all tests to ensure TypeScript compilation\n * succeeds, implementing our constitutional requirement that\n * \"TypeScript compilation MUST succeed before test execution.\"\n */\n\nconst { spawn } = require('child_process');\n\nmodule.exports = async () => {\n  console.log('üîç Constitutional Requirement: Validating TypeScript compilation before test execution...');\n  \n  try {\n    // Run TypeScript compilation check\n    const result = await runTypeScriptValidation();\n    \n    if (result.exitCode !== 0) {\n      console.error('‚ùå CONSTITUTIONAL VIOLATION: TypeScript compilation failed');\n      console.error('üö´ Tests cannot proceed - fix TypeScript errors first');\n      console.error('\\nTypeScript errors:');\n      console.error(result.stderr);\n      console.error('\\nRequired actions:');\n      console.error('1. Run \"npx tsc --noEmit\" to see all errors');\n      console.error('2. Fix all TypeScript compilation errors');\n      console.error('3. Ensure all files pass strict type checking');\n      console.error('4. Run tests again');\n      \n      // Exit the test process - constitutional violation\n      process.exit(1);\n    }\n    \n    console.log('‚úÖ TypeScript compilation successful');\n    console.log('‚úÖ Constitutional requirements met - proceeding with test execution');\n    \n  } catch (error) {\n    console.error('‚ùå TypeScript validation process failed:', error.message);\n    console.error('üö´ Cannot proceed with tests due to validation failure');\n    process.exit(1);\n  }\n};\n\n/**\n * Run TypeScript compilation validation\n * @returns {Promise<{exitCode: number, stdout: string, stderr: string}>}\n */\nfunction runTypeScriptValidation() {\n  return new Promise((resolve) => {\n    console.log('   Running: npx tsc --noEmit');\n    \n    const process = spawn('npx', ['tsc', '--noEmit'], {\n      stdio: ['pipe', 'pipe', 'pipe'],\n      shell: true\n    });\n    \n    let stdout = '';\n    let stderr = '';\n    \n    process.stdout?.on('data', (data) => {\n      stdout += data.toString();\n    });\n    \n    process.stderr?.on('data', (data) => {\n      stderr += data.toString();\n    });\n    \n    process.on('close', (exitCode) => {\n      resolve({\n        exitCode: exitCode ?? 1,\n        stdout,\n        stderr\n      });\n    });\n    \n    process.on('error', (error) => {\n      resolve({\n        exitCode: 1,\n        stdout,\n        stderr: `TypeScript validation process error: ${error.message}`\n      });\n    });\n    \n    // Timeout after 30 seconds\n    setTimeout(() => {\n      process.kill();\n      resolve({\n        exitCode: 1,\n        stdout,\n        stderr: 'TypeScript validation timed out after 30 seconds'\n      });\n    }, 30000);\n  });\n}"],"mappings":"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","ignoreList":[]}