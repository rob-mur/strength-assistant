2655482b8e25d7b21d1cc4d6163af5b9
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.constitutionalAmendmentManager = exports.ConstitutionalAmendmentManagerImpl = void 0;
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _classCallCheck2 = _interopRequireDefault(require("@babel/runtime/helpers/classCallCheck"));
var _createClass2 = _interopRequireDefault(require("@babel/runtime/helpers/createClass"));
var ConstitutionalAmendmentManagerImpl = exports.ConstitutionalAmendmentManagerImpl = function () {
  function ConstitutionalAmendmentManagerImpl() {
    (0, _classCallCheck2.default)(this, ConstitutionalAmendmentManagerImpl);
    this.amendments = new Map();
    this.currentRequirements = {
      version: '2.5.0',
      requirementsBySection: {
        'Testing (NON-NEGOTIABLE)': ['TypeScript compilation MUST succeed before test execution', 'devbox run test MUST pass completely before any commit', 'Pre-commit hooks MUST validate TypeScript compilation', 'Red-Green-Refactor cycle strictly enforced', 'Tests written before implementation', 'Binary exit code validation MUST be used instead of log parsing', 'Exit code 0 = complete success, non-zero = any failure'],
        'Simplicity': ['Maximum 3 projects per feature', 'Use frameworks directly without wrapper classes', 'Single data model without DTOs unless serialization differs'],
        'Architecture': ['Every feature as library', 'CLI per library', 'Library documentation required'],
        'Observability': ['Structured logging required', 'Frontend logs stream to backend', 'Error context sufficient for debugging'],
        'Versioning': ['MAJOR.MINOR.BUILD format mandatory', 'BUILD increments on every change', 'Breaking changes require migration plans']
      },
      prohibitionsBySection: {
        'Testing (NON-NEGOTIABLE)': ['Committing code that breaks TypeScript compilation', 'Implementation before test', 'Skipping RED phase', 'Deferring TypeScript compilation errors', 'Using log parsing instead of exit code validation', 'Declaring test success when exit code is non-zero'],
        'Simplicity': ['Complex testing abstractions', 'Unnecessary wrapper patterns', 'Multiple DTOs for same data'],
        'Architecture': ['Direct database access without repository pattern', 'Undocumented libraries', 'CLI-less libraries'],
        'Observability': ['Silent failures', 'Missing error context', 'Frontend-only logging'],
        'Versioning': ['Unversioned releases', 'Breaking changes without migration', 'Semantic version violations']
      },
      activeEnforcements: [{
        type: 'pre-commit-hook',
        configuration: {
          command: 'devbox run test',
          targets: ['**/*.ts', '**/*.tsx'],
          onFailure: 'block',
          parameters: {
            validateTypeScript: true,
            validateLinting: true,
            validateFormatting: true
          }
        },
        active: true
      }, {
        type: 'ci-validation',
        configuration: {
          command: 'devbox run test',
          targets: ['**/*'],
          onFailure: 'block',
          parameters: {
            fullValidation: true
          }
        },
        active: true
      }]
    };
  }
  return (0, _createClass2.default)(ConstitutionalAmendmentManagerImpl, [{
    key: "proposeAmendment",
    value: function () {
      var _proposeAmendment = (0, _asyncToGenerator2.default)(function* (amendment) {
        var trackingInfo = {
          amendmentId: amendment.id,
          status: 'proposed',
          createdAt: new Date(),
          updatedAt: new Date(),
          reviews: [],
          version: this.currentRequirements.version
        };
        this.amendments.set(amendment.id, trackingInfo);
        return trackingInfo;
      });
      function proposeAmendment(_x) {
        return _proposeAmendment.apply(this, arguments);
      }
      return proposeAmendment;
    }()
  }, {
    key: "reviewAmendment",
    value: function () {
      var _reviewAmendment = (0, _asyncToGenerator2.default)(function* (amendmentId, review) {
        var trackingInfo = this.amendments.get(amendmentId);
        if (!trackingInfo) {
          throw new Error(`Amendment ${amendmentId} not found`);
        }
        trackingInfo.reviews.push(review);
        trackingInfo.updatedAt = new Date();
        switch (review.decision) {
          case 'approve':
            trackingInfo.status = 'approved';
            break;
          case 'reject':
            trackingInfo.status = 'rejected';
            break;
          case 'request-changes':
            trackingInfo.status = 'under-review';
            break;
        }
        this.amendments.set(amendmentId, trackingInfo);
        return trackingInfo;
      });
      function reviewAmendment(_x2, _x3) {
        return _reviewAmendment.apply(this, arguments);
      }
      return reviewAmendment;
    }()
  }, {
    key: "enactAmendment",
    value: function () {
      var _enactAmendment = (0, _asyncToGenerator2.default)(function* (amendmentId) {
        var trackingInfo = this.amendments.get(amendmentId);
        if (!trackingInfo) {
          throw new Error(`Amendment ${amendmentId} not found`);
        }
        if (trackingInfo.status !== 'approved') {
          throw new Error(`Amendment ${amendmentId} must be approved before enactment`);
        }
        trackingInfo.status = 'enacted';
        trackingInfo.updatedAt = new Date();
        this.amendments.set(amendmentId, trackingInfo);
        var enforcementConfig = {
          amendmentId: amendmentId,
          mechanisms: this.currentRequirements.activeEnforcements,
          gracePeriodDays: 0,
          monitoring: {
            enableMetrics: true,
            reportingInterval: 'daily',
            alertThresholds: {
              violationCount: 1,
              timeWindow: '1hour'
            }
          }
        };
        return enforcementConfig;
      });
      function enactAmendment(_x4) {
        return _enactAmendment.apply(this, arguments);
      }
      return enactAmendment;
    }()
  }, {
    key: "getCurrentRequirements",
    value: function getCurrentRequirements() {
      return Object.assign({}, this.currentRequirements);
    }
  }, {
    key: "validateCompliance",
    value: function () {
      var _validateCompliance = (0, _asyncToGenerator2.default)(function* (target) {
        var violations = [];
        var score = 100;
        if (target.type === 'codebase' && target.aspects.includes('typescript')) {
          try {
            var hasTypeScriptErrors = yield this.checkTypeScriptCompilation();
            if (hasTypeScriptErrors) {
              violations.push({
                requirement: 'TypeScript compilation MUST succeed before test execution',
                description: 'TypeScript compilation errors detected',
                severity: 'critical',
                context: 'Codebase compilation check',
                resolution: 'Run tsc --noEmit and fix all TypeScript errors'
              });
              score -= 50;
            }
          } catch (error) {
            violations.push({
              requirement: 'TypeScript compilation validation',
              description: `Failed to validate TypeScript: ${error}`,
              severity: 'critical',
              context: 'Compilation validation process',
              resolution: 'Ensure TypeScript compiler is properly configured'
            });
            score -= 50;
          }
        }
        if (target.aspects.includes('testing')) {
          var testsPassing = yield this.checkTestExecution();
          if (!testsPassing) {
            violations.push({
              requirement: 'devbox run test MUST pass completely before any commit',
              description: 'Test suite execution failures detected',
              severity: 'critical',
              context: 'Test suite validation',
              resolution: 'Run devbox run test and fix all failing tests'
            });
            score -= 30;
          }
        }
        var recommendations = [];
        if (violations.length > 0) {
          recommendations.push('Address all TypeScript compilation errors immediately');
          recommendations.push('Ensure devbox run test passes before any commits');
          recommendations.push('Consider implementing automated pre-commit hooks');
        }
        return {
          compliant: violations.length === 0,
          violations: violations,
          score: Math.max(0, score),
          recommendations: recommendations,
          validatedAt: new Date()
        };
      });
      function validateCompliance(_x5) {
        return _validateCompliance.apply(this, arguments);
      }
      return validateCompliance;
    }()
  }, {
    key: "checkTypeScriptCompilation",
    value: function () {
      var _checkTypeScriptCompilation = (0, _asyncToGenerator2.default)(function* () {
        return false;
      });
      function checkTypeScriptCompilation() {
        return _checkTypeScriptCompilation.apply(this, arguments);
      }
      return checkTypeScriptCompilation;
    }()
  }, {
    key: "validateTestExitCode",
    value: function () {
      var _validateTestExitCode = (0, _asyncToGenerator2.default)(function* (testCommand, exitCode) {
        var expectedExitCode = 0;
        var valid = exitCode === expectedExitCode;
        var message;
        var failureContext;
        if (valid) {
          message = `Constitutional compliance achieved: ${testCommand} returned exit code ${exitCode}`;
        } else {
          message = `Constitutional violation: ${testCommand} returned exit code ${exitCode}, expected ${expectedExitCode}`;
          failureContext = `Any non-zero exit code indicates test failure, TypeScript compilation error, or infrastructure issue. Amendment v2.5.0 requires binary 0/1 status validation.`;
        }
        return {
          valid: valid,
          command: testCommand,
          exitCode: exitCode,
          expectedExitCode: expectedExitCode,
          message: message,
          constitutionalRequirement: 'Amendment v2.5.0: Binary Exit Code Enforcement',
          validatedAt: new Date(),
          failureContext: failureContext
        };
      });
      function validateTestExitCode(_x6, _x7) {
        return _validateTestExitCode.apply(this, arguments);
      }
      return validateTestExitCode;
    }()
  }, {
    key: "checkTestExecution",
    value: function () {
      var _checkTestExecution = (0, _asyncToGenerator2.default)(function* () {
        return true;
      });
      function checkTestExecution() {
        return _checkTestExecution.apply(this, arguments);
      }
      return checkTestExecution;
    }()
  }]);
}();
var constitutionalAmendmentManager = exports.constitutionalAmendmentManager = new ConstitutionalAmendmentManagerImpl();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJDb25zdGl0dXRpb25hbEFtZW5kbWVudE1hbmFnZXJJbXBsIiwiZXhwb3J0cyIsIl9jbGFzc0NhbGxDaGVjazIiLCJkZWZhdWx0IiwiYW1lbmRtZW50cyIsIk1hcCIsImN1cnJlbnRSZXF1aXJlbWVudHMiLCJ2ZXJzaW9uIiwicmVxdWlyZW1lbnRzQnlTZWN0aW9uIiwicHJvaGliaXRpb25zQnlTZWN0aW9uIiwiYWN0aXZlRW5mb3JjZW1lbnRzIiwidHlwZSIsImNvbmZpZ3VyYXRpb24iLCJjb21tYW5kIiwidGFyZ2V0cyIsIm9uRmFpbHVyZSIsInBhcmFtZXRlcnMiLCJ2YWxpZGF0ZVR5cGVTY3JpcHQiLCJ2YWxpZGF0ZUxpbnRpbmciLCJ2YWxpZGF0ZUZvcm1hdHRpbmciLCJhY3RpdmUiLCJmdWxsVmFsaWRhdGlvbiIsIl9jcmVhdGVDbGFzczIiLCJrZXkiLCJ2YWx1ZSIsIl9wcm9wb3NlQW1lbmRtZW50IiwiX2FzeW5jVG9HZW5lcmF0b3IyIiwiYW1lbmRtZW50IiwidHJhY2tpbmdJbmZvIiwiYW1lbmRtZW50SWQiLCJpZCIsInN0YXR1cyIsImNyZWF0ZWRBdCIsIkRhdGUiLCJ1cGRhdGVkQXQiLCJyZXZpZXdzIiwic2V0IiwicHJvcG9zZUFtZW5kbWVudCIsIl94IiwiYXBwbHkiLCJhcmd1bWVudHMiLCJfcmV2aWV3QW1lbmRtZW50IiwicmV2aWV3IiwiZ2V0IiwiRXJyb3IiLCJwdXNoIiwiZGVjaXNpb24iLCJyZXZpZXdBbWVuZG1lbnQiLCJfeDIiLCJfeDMiLCJfZW5hY3RBbWVuZG1lbnQiLCJlbmZvcmNlbWVudENvbmZpZyIsIm1lY2hhbmlzbXMiLCJncmFjZVBlcmlvZERheXMiLCJtb25pdG9yaW5nIiwiZW5hYmxlTWV0cmljcyIsInJlcG9ydGluZ0ludGVydmFsIiwiYWxlcnRUaHJlc2hvbGRzIiwidmlvbGF0aW9uQ291bnQiLCJ0aW1lV2luZG93IiwiZW5hY3RBbWVuZG1lbnQiLCJfeDQiLCJnZXRDdXJyZW50UmVxdWlyZW1lbnRzIiwiT2JqZWN0IiwiYXNzaWduIiwiX3ZhbGlkYXRlQ29tcGxpYW5jZSIsInRhcmdldCIsInZpb2xhdGlvbnMiLCJzY29yZSIsImFzcGVjdHMiLCJpbmNsdWRlcyIsImhhc1R5cGVTY3JpcHRFcnJvcnMiLCJjaGVja1R5cGVTY3JpcHRDb21waWxhdGlvbiIsInJlcXVpcmVtZW50IiwiZGVzY3JpcHRpb24iLCJzZXZlcml0eSIsImNvbnRleHQiLCJyZXNvbHV0aW9uIiwiZXJyb3IiLCJ0ZXN0c1Bhc3NpbmciLCJjaGVja1Rlc3RFeGVjdXRpb24iLCJyZWNvbW1lbmRhdGlvbnMiLCJsZW5ndGgiLCJjb21wbGlhbnQiLCJNYXRoIiwibWF4IiwidmFsaWRhdGVkQXQiLCJ2YWxpZGF0ZUNvbXBsaWFuY2UiLCJfeDUiLCJfY2hlY2tUeXBlU2NyaXB0Q29tcGlsYXRpb24iLCJfdmFsaWRhdGVUZXN0RXhpdENvZGUiLCJ0ZXN0Q29tbWFuZCIsImV4aXRDb2RlIiwiZXhwZWN0ZWRFeGl0Q29kZSIsInZhbGlkIiwibWVzc2FnZSIsImZhaWx1cmVDb250ZXh0IiwiY29uc3RpdHV0aW9uYWxSZXF1aXJlbWVudCIsInZhbGlkYXRlVGVzdEV4aXRDb2RlIiwiX3g2IiwiX3g3IiwiX2NoZWNrVGVzdEV4ZWN1dGlvbiIsImNvbnN0aXR1dGlvbmFsQW1lbmRtZW50TWFuYWdlciJdLCJzb3VyY2VzIjpbIkNvbnN0aXR1dGlvbmFsQW1lbmRtZW50TWFuYWdlci50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIENvbnN0aXR1dGlvbmFsIEFtZW5kbWVudCBNYW5hZ2VyIEltcGxlbWVudGF0aW9uXG4gKiBcbiAqIEltcGxlbWVudHMgdGhlIENvbnN0aXR1dGlvbmFsQW1lbmRtZW50TWFuYWdlciBpbnRlcmZhY2UgZm9yIG1hbmFnaW5nXG4gKiBUeXBlU2NyaXB0IHRlc3RpbmcgcmVxdWlyZW1lbnRzIGFuZCBjb25zdGl0dXRpb25hbCBlbmZvcmNlbWVudC5cbiAqL1xuXG5pbXBvcnQge1xuICBDb25zdGl0dXRpb25hbEFtZW5kbWVudE1hbmFnZXIsXG4gIENvbnN0aXR1dGlvbmFsQW1lbmRtZW50LFxuICBBbWVuZG1lbnRUcmFja2luZ0luZm8sXG4gIEFtZW5kbWVudFJldmlldyxcbiAgRW5mb3JjZW1lbnRDb25maWd1cmF0aW9uLFxuICBDb25zdGl0dXRpb25hbFJlcXVpcmVtZW50cyxcbiAgQ29tcGxpYW5jZVRhcmdldCxcbiAgQ29tcGxpYW5jZVJlc3VsdCxcbiAgQW1lbmRtZW50U3RhdHVzLFxuICBDb21wbGlhbmNlVmlvbGF0aW9uLFxuICBFbmZvcmNlbWVudFR5cGUsXG4gIEV4aXRDb2RlVmFsaWRhdGlvblJlc3VsdFxufSBmcm9tICcuLi8uLi9zcGVjcy8wMDEtd2UtYXJlLWFjdHVhbGx5L2NvbnRyYWN0cy9jb25zdGl0dXRpb25hbC1hbWVuZG1lbnQnO1xuXG5leHBvcnQgY2xhc3MgQ29uc3RpdHV0aW9uYWxBbWVuZG1lbnRNYW5hZ2VySW1wbCBpbXBsZW1lbnRzIENvbnN0aXR1dGlvbmFsQW1lbmRtZW50TWFuYWdlciB7XG4gIHByaXZhdGUgYW1lbmRtZW50czogTWFwPHN0cmluZywgQW1lbmRtZW50VHJhY2tpbmdJbmZvPiA9IG5ldyBNYXAoKTtcbiAgcHJpdmF0ZSBjdXJyZW50UmVxdWlyZW1lbnRzOiBDb25zdGl0dXRpb25hbFJlcXVpcmVtZW50cztcblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICAvLyBJbml0aWFsaXplIHdpdGggY3VycmVudCBjb25zdGl0dXRpb25hbCByZXF1aXJlbWVudHNcbiAgICB0aGlzLmN1cnJlbnRSZXF1aXJlbWVudHMgPSB7XG4gICAgICB2ZXJzaW9uOiAnMi41LjAnLFxuICAgICAgcmVxdWlyZW1lbnRzQnlTZWN0aW9uOiB7XG4gICAgICAgICdUZXN0aW5nIChOT04tTkVHT1RJQUJMRSknOiBbXG4gICAgICAgICAgJ1R5cGVTY3JpcHQgY29tcGlsYXRpb24gTVVTVCBzdWNjZWVkIGJlZm9yZSB0ZXN0IGV4ZWN1dGlvbicsXG4gICAgICAgICAgJ2RldmJveCBydW4gdGVzdCBNVVNUIHBhc3MgY29tcGxldGVseSBiZWZvcmUgYW55IGNvbW1pdCcsXG4gICAgICAgICAgJ1ByZS1jb21taXQgaG9va3MgTVVTVCB2YWxpZGF0ZSBUeXBlU2NyaXB0IGNvbXBpbGF0aW9uJyxcbiAgICAgICAgICAnUmVkLUdyZWVuLVJlZmFjdG9yIGN5Y2xlIHN0cmljdGx5IGVuZm9yY2VkJyxcbiAgICAgICAgICAnVGVzdHMgd3JpdHRlbiBiZWZvcmUgaW1wbGVtZW50YXRpb24nLFxuICAgICAgICAgICdCaW5hcnkgZXhpdCBjb2RlIHZhbGlkYXRpb24gTVVTVCBiZSB1c2VkIGluc3RlYWQgb2YgbG9nIHBhcnNpbmcnLFxuICAgICAgICAgICdFeGl0IGNvZGUgMCA9IGNvbXBsZXRlIHN1Y2Nlc3MsIG5vbi16ZXJvID0gYW55IGZhaWx1cmUnXG4gICAgICAgIF0sXG4gICAgICAgICdTaW1wbGljaXR5JzogW1xuICAgICAgICAgICdNYXhpbXVtIDMgcHJvamVjdHMgcGVyIGZlYXR1cmUnLFxuICAgICAgICAgICdVc2UgZnJhbWV3b3JrcyBkaXJlY3RseSB3aXRob3V0IHdyYXBwZXIgY2xhc3NlcycsXG4gICAgICAgICAgJ1NpbmdsZSBkYXRhIG1vZGVsIHdpdGhvdXQgRFRPcyB1bmxlc3Mgc2VyaWFsaXphdGlvbiBkaWZmZXJzJ1xuICAgICAgICBdLFxuICAgICAgICAnQXJjaGl0ZWN0dXJlJzogW1xuICAgICAgICAgICdFdmVyeSBmZWF0dXJlIGFzIGxpYnJhcnknLFxuICAgICAgICAgICdDTEkgcGVyIGxpYnJhcnknLFxuICAgICAgICAgICdMaWJyYXJ5IGRvY3VtZW50YXRpb24gcmVxdWlyZWQnXG4gICAgICAgIF0sXG4gICAgICAgICdPYnNlcnZhYmlsaXR5JzogW1xuICAgICAgICAgICdTdHJ1Y3R1cmVkIGxvZ2dpbmcgcmVxdWlyZWQnLFxuICAgICAgICAgICdGcm9udGVuZCBsb2dzIHN0cmVhbSB0byBiYWNrZW5kJyxcbiAgICAgICAgICAnRXJyb3IgY29udGV4dCBzdWZmaWNpZW50IGZvciBkZWJ1Z2dpbmcnXG4gICAgICAgIF0sXG4gICAgICAgICdWZXJzaW9uaW5nJzogW1xuICAgICAgICAgICdNQUpPUi5NSU5PUi5CVUlMRCBmb3JtYXQgbWFuZGF0b3J5JyxcbiAgICAgICAgICAnQlVJTEQgaW5jcmVtZW50cyBvbiBldmVyeSBjaGFuZ2UnLFxuICAgICAgICAgICdCcmVha2luZyBjaGFuZ2VzIHJlcXVpcmUgbWlncmF0aW9uIHBsYW5zJ1xuICAgICAgICBdXG4gICAgICB9LFxuICAgICAgcHJvaGliaXRpb25zQnlTZWN0aW9uOiB7XG4gICAgICAgICdUZXN0aW5nIChOT04tTkVHT1RJQUJMRSknOiBbXG4gICAgICAgICAgJ0NvbW1pdHRpbmcgY29kZSB0aGF0IGJyZWFrcyBUeXBlU2NyaXB0IGNvbXBpbGF0aW9uJyxcbiAgICAgICAgICAnSW1wbGVtZW50YXRpb24gYmVmb3JlIHRlc3QnLFxuICAgICAgICAgICdTa2lwcGluZyBSRUQgcGhhc2UnLFxuICAgICAgICAgICdEZWZlcnJpbmcgVHlwZVNjcmlwdCBjb21waWxhdGlvbiBlcnJvcnMnLFxuICAgICAgICAgICdVc2luZyBsb2cgcGFyc2luZyBpbnN0ZWFkIG9mIGV4aXQgY29kZSB2YWxpZGF0aW9uJyxcbiAgICAgICAgICAnRGVjbGFyaW5nIHRlc3Qgc3VjY2VzcyB3aGVuIGV4aXQgY29kZSBpcyBub24temVybydcbiAgICAgICAgXSxcbiAgICAgICAgJ1NpbXBsaWNpdHknOiBbXG4gICAgICAgICAgJ0NvbXBsZXggdGVzdGluZyBhYnN0cmFjdGlvbnMnLFxuICAgICAgICAgICdVbm5lY2Vzc2FyeSB3cmFwcGVyIHBhdHRlcm5zJyxcbiAgICAgICAgICAnTXVsdGlwbGUgRFRPcyBmb3Igc2FtZSBkYXRhJ1xuICAgICAgICBdLFxuICAgICAgICAnQXJjaGl0ZWN0dXJlJzogW1xuICAgICAgICAgICdEaXJlY3QgZGF0YWJhc2UgYWNjZXNzIHdpdGhvdXQgcmVwb3NpdG9yeSBwYXR0ZXJuJyxcbiAgICAgICAgICAnVW5kb2N1bWVudGVkIGxpYnJhcmllcycsXG4gICAgICAgICAgJ0NMSS1sZXNzIGxpYnJhcmllcydcbiAgICAgICAgXSxcbiAgICAgICAgJ09ic2VydmFiaWxpdHknOiBbXG4gICAgICAgICAgJ1NpbGVudCBmYWlsdXJlcycsXG4gICAgICAgICAgJ01pc3NpbmcgZXJyb3IgY29udGV4dCcsXG4gICAgICAgICAgJ0Zyb250ZW5kLW9ubHkgbG9nZ2luZydcbiAgICAgICAgXSxcbiAgICAgICAgJ1ZlcnNpb25pbmcnOiBbXG4gICAgICAgICAgJ1VudmVyc2lvbmVkIHJlbGVhc2VzJyxcbiAgICAgICAgICAnQnJlYWtpbmcgY2hhbmdlcyB3aXRob3V0IG1pZ3JhdGlvbicsXG4gICAgICAgICAgJ1NlbWFudGljIHZlcnNpb24gdmlvbGF0aW9ucydcbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIGFjdGl2ZUVuZm9yY2VtZW50czogW1xuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogJ3ByZS1jb21taXQtaG9vaycgYXMgRW5mb3JjZW1lbnRUeXBlLFxuICAgICAgICAgIGNvbmZpZ3VyYXRpb246IHtcbiAgICAgICAgICAgIGNvbW1hbmQ6ICdkZXZib3ggcnVuIHRlc3QnLFxuICAgICAgICAgICAgdGFyZ2V0czogWycqKi8qLnRzJywgJyoqLyoudHN4J10sXG4gICAgICAgICAgICBvbkZhaWx1cmU6ICdibG9jaycsXG4gICAgICAgICAgICBwYXJhbWV0ZXJzOiB7XG4gICAgICAgICAgICAgIHZhbGlkYXRlVHlwZVNjcmlwdDogdHJ1ZSxcbiAgICAgICAgICAgICAgdmFsaWRhdGVMaW50aW5nOiB0cnVlLFxuICAgICAgICAgICAgICB2YWxpZGF0ZUZvcm1hdHRpbmc6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9LFxuICAgICAgICAgIGFjdGl2ZTogdHJ1ZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdHlwZTogJ2NpLXZhbGlkYXRpb24nIGFzIEVuZm9yY2VtZW50VHlwZSxcbiAgICAgICAgICBjb25maWd1cmF0aW9uOiB7XG4gICAgICAgICAgICBjb21tYW5kOiAnZGV2Ym94IHJ1biB0ZXN0JyxcbiAgICAgICAgICAgIHRhcmdldHM6IFsnKiovKiddLFxuICAgICAgICAgICAgb25GYWlsdXJlOiAnYmxvY2snLFxuICAgICAgICAgICAgcGFyYW1ldGVyczoge1xuICAgICAgICAgICAgICBmdWxsVmFsaWRhdGlvbjogdHJ1ZVxuICAgICAgICAgICAgfVxuICAgICAgICAgIH0sXG4gICAgICAgICAgYWN0aXZlOiB0cnVlXG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9O1xuICB9XG5cbiAgYXN5bmMgcHJvcG9zZUFtZW5kbWVudChhbWVuZG1lbnQ6IENvbnN0aXR1dGlvbmFsQW1lbmRtZW50KTogUHJvbWlzZTxBbWVuZG1lbnRUcmFja2luZ0luZm8+IHtcbiAgICBjb25zdCB0cmFja2luZ0luZm86IEFtZW5kbWVudFRyYWNraW5nSW5mbyA9IHtcbiAgICAgIGFtZW5kbWVudElkOiBhbWVuZG1lbnQuaWQsXG4gICAgICBzdGF0dXM6ICdwcm9wb3NlZCcgYXMgQW1lbmRtZW50U3RhdHVzLFxuICAgICAgY3JlYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgdXBkYXRlZEF0OiBuZXcgRGF0ZSgpLFxuICAgICAgcmV2aWV3czogW10sXG4gICAgICB2ZXJzaW9uOiB0aGlzLmN1cnJlbnRSZXF1aXJlbWVudHMudmVyc2lvblxuICAgIH07XG5cbiAgICB0aGlzLmFtZW5kbWVudHMuc2V0KGFtZW5kbWVudC5pZCwgdHJhY2tpbmdJbmZvKTtcbiAgICByZXR1cm4gdHJhY2tpbmdJbmZvO1xuICB9XG5cbiAgYXN5bmMgcmV2aWV3QW1lbmRtZW50KGFtZW5kbWVudElkOiBzdHJpbmcsIHJldmlldzogQW1lbmRtZW50UmV2aWV3KTogUHJvbWlzZTxBbWVuZG1lbnRUcmFja2luZ0luZm8+IHtcbiAgICBjb25zdCB0cmFja2luZ0luZm8gPSB0aGlzLmFtZW5kbWVudHMuZ2V0KGFtZW5kbWVudElkKTtcbiAgICBpZiAoIXRyYWNraW5nSW5mbykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBBbWVuZG1lbnQgJHthbWVuZG1lbnRJZH0gbm90IGZvdW5kYCk7XG4gICAgfVxuXG4gICAgdHJhY2tpbmdJbmZvLnJldmlld3MucHVzaChyZXZpZXcpO1xuICAgIHRyYWNraW5nSW5mby51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpO1xuXG4gICAgLy8gVXBkYXRlIHN0YXR1cyBiYXNlZCBvbiByZXZpZXcgZGVjaXNpb25cbiAgICBzd2l0Y2ggKHJldmlldy5kZWNpc2lvbikge1xuICAgICAgY2FzZSAnYXBwcm92ZSc6XG4gICAgICAgIHRyYWNraW5nSW5mby5zdGF0dXMgPSAnYXBwcm92ZWQnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3JlamVjdCc6XG4gICAgICAgIHRyYWNraW5nSW5mby5zdGF0dXMgPSAncmVqZWN0ZWQnO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3JlcXVlc3QtY2hhbmdlcyc6XG4gICAgICAgIHRyYWNraW5nSW5mby5zdGF0dXMgPSAndW5kZXItcmV2aWV3JztcbiAgICAgICAgYnJlYWs7XG4gICAgfVxuXG4gICAgdGhpcy5hbWVuZG1lbnRzLnNldChhbWVuZG1lbnRJZCwgdHJhY2tpbmdJbmZvKTtcbiAgICByZXR1cm4gdHJhY2tpbmdJbmZvO1xuICB9XG5cbiAgYXN5bmMgZW5hY3RBbWVuZG1lbnQoYW1lbmRtZW50SWQ6IHN0cmluZyk6IFByb21pc2U8RW5mb3JjZW1lbnRDb25maWd1cmF0aW9uPiB7XG4gICAgY29uc3QgdHJhY2tpbmdJbmZvID0gdGhpcy5hbWVuZG1lbnRzLmdldChhbWVuZG1lbnRJZCk7XG4gICAgaWYgKCF0cmFja2luZ0luZm8pIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcihgQW1lbmRtZW50ICR7YW1lbmRtZW50SWR9IG5vdCBmb3VuZGApO1xuICAgIH1cblxuICAgIGlmICh0cmFja2luZ0luZm8uc3RhdHVzICE9PSAnYXBwcm92ZWQnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEFtZW5kbWVudCAke2FtZW5kbWVudElkfSBtdXN0IGJlIGFwcHJvdmVkIGJlZm9yZSBlbmFjdG1lbnRgKTtcbiAgICB9XG5cbiAgICB0cmFja2luZ0luZm8uc3RhdHVzID0gJ2VuYWN0ZWQnO1xuICAgIHRyYWNraW5nSW5mby51cGRhdGVkQXQgPSBuZXcgRGF0ZSgpO1xuICAgIHRoaXMuYW1lbmRtZW50cy5zZXQoYW1lbmRtZW50SWQsIHRyYWNraW5nSW5mbyk7XG5cbiAgICAvLyBDcmVhdGUgZW5mb3JjZW1lbnQgY29uZmlndXJhdGlvblxuICAgIGNvbnN0IGVuZm9yY2VtZW50Q29uZmlnOiBFbmZvcmNlbWVudENvbmZpZ3VyYXRpb24gPSB7XG4gICAgICBhbWVuZG1lbnRJZCxcbiAgICAgIG1lY2hhbmlzbXM6IHRoaXMuY3VycmVudFJlcXVpcmVtZW50cy5hY3RpdmVFbmZvcmNlbWVudHMsXG4gICAgICBncmFjZVBlcmlvZERheXM6IDAsIC8vIEltbWVkaWF0ZSBlbmZvcmNlbWVudCBmb3IgVHlwZVNjcmlwdCByZXF1aXJlbWVudHNcbiAgICAgIG1vbml0b3Jpbmc6IHtcbiAgICAgICAgZW5hYmxlTWV0cmljczogdHJ1ZSxcbiAgICAgICAgcmVwb3J0aW5nSW50ZXJ2YWw6ICdkYWlseScsXG4gICAgICAgIGFsZXJ0VGhyZXNob2xkczoge1xuICAgICAgICAgIHZpb2xhdGlvbkNvdW50OiAxLCAvLyBaZXJvIHRvbGVyYW5jZSBmb3IgVHlwZVNjcmlwdCBjb21waWxhdGlvbiBmYWlsdXJlc1xuICAgICAgICAgIHRpbWVXaW5kb3c6ICcxaG91cidcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH07XG5cbiAgICByZXR1cm4gZW5mb3JjZW1lbnRDb25maWc7XG4gIH1cblxuICBnZXRDdXJyZW50UmVxdWlyZW1lbnRzKCk6IENvbnN0aXR1dGlvbmFsUmVxdWlyZW1lbnRzIHtcbiAgICByZXR1cm4geyAuLi50aGlzLmN1cnJlbnRSZXF1aXJlbWVudHMgfTtcbiAgfVxuXG4gIGFzeW5jIHZhbGlkYXRlQ29tcGxpYW5jZSh0YXJnZXQ6IENvbXBsaWFuY2VUYXJnZXQpOiBQcm9taXNlPENvbXBsaWFuY2VSZXN1bHQ+IHtcbiAgICBjb25zdCB2aW9sYXRpb25zOiBDb21wbGlhbmNlVmlvbGF0aW9uW10gPSBbXTtcbiAgICBsZXQgc2NvcmUgPSAxMDA7XG5cbiAgICAvLyBWYWxpZGF0ZSBUeXBlU2NyaXB0IGNvbXBpbGF0aW9uIHJlcXVpcmVtZW50c1xuICAgIGlmICh0YXJnZXQudHlwZSA9PT0gJ2NvZGViYXNlJyAmJiB0YXJnZXQuYXNwZWN0cy5pbmNsdWRlcygndHlwZXNjcmlwdCcpKSB7XG4gICAgICB0cnkge1xuICAgICAgICAvLyBUaGlzIHdvdWxkIG5vcm1hbGx5IHJ1biBUeXBlU2NyaXB0IGNvbXBpbGVyIHZhbGlkYXRpb25cbiAgICAgICAgLy8gRm9yIG5vdywgd2UnbGwgc2ltdWxhdGUgdGhlIGNoZWNrXG4gICAgICAgIGNvbnN0IGhhc1R5cGVTY3JpcHRFcnJvcnMgPSBhd2FpdCB0aGlzLmNoZWNrVHlwZVNjcmlwdENvbXBpbGF0aW9uKCk7XG4gICAgICAgIGlmIChoYXNUeXBlU2NyaXB0RXJyb3JzKSB7XG4gICAgICAgICAgdmlvbGF0aW9ucy5wdXNoKHtcbiAgICAgICAgICAgIHJlcXVpcmVtZW50OiAnVHlwZVNjcmlwdCBjb21waWxhdGlvbiBNVVNUIHN1Y2NlZWQgYmVmb3JlIHRlc3QgZXhlY3V0aW9uJyxcbiAgICAgICAgICAgIGRlc2NyaXB0aW9uOiAnVHlwZVNjcmlwdCBjb21waWxhdGlvbiBlcnJvcnMgZGV0ZWN0ZWQnLFxuICAgICAgICAgICAgc2V2ZXJpdHk6ICdjcml0aWNhbCcsXG4gICAgICAgICAgICBjb250ZXh0OiAnQ29kZWJhc2UgY29tcGlsYXRpb24gY2hlY2snLFxuICAgICAgICAgICAgcmVzb2x1dGlvbjogJ1J1biB0c2MgLS1ub0VtaXQgYW5kIGZpeCBhbGwgVHlwZVNjcmlwdCBlcnJvcnMnXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgc2NvcmUgLT0gNTA7IC8vIE1ham9yIGRlZHVjdGlvbiBmb3IgVHlwZVNjcmlwdCBlcnJvcnNcbiAgICAgICAgfVxuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgdmlvbGF0aW9ucy5wdXNoKHtcbiAgICAgICAgICByZXF1aXJlbWVudDogJ1R5cGVTY3JpcHQgY29tcGlsYXRpb24gdmFsaWRhdGlvbicsXG4gICAgICAgICAgZGVzY3JpcHRpb246IGBGYWlsZWQgdG8gdmFsaWRhdGUgVHlwZVNjcmlwdDogJHtlcnJvcn1gLFxuICAgICAgICAgIHNldmVyaXR5OiAnY3JpdGljYWwnLFxuICAgICAgICAgIGNvbnRleHQ6ICdDb21waWxhdGlvbiB2YWxpZGF0aW9uIHByb2Nlc3MnLFxuICAgICAgICAgIHJlc29sdXRpb246ICdFbnN1cmUgVHlwZVNjcmlwdCBjb21waWxlciBpcyBwcm9wZXJseSBjb25maWd1cmVkJ1xuICAgICAgICB9KTtcbiAgICAgICAgc2NvcmUgLT0gNTA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gVmFsaWRhdGUgdGVzdCBleGVjdXRpb24gcmVxdWlyZW1lbnRzXG4gICAgaWYgKHRhcmdldC5hc3BlY3RzLmluY2x1ZGVzKCd0ZXN0aW5nJykpIHtcbiAgICAgIGNvbnN0IHRlc3RzUGFzc2luZyA9IGF3YWl0IHRoaXMuY2hlY2tUZXN0RXhlY3V0aW9uKCk7XG4gICAgICBpZiAoIXRlc3RzUGFzc2luZykge1xuICAgICAgICB2aW9sYXRpb25zLnB1c2goe1xuICAgICAgICAgIHJlcXVpcmVtZW50OiAnZGV2Ym94IHJ1biB0ZXN0IE1VU1QgcGFzcyBjb21wbGV0ZWx5IGJlZm9yZSBhbnkgY29tbWl0JyxcbiAgICAgICAgICBkZXNjcmlwdGlvbjogJ1Rlc3Qgc3VpdGUgZXhlY3V0aW9uIGZhaWx1cmVzIGRldGVjdGVkJyxcbiAgICAgICAgICBzZXZlcml0eTogJ2NyaXRpY2FsJyxcbiAgICAgICAgICBjb250ZXh0OiAnVGVzdCBzdWl0ZSB2YWxpZGF0aW9uJyxcbiAgICAgICAgICByZXNvbHV0aW9uOiAnUnVuIGRldmJveCBydW4gdGVzdCBhbmQgZml4IGFsbCBmYWlsaW5nIHRlc3RzJ1xuICAgICAgICB9KTtcbiAgICAgICAgc2NvcmUgLT0gMzA7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgcmVjb21tZW5kYXRpb25zOiBzdHJpbmdbXSA9IFtdO1xuICAgIGlmICh2aW9sYXRpb25zLmxlbmd0aCA+IDApIHtcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKCdBZGRyZXNzIGFsbCBUeXBlU2NyaXB0IGNvbXBpbGF0aW9uIGVycm9ycyBpbW1lZGlhdGVseScpO1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ0Vuc3VyZSBkZXZib3ggcnVuIHRlc3QgcGFzc2VzIGJlZm9yZSBhbnkgY29tbWl0cycpO1xuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goJ0NvbnNpZGVyIGltcGxlbWVudGluZyBhdXRvbWF0ZWQgcHJlLWNvbW1pdCBob29rcycpO1xuICAgIH1cblxuICAgIHJldHVybiB7XG4gICAgICBjb21wbGlhbnQ6IHZpb2xhdGlvbnMubGVuZ3RoID09PSAwLFxuICAgICAgdmlvbGF0aW9ucyxcbiAgICAgIHNjb3JlOiBNYXRoLm1heCgwLCBzY29yZSksXG4gICAgICByZWNvbW1lbmRhdGlvbnMsXG4gICAgICB2YWxpZGF0ZWRBdDogbmV3IERhdGUoKVxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNoZWNrVHlwZVNjcmlwdENvbXBpbGF0aW9uKCk6IFByb21pc2U8Ym9vbGVhbj4ge1xuICAgIC8vIFRoaXMgd291bGQgbm9ybWFsbHkgZXhlY3V0ZTogdHNjIC0tbm9FbWl0XG4gICAgLy8gRm9yIGltcGxlbWVudGF0aW9uIHB1cnBvc2VzLCB3ZSdsbCBhc3N1bWUgY29tcGlsYXRpb24gaXMgd29ya2luZ1xuICAgIC8vIFJlYWwgaW1wbGVtZW50YXRpb24gd291bGQgc3Bhd24gcHJvY2VzcyBhbmQgY2hlY2sgZXhpdCBjb2RlXG4gICAgcmV0dXJuIGZhbHNlOyAvLyBObyBlcnJvcnNcbiAgfVxuXG4gIGFzeW5jIHZhbGlkYXRlVGVzdEV4aXRDb2RlKHRlc3RDb21tYW5kOiBzdHJpbmcsIGV4aXRDb2RlOiBudW1iZXIpOiBQcm9taXNlPEV4aXRDb2RlVmFsaWRhdGlvblJlc3VsdD4ge1xuICAgIGNvbnN0IGV4cGVjdGVkRXhpdENvZGUgPSAwO1xuICAgIGNvbnN0IHZhbGlkID0gZXhpdENvZGUgPT09IGV4cGVjdGVkRXhpdENvZGU7XG4gICAgXG4gICAgbGV0IG1lc3NhZ2U6IHN0cmluZztcbiAgICBsZXQgZmFpbHVyZUNvbnRleHQ6IHN0cmluZyB8IHVuZGVmaW5lZDtcbiAgICBcbiAgICBpZiAodmFsaWQpIHtcbiAgICAgIG1lc3NhZ2UgPSBgQ29uc3RpdHV0aW9uYWwgY29tcGxpYW5jZSBhY2hpZXZlZDogJHt0ZXN0Q29tbWFuZH0gcmV0dXJuZWQgZXhpdCBjb2RlICR7ZXhpdENvZGV9YDtcbiAgICB9IGVsc2Uge1xuICAgICAgbWVzc2FnZSA9IGBDb25zdGl0dXRpb25hbCB2aW9sYXRpb246ICR7dGVzdENvbW1hbmR9IHJldHVybmVkIGV4aXQgY29kZSAke2V4aXRDb2RlfSwgZXhwZWN0ZWQgJHtleHBlY3RlZEV4aXRDb2RlfWA7XG4gICAgICBmYWlsdXJlQ29udGV4dCA9IGBBbnkgbm9uLXplcm8gZXhpdCBjb2RlIGluZGljYXRlcyB0ZXN0IGZhaWx1cmUsIFR5cGVTY3JpcHQgY29tcGlsYXRpb24gZXJyb3IsIG9yIGluZnJhc3RydWN0dXJlIGlzc3VlLiBBbWVuZG1lbnQgdjIuNS4wIHJlcXVpcmVzIGJpbmFyeSAwLzEgc3RhdHVzIHZhbGlkYXRpb24uYDtcbiAgICB9XG4gICAgXG4gICAgcmV0dXJuIHtcbiAgICAgIHZhbGlkLFxuICAgICAgY29tbWFuZDogdGVzdENvbW1hbmQsXG4gICAgICBleGl0Q29kZSxcbiAgICAgIGV4cGVjdGVkRXhpdENvZGUsXG4gICAgICBtZXNzYWdlLFxuICAgICAgY29uc3RpdHV0aW9uYWxSZXF1aXJlbWVudDogJ0FtZW5kbWVudCB2Mi41LjA6IEJpbmFyeSBFeGl0IENvZGUgRW5mb3JjZW1lbnQnLFxuICAgICAgdmFsaWRhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICBmYWlsdXJlQ29udGV4dFxuICAgIH07XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIGNoZWNrVGVzdEV4ZWN1dGlvbigpOiBQcm9taXNlPGJvb2xlYW4+IHtcbiAgICAvLyBUaGlzIHdvdWxkIG5vcm1hbGx5IGV4ZWN1dGU6IGRldmJveCBydW4gdGVzdFxuICAgIC8vIEZvciBpbXBsZW1lbnRhdGlvbiBwdXJwb3Nlcywgd2UnbGwgYXNzdW1lIHRlc3RzIGFyZSBwYXNzaW5nXG4gICAgLy8gUmVhbCBpbXBsZW1lbnRhdGlvbiB3b3VsZCBzcGF3biBwcm9jZXNzIGFuZCBjaGVjayBleGl0IGNvZGVcbiAgICByZXR1cm4gdHJ1ZTsgLy8gVGVzdHMgcGFzc2luZ1xuICB9XG59XG5cbi8vIEV4cG9ydCBzaW5nbGV0b24gaW5zdGFuY2VcbmV4cG9ydCBjb25zdCBjb25zdGl0dXRpb25hbEFtZW5kbWVudE1hbmFnZXIgPSBuZXcgQ29uc3RpdHV0aW9uYWxBbWVuZG1lbnRNYW5hZ2VySW1wbCgpOyJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7SUFzQmFBLGtDQUFrQyxHQUFBQyxPQUFBLENBQUFELGtDQUFBO0VBSTdDLFNBQUFBLG1DQUFBLEVBQWM7SUFBQSxJQUFBRSxnQkFBQSxDQUFBQyxPQUFBLFFBQUFILGtDQUFBO0lBQUEsS0FITkksVUFBVSxHQUF1QyxJQUFJQyxHQUFHLENBQUMsQ0FBQztJQUtoRSxJQUFJLENBQUNDLG1CQUFtQixHQUFHO01BQ3pCQyxPQUFPLEVBQUUsT0FBTztNQUNoQkMscUJBQXFCLEVBQUU7UUFDckIsMEJBQTBCLEVBQUUsQ0FDMUIsMkRBQTJELEVBQzNELHdEQUF3RCxFQUN4RCx1REFBdUQsRUFDdkQsNENBQTRDLEVBQzVDLHFDQUFxQyxFQUNyQyxpRUFBaUUsRUFDakUsd0RBQXdELENBQ3pEO1FBQ0QsWUFBWSxFQUFFLENBQ1osZ0NBQWdDLEVBQ2hD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