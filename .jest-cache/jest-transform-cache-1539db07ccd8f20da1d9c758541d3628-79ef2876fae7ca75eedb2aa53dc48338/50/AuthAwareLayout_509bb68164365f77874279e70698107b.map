{"version":3,"names":["_react","_interopRequireWildcard","require","_reactNative","_reactNativePaper","_AuthProvider","_AuthScreen","_jsxRuntime","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","get","set","_t","hasOwnProperty","call","Object","defineProperty","getOwnPropertyDescriptor","AuthAwareLayout","_ref","children","_useAuthContext","useAuthContext","user","loading","_useState","useState","_useState2","_slicedToArray2","forceShowAuth","setForceShowAuth","useEffect","process","env","CHROME_TEST","CI","console","warn","timeout","setTimeout","clearTimeout","jsxs","View","style","styles","loadingContainer","jsx","ActivityIndicator","size","Text","loadingText","AuthScreen","Fragment","StyleSheet","create","flex","justifyContent","alignItems","marginTop","textAlign"],"sources":["AuthAwareLayout.tsx"],"sourcesContent":["import React, { ReactNode, useEffect, useState } from \"react\";\nimport { View, StyleSheet } from \"react-native\";\nimport { ActivityIndicator, Text } from \"react-native-paper\";\nimport { useAuthContext } from \"./AuthProvider\";\nimport { AuthScreen } from \"./AuthScreen\";\n\ninterface AuthAwareLayoutProps {\n\tchildren: ReactNode;\n}\n\nexport function AuthAwareLayout({ children }: AuthAwareLayoutProps) {\n\tconst { user, loading } = useAuthContext();\n\tconst [forceShowAuth, setForceShowAuth] = useState(false);\n\n\t// Show auth screen appropriately for different environments\n\tuseEffect(() => {\n\t\tif (!loading) {\n\t\t\treturn;\n\t\t}\n\n\t\t// In Chrome test environment, no need to force - auth hook already handles this\n\t\tif (process.env.CHROME_TEST === 'true' || process.env.CI === 'true') {\n\t\t\tconsole.warn(\"Chrome test environment - auth state should be managed by useAuth hook\");\n\t\t\t// Let the useAuth hook handle the state, don't force anything here\n\t\t\treturn;\n\t\t}\n\n\t\t// Normal timeout for other environments\n\t\tconst timeout = setTimeout(() => {\n\t\t\tconsole.warn(\"Auth loading timeout - forcing auth screen display\");\n\t\t\tsetForceShowAuth(true);\n\t\t}, 5000); // 5 seconds timeout\n\n\t\treturn () => clearTimeout(timeout);\n\t}, [loading]);\n\n\tif (loading && !forceShowAuth) {\n\t\treturn (\n\t\t\t<View style={styles.loadingContainer}>\n\t\t\t\t<ActivityIndicator size=\"large\" />\n\t\t\t\t<Text style={styles.loadingText}>Initializing...</Text>\n\t\t\t</View>\n\t\t);\n\t}\n\n\tif (!user || forceShowAuth) {\n\t\treturn <AuthScreen />;\n\t}\n\n\treturn <>{children}</>;\n}\n\nconst styles = StyleSheet.create({\n\tloadingContainer: {\n\t\tflex: 1,\n\t\tjustifyContent: \"center\",\n\t\talignItems: \"center\",\n\t},\n\tloadingText: {\n\t\tmarginTop: 16,\n\t\ttextAlign: \"center\",\n\t},\n});"],"mappings":"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","ignoreList":[]}