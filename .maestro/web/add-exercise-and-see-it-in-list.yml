url: http://localhost:8081
timeout: 60000 # Set overall flow timeout to 60 seconds
---
- launchApp
- takeScreenshot: "01-app-launched.png"

# Wait for auth screen to appear
- waitForAnimationToEnd:
    timeout: 10000
- waitForAnimationToEnd:
    timeout: 10000

# Handle optional auth step (only if not already authenticated)
- tapOn:
    text: "Continue as Guest"
    optional: true
- takeScreenshot: "02-after-auth-attempt.png"
# Try alternative click methods if the first didn't work
- tapOn:
    id: "continue-as-guest"
    optional: true
- takeScreenshot: "02b-after-second-auth-attempt.png"

# Wait a moment for auth to complete
- waitForAnimationToEnd:
    timeout: 10000
- takeScreenshot: "02c-after-auth-animation.png"
# Handle optional onboarding step (only if not already seen)
- tapOn:
    id: "get-started"
    optional: true
- takeScreenshot: "03-after-onboarding-attempt.png"

# Wait for main app to load
- waitForAnimationToEnd:
    timeout: 10000

# Ensure we're on the exercises screen before trying to add an exercise
- tapOn:
    id: "exercisesTab"
    optional: true
- takeScreenshot: "04-exercises-tab-selected.png"

# Wait for exercises screen to load
- waitForAnimationToEnd:
    timeout: 5000

- tapOn:
    id: "add-exercise"
- takeScreenshot: "05-add-exercise-form-opened.png"
- tapOn:
    id: "name"
- inputText: "ExerciseName"
- takeScreenshot: "06-exercise-name-entered.png"
- tapOn:
    id: "submit"
- takeScreenshot: "07-after-submit.png"
- assertVisible:
    id: "exercise-screen"
- assertVisible:
    id: "ExerciseName"
- takeScreenshot: "08-final-exercise-list.png"
