acde276146341790307a9a636ec7d736
"use strict";

var _interopRequireDefault2 = require("@babel/runtime/helpers/interopRequireDefault");
var _objectWithoutProperties2 = _interopRequireDefault2(require("@babel/runtime/helpers/objectWithoutProperties"));
var _excluded = ["style", "variant", "theme"];
Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = exports.customText = void 0;
var React = _interopRequireWildcard(require("react"));
var _reactNative = require("react-native");
var _AnimatedText = _interopRequireDefault(require("./AnimatedText"));
var _StyledText = _interopRequireDefault(require("./v2/StyledText"));
var _theming = require("../../core/theming");
var _forwardRef = require("../../utils/forwardRef");
function _interopRequireDefault(e) {
  return e && e.__esModule ? e : {
    default: e
  };
}
function _interopRequireWildcard(e, t) {
  if ("function" == typeof WeakMap) var r = new WeakMap(),
    n = new WeakMap();
  return (_interopRequireWildcard = function _interopRequireWildcard(e, t) {
    if (!t && e && e.__esModule) return e;
    var o,
      i,
      f = {
        __proto__: null,
        default: e
      };
    if (null === e || "object" != typeof e && "function" != typeof e) return f;
    if (o = t ? n : r) {
      if (o.has(e)) return o.get(e);
      o.set(e, f);
    }
    for (var _t in e) "default" !== _t && {}.hasOwnProperty.call(e, _t) && ((i = (o = Object.defineProperty) && Object.getOwnPropertyDescriptor(e, _t)) && (i.get || i.set) ? o(f, _t, i) : f[_t] = e[_t]);
    return f;
  })(e, t);
}
function _extends() {
  return _extends = Object.assign ? Object.assign.bind() : function (n) {
    for (var e = 1; e < arguments.length; e++) {
      var t = arguments[e];
      for (var r in t) ({}).hasOwnProperty.call(t, r) && (n[r] = t[r]);
    }
    return n;
  }, _extends.apply(null, arguments);
}
var Text = function Text(_ref, ref) {
  var style = _ref.style,
    variant = _ref.variant,
    initialTheme = _ref.theme,
    rest = (0, _objectWithoutProperties2.default)(_ref, _excluded);
  var root = React.useRef(null);
  var theme = (0, _theming.useInternalTheme)(initialTheme);
  var writingDirection = _reactNative.I18nManager.getConstants().isRTL ? 'rtl' : 'ltr';
  React.useImperativeHandle(ref, function () {
    return {
      setNativeProps: function setNativeProps(args) {
        var _root$current;
        return (_root$current = root.current) === null || _root$current === void 0 ? void 0 : _root$current.setNativeProps(args);
      }
    };
  });
  if (theme.isV3 && variant) {
    var font = theme.fonts[variant];
    var textStyle = [font, style];
    if (React.isValidElement(rest.children) && (rest.children.type === Component || rest.children.type === _AnimatedText.default || rest.children.type === _StyledText.default)) {
      var props = rest.children.props;
      if (props.variant) {
        font = theme.fonts[props.variant];
        textStyle = [style, font];
      }
      if (!props.variant) {
        textStyle = [style, props.style];
      }
    }
    if (typeof font !== 'object') {
      throw new Error(`Variant ${variant} was not provided properly. Valid variants are ${Object.keys(theme.fonts).join(', ')}.`);
    }
    return React.createElement(_reactNative.Text, _extends({
      ref: root,
      style: [styles.text, {
        writingDirection: writingDirection,
        color: theme.colors.onSurface
      }, textStyle]
    }, rest));
  } else {
    var _theme$fonts, _theme$colors;
    var _font = theme.isV3 ? theme.fonts.default : (_theme$fonts = theme.fonts) === null || _theme$fonts === void 0 ? void 0 : _theme$fonts.regular;
    var _textStyle = Object.assign({}, _font, {
      color: theme.isV3 ? (_theme$colors = theme.colors) === null || _theme$colors === void 0 ? void 0 : _theme$colors.onSurface : theme.colors.text
    });
    return React.createElement(_reactNative.Text, _extends({}, rest, {
      ref: root,
      style: [styles.text, _textStyle, {
        writingDirection: writingDirection
      }, style]
    }));
  }
};
var styles = _reactNative.StyleSheet.create({
  text: {
    textAlign: 'left'
  }
});
var Component = (0, _forwardRef.forwardRef)(Text);
var customText = function customText() {
  return Component;
};
exports.customText = customText;
var _default = exports.default = Component;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJSZWFjdCIsIl9pbnRlcm9wUmVxdWlyZVdpbGRjYXJkIiwicmVxdWlyZSIsIl9yZWFjdE5hdGl2ZSIsIl9BbmltYXRlZFRleHQiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwiX1N0eWxlZFRleHQiLCJfdGhlbWluZyIsIl9mb3J3YXJkUmVmIiwiZSIsIl9fZXNNb2R1bGUiLCJkZWZhdWx0IiwidCIsIldlYWtNYXAiLCJyIiwibiIsIm8iLCJpIiwiZiIsIl9fcHJvdG9fXyIsImhhcyIsImdldCIsInNldCIsImhhc093blByb3BlcnR5IiwiY2FsbCIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZ2V0T3duUHJvcGVydHlEZXNjcmlwdG9yIiwiX2V4dGVuZHMiLCJhc3NpZ24iLCJiaW5kIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwiYXBwbHkiLCJUZXh0IiwiX3JlZiIsInJlZiIsInN0eWxlIiwidmFyaWFudCIsImluaXRpYWxUaGVtZSIsInRoZW1lIiwicmVzdCIsIl9vYmplY3RXaXRob3V0UHJvcGVydGllczIiLCJfZXhjbHVkZWQiLCJyb290IiwidXNlUmVmIiwidXNlSW50ZXJuYWxUaGVtZSIsIndyaXRpbmdEaXJlY3Rpb24iLCJJMThuTWFuYWdlciIsImdldENvbnN0YW50cyIsImlzUlRMIiwidXNlSW1wZXJhdGl2ZUhhbmRsZSIsInNldE5hdGl2ZVByb3BzIiwiYXJncyIsIl9yb290JGN1cnJlbnQiLCJjdXJyZW50IiwiaXNWMyIsImZvbnQiLCJmb250cyIsInRleHRTdHlsZSIsImlzVmFsaWRFbGVtZW50IiwiY2hpbGRyZW4iLCJ0eXBlIiwiQ29tcG9uZW50IiwicHJvcHMiLCJFcnJvciIsImtleXMiLCJqb2luIiwiY3JlYXRlRWxlbWVudCIsInN0eWxlcyIsInRleHQiLCJjb2xvciIsImNvbG9ycyIsIm9uU3VyZmFjZSIsIl90aGVtZSRmb250cyIsIl90aGVtZSRjb2xvcnMiLCJyZWd1bGFyIiwiU3R5bGVTaGVldCIsImNyZWF0ZSIsInRleHRBbGlnbiIsImZvcndhcmRSZWYiLCJjdXN0b21UZXh0IiwiZXhwb3J0cyIsIl9kZWZhdWx0Il0sInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vc3JjL2NvbXBvbmVudHMvVHlwb2dyYXBoeS9UZXh0LnRzeCJdLCJzb3VyY2VzQ29udGVudCI6W251bGxdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUEsSUFBQUEsS0FBQSxHQUFBQyx1QkFBQSxDQUFBQyxPQUFBO0FBQ0EsSUFBQUMsWUFBQSxHQUFBRCxPQUFBO0FBUUEsSUFBQUUsYUFBQSxHQUFBQyxzQkFBQSxDQUFBSCxPQUFBO0FBRUEsSUFBQUksV0FBQSxHQUFBRCxzQkFBQSxDQUFBSCxPQUFBO0FBQ0EsSUFBQUssUUFBQSxHQUFBTCxPQUFBO0FBRUEsSUFBQU0sV0FBQSxHQUFBTixPQUFBO0FBQW9ELFNBQUFHLHVCQUFBSSxDQUFBO0VBQUEsT0FBQUEsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsR0FBQUQsQ0FBQTtJQUFBRSxPQUFBLEVBQUFGO0VBQUE7QUFBQTtBQUFBLFNBQUFSLHdCQUFBUSxDQUFBLEVBQUFHLENBQUE7RUFBQSx5QkFBQUMsT0FBQSxNQUFBQyxDQUFBLE9BQUFELE9BQUE7SUFBQUUsQ0FBQSxPQUFBRixPQUFBO0VBQUEsUUFBQVosdUJBQUEsWUFBQUEsd0JBQUFRLENBQUEsRUFBQUcsQ0FBQTtJQUFBLEtBQUFBLENBQUEsSUFBQUgsQ0FBQSxJQUFBQSxDQUFBLENBQUFDLFVBQUEsU0FBQUQsQ0FBQTtJQUFBLElBQUFPLENBQUE7TUFBQUMsQ0FBQTtNQUFBQyxDQUFBO1FBQUFDLFNBQUE7UUFBQVIsT0FBQSxFQUFBRjtNQUFBO0lBQUEsYUFBQUEsQ0FBQSx1QkFBQUEsQ0FBQSx5QkFBQUEsQ0FBQSxTQUFBUyxDQUFBO0lBQUEsSUFBQUYsQ0FBQSxHQUFBSixDQUFBLEdBQUFHLENBQUEsR0FBQUQsQ0FBQTtNQUFBLElBQUFFLENBQUEsQ0FBQUksR0FBQSxDQUFBWCxDQUFBLFVBQUFPLENBQUEsQ0FBQUssR0FBQSxDQUFBWixDQUFBO01B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