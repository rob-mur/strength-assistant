8b13d771ad85be8e33bce4212278ee9a
_getJestObj().mock("@expo-google-fonts/jetbrains-mono", function () {
  return {
    JetBrainsMono_400Regular: "JetBrainsMono_400Regular"
  };
});
_getJestObj().mock("@expo-google-fonts/noto-sans", function () {
  return {
    NotoSans_400Regular: "NotoSans_400Regular"
  };
});
_getJestObj().mock("@expo/vector-icons", function () {
  return {
    MaterialCommunityIcons: {
      font: {
        "MaterialCommunityIcons": "MockedFont"
      }
    }
  };
});
_getJestObj().mock("expo-font", function () {
  return {
    useFonts: jest.fn()
  };
});
_getJestObj().mock("expo-router", function () {
  return {
    SplashScreen: {
      hideAsync: jest.fn()
    }
  };
});
_getJestObj().mock("@/lib/data/firebase", function () {
  return {
    initFirebase: jest.fn()
  };
});
_getJestObj().mock("@/lib/data/firebase/logger", function () {
  return {
    logger: {
      debug: jest.fn(),
      info: jest.fn(),
      warn: jest.fn(),
      error: jest.fn()
    }
  };
});
_getJestObj().mock("@/lib/data/supabase", function () {
  return {
    initSupabase: jest.fn()
  };
});
_getJestObj().mock("@/lib/data/sync", function () {
  return {
    initializeDataLayer: jest.fn()
  };
});
var _interopRequireDefault = require("@babel/runtime/helpers/interopRequireDefault");
var _asyncToGenerator2 = _interopRequireDefault(require("@babel/runtime/helpers/asyncToGenerator"));
var _useAppInit = require("@/lib/hooks/useAppInit");
var _reactNative = require("@testing-library/react-native");
var _expoFont = require("expo-font");
var _expoRouter = require("expo-router");
var _firebase = require("@/lib/data/firebase");
var _logger = require("@/lib/data/firebase/logger");
var _supabase = require("@/lib/data/supabase");
var _sync = require("@/lib/data/sync");
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
describe("useAppInit", function () {
  var mockUseFonts = _expoFont.useFonts;
  var mockInitFirebase = _firebase.initFirebase;
  var mockInitSupabase = _supabase.initSupabase;
  var mockInitializeDataLayer = _sync.initializeDataLayer;
  var mockHideAsync = _expoRouter.SplashScreen.hideAsync;
  beforeEach(function () {
    jest.clearAllMocks();
  });
  test("returns false when fonts are not loaded", function () {
    mockUseFonts.mockReturnValue([false, null]);
    var _renderHook = (0, _reactNative.renderHook)(function () {
        return (0, _useAppInit.useAppInit)();
      }),
      result = _renderHook.result;
    expect(result.current).toBe(false);
  });
  test("throws error when font loading fails", function () {
    var fontError = new Error("Font loading failed");
    mockUseFonts.mockReturnValue([false, fontError]);
    expect(function () {
      return (0, _reactNative.renderHook)(function () {
        return (0, _useAppInit.useAppInit)();
      });
    }).toThrow("Font loading failed");
    expect(_logger.logger.error).toHaveBeenCalledWith("Font loading error", expect.objectContaining({
      service: "App Init",
      platform: "React Native",
      operation: "font_loading"
    }));
  });
  test("initializes services and hides splash screen when ready", (0, _asyncToGenerator2.default)(function* () {
    mockUseFonts.mockReturnValue([true, null]);
    mockInitializeDataLayer.mockResolvedValue(undefined);
    var _renderHook2 = (0, _reactNative.renderHook)(function () {
        return (0, _useAppInit.useAppInit)();
      }),
      result = _renderHook2.result;
    yield (0, _reactNative.waitFor)(function () {
      expect(result.current).toBe(true);
    });
    expect(mockInitializeDataLayer).toHaveBeenCalled();
    expect(mockHideAsync).toHaveBeenCalled();
    expect(_logger.logger.info).toHaveBeenCalledWith("Starting app initialization", expect.any(Object));
    expect(_logger.logger.info).toHaveBeenCalledWith("App initialization complete", expect.any(Object));
  }));
  test("handles data layer error gracefully", (0, _asyncToGenerator2.default)(function* () {
    mockUseFonts.mockReturnValue([true, null]);
    mockInitializeDataLayer.mockRejectedValue(new Error("Data layer failed"));
    var originalWindow = global.window;
    delete global.window;
    var _renderHook3 = (0, _reactNative.renderHook)(function () {
        return (0, _useAppInit.useAppInit)();
      }),
      result = _renderHook3.result;
    yield (0, _reactNative.waitFor)(function () {
      expect(result.current).toBe(true);
    });
    expect(_logger.logger.error).toHaveBeenCalledWith("App initialization error", expect.objectContaining({
      operation: "init"
    }));
    expect(_logger.logger.warn).toHaveBeenCalledWith("App will continue with limited functionality", expect.any(Object));
    global.window = originalWindow;
  }));
  test("logs initialization steps correctly", (0, _asyncToGenerator2.default)(function* () {
    mockUseFonts.mockReturnValue([true, null]);
    mockInitializeDataLayer.mockResolvedValue(undefined);
    var _renderHook4 = (0, _reactNative.renderHook)(function () {
        return (0, _useAppInit.useAppInit)();
      }),
      result = _renderHook4.result;
    yield (0, _reactNative.waitFor)(function () {
      expect(result.current).toBe(true);
    });
    expect(_logger.logger.info).toHaveBeenCalledWith("Initializing offline-first data layer...", expect.objectContaining({
      operation: "data_layer_init"
    }));
    expect(_logger.logger.info).toHaveBeenCalledWith("Offline-first data layer initialized successfully", expect.objectContaining({
      operation: "data_layer_init"
    }));
  }));
  test("logs debug messages during data layer initialization", (0, _asyncToGenerator2.default)(function* () {
    mockUseFonts.mockReturnValue([true, null]);
    mockInitializeDataLayer.mockResolvedValue(undefined);
    (0, _reactNative.renderHook)(function () {
      return (0, _useAppInit.useAppInit)();
    });
    yield (0, _reactNative.waitFor)(function () {
      expect(_logger.logger.info).toHaveBeenCalledWith("Initializing offline-first data layer...", expect.objectContaining({
        service: "App Init",
        platform: "React Native",
        operation: "data_layer_init"
      }));
    });
    yield (0, _reactNative.waitFor)(function () {
      expect(_logger.logger.info).toHaveBeenCalledWith("Offline-first data layer initialized successfully", expect.objectContaining({
        service: "App Init",
        platform: "React Native",
        operation: "data_layer_init"
      }));
    });
  }));
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJKZXRCcmFpbnNNb25vXzQwMFJlZ3VsYXIiLCJOb3RvU2Fuc180MDBSZWd1bGFyIiwiTWF0ZXJpYWxDb21tdW5pdHlJY29ucyIsImZvbnQiLCJ1c2VGb250cyIsImplc3QiLCJmbiIsIlNwbGFzaFNjcmVlbiIsImhpZGVBc3luYyIsImluaXRGaXJlYmFzZSIsImxvZ2dlciIsImRlYnVnIiwiaW5mbyIsIndhcm4iLCJlcnJvciIsImluaXRTdXBhYmFzZSIsImluaXRpYWxpemVEYXRhTGF5ZXIiLCJfaW50ZXJvcFJlcXVpcmVEZWZhdWx0IiwicmVxdWlyZSIsIl9hc3luY1RvR2VuZXJhdG9yMiIsIl91c2VBcHBJbml0IiwiX3JlYWN0TmF0aXZlIiwiX2V4cG9Gb250IiwiX2V4cG9Sb3V0ZXIiLCJfZmlyZWJhc2UiLCJfbG9nZ2VyIiwiX3N1cGFiYXNlIiwiX3N5bmMiLCJfcmVxdWlyZSIsImRlc2NyaWJlIiwibW9ja1VzZUZvbnRzIiwibW9ja0luaXRGaXJlYmFzZSIsIm1vY2tJbml0U3VwYWJhc2UiLCJtb2NrSW5pdGlhbGl6ZURhdGFMYXllciIsIm1vY2tIaWRlQXN5bmMiLCJiZWZvcmVFYWNoIiwiY2xlYXJBbGxNb2NrcyIsInRlc3QiLCJtb2NrUmV0dXJuVmFsdWUiLCJfcmVuZGVySG9vayIsInJlbmRlckhvb2siLCJ1c2VBcHBJbml0IiwicmVzdWx0IiwiZXhwZWN0IiwiY3VycmVudCIsInRvQmUiLCJmb250RXJyb3IiLCJFcnJvciIsInRvVGhyb3ciLCJ0b0hhdmVCZWVuQ2FsbGVkV2l0aCIsIm9iamVjdENvbnRhaW5pbmciLCJzZXJ2aWNlIiwicGxhdGZvcm0iLCJvcGVyYXRpb24iLCJkZWZhdWx0IiwibW9ja1Jlc29sdmVkVmFsdWUiLCJ1bmRlZmluZWQiLCJfcmVuZGVySG9vazIiLCJ3YWl0Rm9yIiwidG9IYXZlQmVlbkNhbGxlZCIsImFueSIsIk9iamVjdCIsIm1vY2tSZWplY3RlZFZhbHVlIiwib3JpZ2luYWxXaW5kb3ciLCJnbG9iYWwiLCJ3aW5kb3ciLCJfcmVuZGVySG9vazMiLCJfcmVuZGVySG9vazQiXSwic291cmNlcyI6WyJ1c2VBcHBJbml0LXRlc3QudHN4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHVzZUFwcEluaXQgfSBmcm9tIFwiQC9saWIvaG9va3MvdXNlQXBwSW5pdFwiO1xuaW1wb3J0IHsgcmVuZGVySG9vaywgd2FpdEZvciB9IGZyb20gXCJAdGVzdGluZy1saWJyYXJ5L3JlYWN0LW5hdGl2ZVwiO1xuXG4vLyBNb2NrIGV4dGVybmFsIGRlcGVuZGVuY2llc1xuamVzdC5tb2NrKFwiQGV4cG8tZ29vZ2xlLWZvbnRzL2pldGJyYWlucy1tb25vXCIsICgpID0+ICh7XG4gIEpldEJyYWluc01vbm9fNDAwUmVndWxhcjogXCJKZXRCcmFpbnNNb25vXzQwMFJlZ3VsYXJcIixcbn0pKTtcblxuamVzdC5tb2NrKFwiQGV4cG8tZ29vZ2xlLWZvbnRzL25vdG8tc2Fuc1wiLCAoKSA9PiAoe1xuICBOb3RvU2Fuc180MDBSZWd1bGFyOiBcIk5vdG9TYW5zXzQwMFJlZ3VsYXJcIixcbn0pKTtcblxuamVzdC5tb2NrKFwiQGV4cG8vdmVjdG9yLWljb25zXCIsICgpID0+ICh7XG4gIE1hdGVyaWFsQ29tbXVuaXR5SWNvbnM6IHtcbiAgICBmb250OiB7IFwiTWF0ZXJpYWxDb21tdW5pdHlJY29uc1wiOiBcIk1vY2tlZEZvbnRcIiB9LFxuICB9LFxufSkpO1xuXG4vLyBNb2NrIHRoZSBhY3R1YWwgbW9kdWxlcyB0aGVzZSBkZXBlbmQgb25cbmplc3QubW9jayhcImV4cG8tZm9udFwiLCAoKSA9PiAoe1xuICB1c2VGb250czogamVzdC5mbigpLFxufSkpO1xuXG5qZXN0Lm1vY2soXCJleHBvLXJvdXRlclwiLCAoKSA9PiAoe1xuICBTcGxhc2hTY3JlZW46IHtcbiAgICBoaWRlQXN5bmM6IGplc3QuZm4oKSxcbiAgfSxcbn0pKTtcblxuamVzdC5tb2NrKFwiQC9saWIvZGF0YS9maXJlYmFzZVwiLCAoKSA9PiAoe1xuICBpbml0RmlyZWJhc2U6IGplc3QuZm4oKSxcbn0pKTtcblxuamVzdC5tb2NrKFwiQC9saWIvZGF0YS9maXJlYmFzZS9sb2dnZXJcIiwgKCkgPT4gKHtcbiAgbG9nZ2VyOiB7XG4gICAgZGVidWc6IGplc3QuZm4oKSxcbiAgICBpbmZvOiBqZXN0LmZuKCksXG4gICAgd2FybjogamVzdC5mbigpLFxuICAgIGVycm9yOiBqZXN0LmZuKCksXG4gIH0sXG59KSk7XG5cbmplc3QubW9jayhcIkAvbGliL2RhdGEvc3VwYWJhc2VcIiwgKCkgPT4gKHtcbiAgaW5pdFN1cGFiYXNlOiBqZXN0LmZuKCksXG59KSk7XG5cbmplc3QubW9jayhcIkAvbGliL2RhdGEvc3luY1wiLCAoKSA9PiAoe1xuICBpbml0aWFsaXplRGF0YUxheWVyOiBqZXN0LmZuKCksXG59KSk7XG5cbmltcG9ydCB7IHVzZUZvbnRzIH0gZnJvbSBcImV4cG8tZm9udFwiO1xuaW1wb3J0IHsgU3BsYXNoU2NyZWVuIH0gZnJvbSBcImV4cG8tcm91dGVyXCI7XG5pbXBvcnQgeyBpbml0RmlyZWJhc2UgfSBmcm9tIFwiQC9saWIvZGF0YS9maXJlYmFzZVwiO1xuaW1wb3J0IHsgbG9nZ2VyIH0gZnJvbSBcIkAvbGliL2RhdGEvZmlyZWJhc2UvbG9nZ2VyXCI7XG5pbXBvcnQgeyBpbml0U3VwYWJhc2UgfSBmcm9tIFwiQC9saWIvZGF0YS9zdXBhYmFzZVwiO1xuaW1wb3J0IHsgaW5pdGlhbGl6ZURhdGFMYXllciB9IGZyb20gXCJAL2xpYi9kYXRhL3N5bmNcIjtcblxuZGVzY3JpYmUoXCJ1c2VBcHBJbml0XCIsICgpID0+IHtcbiAgY29uc3QgbW9ja1VzZUZvbnRzID0gdXNlRm9udHMgYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjx0eXBlb2YgdXNlRm9udHM+O1xuICBjb25zdCBtb2NrSW5pdEZpcmViYXNlID0gaW5pdEZpcmViYXNlIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIGluaXRGaXJlYmFzZT47XG4gIGNvbnN0IG1vY2tJbml0U3VwYWJhc2UgPSBpbml0U3VwYWJhc2UgYXMgamVzdC5Nb2NrZWRGdW5jdGlvbjx0eXBlb2YgaW5pdFN1cGFiYXNlPjtcbiAgY29uc3QgbW9ja0luaXRpYWxpemVEYXRhTGF5ZXIgPSBpbml0aWFsaXplRGF0YUxheWVyIGFzIGplc3QuTW9ja2VkRnVuY3Rpb248dHlwZW9mIGluaXRpYWxpemVEYXRhTGF5ZXI+O1xuICBjb25zdCBtb2NrSGlkZUFzeW5jID0gU3BsYXNoU2NyZWVuLmhpZGVBc3luYyBhcyBqZXN0Lk1vY2tlZEZ1bmN0aW9uPHR5cGVvZiBTcGxhc2hTY3JlZW4uaGlkZUFzeW5jPjtcblxuICBiZWZvcmVFYWNoKCgpID0+IHtcbiAgICBqZXN0LmNsZWFyQWxsTW9ja3MoKTtcbiAgfSk7XG5cbiAgdGVzdChcInJldHVybnMgZmFsc2Ugd2hlbiBmb250cyBhcmUgbm90IGxvYWRlZFwiLCAoKSA9PiB7XG4gICAgbW9ja1VzZUZvbnRzLm1vY2tSZXR1cm5WYWx1ZShbZmFsc2UsIG51bGxdKTtcbiAgICBcbiAgICBjb25zdCB7IHJlc3VsdCB9ID0gcmVuZGVySG9vaygoKSA9PiB1c2VBcHBJbml0KCkpO1xuICAgIFxuICAgIGV4cGVjdChyZXN1bHQuY3VycmVudCkudG9CZShmYWxzZSk7XG4gIH0pO1xuXG4gIHRlc3QoXCJ0aHJvd3MgZXJyb3Igd2hlbiBmb250IGxvYWRpbmcgZmFpbHNcIiwgKCkgPT4ge1xuICAgIGNvbnN0IGZvbnRFcnJvciA9IG5ldyBFcnJvcihcIkZvbnQgbG9hZGluZyBmYWlsZWRcIik7XG4gICAgbW9ja1VzZUZvbnRzLm1vY2tSZXR1cm5WYWx1ZShbZmFsc2UsIGZvbnRFcnJvcl0pO1xuICAgIFxuICAgIGV4cGVjdCgoKSA9PiByZW5kZXJIb29rKCgpID0+IHVzZUFwcEluaXQoKSkpLnRvVGhyb3coXCJGb250IGxvYWRpbmcgZmFpbGVkXCIpO1xuICAgIGV4cGVjdChsb2dnZXIuZXJyb3IpLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFwiRm9udCBsb2FkaW5nIGVycm9yXCIsIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgIHNlcnZpY2U6IFwiQXBwIEluaXRcIixcbiAgICAgIHBsYXRmb3JtOiBcIlJlYWN0IE5hdGl2ZVwiLFxuICAgICAgb3BlcmF0aW9uOiBcImZvbnRfbG9hZGluZ1wiXG4gICAgfSkpO1xuICB9KTtcblxuICB0ZXN0KFwiaW5pdGlhbGl6ZXMgc2VydmljZXMgYW5kIGhpZGVzIHNwbGFzaCBzY3JlZW4gd2hlbiByZWFkeVwiLCBhc3luYyAoKSA9PiB7XG4gICAgbW9ja1VzZUZvbnRzLm1vY2tSZXR1cm5WYWx1ZShbdHJ1ZSwgbnVsbF0pO1xuICAgIG1vY2tJbml0aWFsaXplRGF0YUxheWVyLm1vY2tSZXNvbHZlZFZhbHVlKHVuZGVmaW5lZCk7XG4gICAgXG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlQXBwSW5pdCgpKTtcbiAgICBcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudCkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgICBcbiAgICBleHBlY3QobW9ja0luaXRpYWxpemVEYXRhTGF5ZXIpLnRvSGF2ZUJlZW5DYWxsZWQoKTtcbiAgICBleHBlY3QobW9ja0hpZGVBc3luYykudG9IYXZlQmVlbkNhbGxlZCgpO1xuICAgIGV4cGVjdChsb2dnZXIuaW5mbykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXCJTdGFydGluZyBhcHAgaW5pdGlhbGl6YXRpb25cIiwgZXhwZWN0LmFueShPYmplY3QpKTtcbiAgICBleHBlY3QobG9nZ2VyLmluZm8pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFwiQXBwIGluaXRpYWxpemF0aW9uIGNvbXBsZXRlXCIsIGV4cGVjdC5hbnkoT2JqZWN0KSk7XG4gIH0pO1xuXG4gIHRlc3QoXCJoYW5kbGVzIGRhdGEgbGF5ZXIgZXJyb3IgZ3JhY2VmdWxseVwiLCBhc3luYyAoKSA9PiB7XG4gICAgbW9ja1VzZUZvbnRzLm1vY2tSZXR1cm5WYWx1ZShbdHJ1ZSwgbnVsbF0pO1xuICAgIG1vY2tJbml0aWFsaXplRGF0YUxheWVyLm1vY2tSZWplY3RlZFZhbHVlKG5ldyBFcnJvcihcIkRhdGEgbGF5ZXIgZmFpbGVkXCIpKTtcbiAgICBcbiAgICAvLyBNb2NrIHdpbmRvdyB0byBiZSB1bmRlZmluZWQgdG8gdGVzdCBuYXRpdmUgcGF0aFxuICAgIGNvbnN0IG9yaWdpbmFsV2luZG93ID0gZ2xvYmFsLndpbmRvdztcbiAgICAvLyBAdHMtaWdub3JlXG4gICAgZGVsZXRlIGdsb2JhbC53aW5kb3c7XG4gICAgXG4gICAgY29uc3QgeyByZXN1bHQgfSA9IHJlbmRlckhvb2soKCkgPT4gdXNlQXBwSW5pdCgpKTtcbiAgICBcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChyZXN1bHQuY3VycmVudCkudG9CZSh0cnVlKTtcbiAgICB9KTtcbiAgICBcbiAgICBleHBlY3QobG9nZ2VyLmVycm9yKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcIkFwcCBpbml0aWFsaXphdGlvbiBlcnJvclwiLCBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICBvcGVyYXRpb246IFwiaW5pdFwiXG4gICAgfSkpO1xuICAgIGV4cGVjdChsb2dnZXIud2FybikudG9IYXZlQmVlbkNhbGxlZFdpdGgoXCJBcHAgd2lsbCBjb250aW51ZSB3aXRoIGxpbWl0ZWQgZnVuY3Rpb25hbGl0eVwiLCBleHBlY3QuYW55KE9iamVjdCkpO1xuICAgIFxuICAgIC8vIFJlc3RvcmUgd2luZG93XG4gICAgZ2xvYmFsLndpbmRvdyA9IG9yaWdpbmFsV2luZG93O1xuICB9KTtcblxuICB0ZXN0KFwibG9ncyBpbml0aWFsaXphdGlvbiBzdGVwcyBjb3JyZWN0bHlcIiwgYXN5bmMgKCkgPT4ge1xuICAgIG1vY2tVc2VGb250cy5tb2NrUmV0dXJuVmFsdWUoW3RydWUsIG51bGxdKTtcbiAgICBtb2NrSW5pdGlhbGl6ZURhdGFMYXllci5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuICAgIFxuICAgIGNvbnN0IHsgcmVzdWx0IH0gPSByZW5kZXJIb29rKCgpID0+IHVzZUFwcEluaXQoKSk7XG4gICAgXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3QocmVzdWx0LmN1cnJlbnQpLnRvQmUodHJ1ZSk7XG4gICAgfSk7XG4gICAgXG4gICAgZXhwZWN0KGxvZ2dlci5pbmZvKS50b0hhdmVCZWVuQ2FsbGVkV2l0aChcIkluaXRpYWxpemluZyBvZmZsaW5lLWZpcnN0IGRhdGEgbGF5ZXIuLi5cIiwgZXhwZWN0Lm9iamVjdENvbnRhaW5pbmcoe1xuICAgICAgb3BlcmF0aW9uOiBcImRhdGFfbGF5ZXJfaW5pdFwiXG4gICAgfSkpO1xuICAgIGV4cGVjdChsb2dnZXIuaW5mbykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXCJPZmZsaW5lLWZpcnN0IGRhdGEgbGF5ZXIgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5XCIsIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgIG9wZXJhdGlvbjogXCJkYXRhX2xheWVyX2luaXRcIlxuICAgIH0pKTtcbiAgfSk7XG5cbiAgdGVzdChcImxvZ3MgZGVidWcgbWVzc2FnZXMgZHVyaW5nIGRhdGEgbGF5ZXIgaW5pdGlhbGl6YXRpb25cIiwgYXN5bmMgKCkgPT4ge1xuICAgIG1vY2tVc2VGb250cy5tb2NrUmV0dXJuVmFsdWUoW3RydWUsIG51bGxdKTtcbiAgICBtb2NrSW5pdGlhbGl6ZURhdGFMYXllci5tb2NrUmVzb2x2ZWRWYWx1ZSh1bmRlZmluZWQpO1xuICAgIFxuICAgIHJlbmRlckhvb2soKCkgPT4gdXNlQXBwSW5pdCgpKTtcbiAgICBcbiAgICBhd2FpdCB3YWl0Rm9yKCgpID0+IHtcbiAgICAgIGV4cGVjdChsb2dnZXIuaW5mbykudG9IYXZlQmVlbkNhbGxlZFdpdGgoXCJJbml0aWFsaXppbmcgb2ZmbGluZS1maXJzdCBkYXRhIGxheWVyLi4uXCIsIGV4cGVjdC5vYmplY3RDb250YWluaW5nKHtcbiAgICAgICAgc2VydmljZTogXCJBcHAgSW5pdFwiLFxuICAgICAgICBwbGF0Zm9ybTogXCJSZWFjdCBOYXRpdmVcIixcbiAgICAgICAgb3BlcmF0aW9uOiBcImRhdGFfbGF5ZXJfaW5pdFwiXG4gICAgICB9KSk7XG4gICAgfSk7XG4gICAgXG4gICAgYXdhaXQgd2FpdEZvcigoKSA9PiB7XG4gICAgICBleHBlY3QobG9nZ2VyLmluZm8pLnRvSGF2ZUJlZW5DYWxsZWRXaXRoKFwiT2ZmbGluZS1maXJzdCBkYXRhIGxheWVyIGluaXRpYWxpemVkIHN1Y2Nlc3NmdWxseVwiLCBleHBlY3Qub2JqZWN0Q29udGFpbmluZyh7XG4gICAgICAgIHNlcnZpY2U6IFwiQXBwIEluaXRcIiwgXG4gICAgICAgIHBsYXRmb3JtOiBcIlJlYWN0IE5hdGl2ZVwiLFxuICAgICAgICBvcGVyYXRpb246IFwiZGF0YV9sYXllcl9pbml0XCJcbiAgICAgIH0pKTtcbiAgICB9KTtcbiAgfSk7XG59KTsiXSwibWFwcGluZ3MiOiJBQUlBQSxXQUFBLEdBQUtDLElBQUksQ0FBQyxtQ0FBbUMsRUFBRTtFQUFBLE9BQU87SUFDcERDLHdCQUF3QixFQUFFO0VBQzVCLENBQUM7QUFBQSxDQUFDLENBQUM7QUFFSEYsV0FBQSxHQUFLQyxJQUFJLENBQUMsOEJBQThCLEVBQUU7RUFBQSxPQUFPO0lBQy9DRSxtQkFBbUIsRUFBRTtFQUN2QixDQUFDO0FBQUEsQ0FBQyxDQUFDO0FBRUhILFdBQUEsR0FBS0MsSUFBSSxDQUFDLG9CQUFvQixFQUFFO0VBQUEsT0FBTztJQUNyQ0csc0JBQXNCLEVBQUU7TUFDdEJDLElBQUksRUFBRTtRQUFFLHdCQUF3QixFQUFFO01BQWE7SUFDakQ7RUFDRixDQUFDO0FBQUEsQ0FBQyxDQUFDO0FBR0hMLFdBQUEsR0FBS0MsSUFBSSxDQUFDLFdBQVcsRUFBRTtFQUFBLE9BQU87SUFDNUJLLFFBQVEsRUFBRUMsSUFBSSxDQUFDQyxFQUFFLENBQUM7RUFDcEIsQ0FBQztBQUFBLENBQUMsQ0FBQztBQUVIUixXQUFBLEdBQUtDLElBQUksQ0FB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