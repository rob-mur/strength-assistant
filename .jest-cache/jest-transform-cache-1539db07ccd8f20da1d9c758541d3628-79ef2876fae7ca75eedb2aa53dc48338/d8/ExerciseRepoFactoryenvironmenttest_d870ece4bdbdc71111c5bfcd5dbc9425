4b8716c67e9e4e1a8ddae22af0bec406
_getJestObj().mock('@/lib/repo/FirebaseExerciseRepo', function () {
  return {
    FirebaseExerciseRepo: {
      getInstance: jest.fn().mockReturnValue({
        type: 'firebase'
      })
    }
  };
});
_getJestObj().mock('@/lib/repo/SupabaseExerciseRepo', function () {
  return {
    SupabaseExerciseRepo: {
      getInstance: jest.fn().mockReturnValue({
        type: 'supabase'
      })
    }
  };
});
_getJestObj().mock('expo-constants', function () {
  return {
    default: {
      expoConfig: {
        extra: {}
      }
    }
  };
});
var _ExerciseRepoFactory = require("@/lib/repo/ExerciseRepoFactory");
function _getJestObj() {
  var _require = require("@jest/globals"),
    jest = _require.jest;
  _getJestObj = function _getJestObj() {
    return jest;
  };
  return jest;
}
describe('ExerciseRepoFactory - Environment Variable Handling', function () {
  var originalEnv = process.env;
  beforeEach(function () {
    process.env = Object.assign({}, originalEnv);
    _ExerciseRepoFactory.ExerciseRepoFactory.resetInstances();
    jest.clearAllMocks();
  });
  afterEach(function () {
    process.env = originalEnv;
  });
  describe('Dynamic environment variable changes', function () {
    test('switches from Firebase to Supabase when env var changes', function () {
      process.env.USE_SUPABASE_DATA = 'false';
      var firebaseInstance = _ExerciseRepoFactory.ExerciseRepoFactory.getInstance();
      expect(firebaseInstance.type).toBe('firebase');
      _ExerciseRepoFactory.ExerciseRepoFactory.resetInstances();
      process.env.USE_SUPABASE_DATA = 'true';
      var supabaseInstance = _ExerciseRepoFactory.ExerciseRepoFactory.getInstance();
      expect(supabaseInstance.type).toBe('supabase');
    });
    test('switches from Supabase to Firebase when env var changes', function () {
      process.env.USE_SUPABASE_DATA = 'true';
      var supabaseInstance = _ExerciseRepoFactory.ExerciseRepoFactory.getInstance();
      expect(supabaseInstance.type).toBe('supabase');
      _ExerciseRepoFactory.ExerciseRepoFactory.resetInstances();
      process.env.USE_SUPABASE_DATA = 'false';
      var firebaseInstance = _ExerciseRepoFactory.ExerciseRepoFactory.getInstance();
      expect(firebaseInstance.type).toBe('firebase');
    });
    test('handles undefined to true transition', function () {
      delete process.env.USE_SUPABASE_DATA;
      var firebaseInstance = _ExerciseRepoFactory.ExerciseRepoFactory.getInstance();
      expect(firebaseInstance.type).toBe('firebase');
      _ExerciseRepoFactory.ExerciseRepoFactory.resetInstances();
      process.env.USE_SUPABASE_DATA = 'true';
      var supabaseInstance = _ExerciseRepoFactory.ExerciseRepoFactory.getInstance();
      expect(supabaseInstance.type).toBe('supabase');
    });
    test('handles true to undefined transition', function () {
      process.env.USE_SUPABASE_DATA = 'true';
      var supabaseInstance = _ExerciseRepoFactory.ExerciseRepoFactory.getInstance();
      expect(supabaseInstance.type).toBe('supabase');
      _ExerciseRepoFactory.ExerciseRepoFactory.resetInstances();
      delete process.env.USE_SUPABASE_DATA;
      var firebaseInstance = _ExerciseRepoFactory.ExerciseRepoFactory.getInstance();
      expect(firebaseInstance.type).toBe('firebase');
    });
  });
  describe('getCurrentDataSource with environment changes', function () {
    test('reflects environment variable changes', function () {
      process.env.USE_SUPABASE_DATA = 'false';
      expect(_ExerciseRepoFactory.ExerciseRepoFactory.getCurrentDataSource()).toBe('firebase');
      process.env.USE_SUPABASE_DATA = 'true';
      expect(_ExerciseRepoFactory.ExerciseRepoFactory.getCurrentDataSource()).toBe('supabase');
      process.env.USE_SUPABASE_DATA = 'false';
      expect(_ExerciseRepoFactory.ExerciseRepoFactory.getCurrentDataSource()).toBe('firebase');
      delete process.env.USE_SUPABASE_DATA;
      expect(_ExerciseRepoFactory.ExerciseRepoFactory.getCurrentDataSource()).toBe('firebase');
    });
  });
  describe('Edge cases and error conditions', function () {
    test('handles malformed environment variable values', function () {
      var testCases = ['TRUE', 'True', 'false', 'FALSE', 'yes', 'no', '1', '0', ''];
      testCases.forEach(function (value) {
        _ExerciseRepoFactory.ExerciseRepoFactory.resetInstances();
        process.env.USE_SUPABASE_DATA = value;
        var expectedResult = value.toLowerCase() === 'true' ? 'supabase' : 'firebase';
        expect(_ExerciseRepoFactory.ExerciseRepoFactory.getCurrentDataSource()).toBe(expectedResult);
      });
    });
    test('prefers process.env over Expo Constants when both are set', function () {
      var Constants = require('expo-constants').default;
      Constants.expoConfig.extra.useSupabaseData = true;
      process.env.USE_SUPABASE_DATA = 'false';
      expect(_ExerciseRepoFactory.ExerciseRepoFactory.getCurrentDataSource()).toBe('firebase');
    });
    test('falls back to Expo Constants when process.env is undefined', function () {
      delete process.env.USE_SUPABASE_DATA;
      var Constants = require('expo-constants').default;
      Constants.expoConfig.extra.useSupabaseData = true;
      expect(_ExerciseRepoFactory.ExerciseRepoFactory.getCurrentDataSource()).toBe('supabase');
    });
    test('handles missing Expo Constants gracefully', function () {
      delete process.env.USE_SUPABASE_DATA;
      var Constants = require('expo-constants').default;
      Constants.expoConfig.extra = {};
      expect(_ExerciseRepoFactory.ExerciseRepoFactory.getCurrentDataSource()).toBe('firebase');
    });
  });
  describe('Dynamic require behavior', function () {
    test('handles Expo Constants require errors', function () {
      var originalRequire = require;
      var mockRequire = jest.fn().mockImplementation(function (module) {
        if (module === 'expo-constants') {
          throw new Error('Module not found');
        }
        return originalRequire(module);
      });
      global.require = mockRequire;
      delete process.env.USE_SUPABASE_DATA;
      try {
        expect(_ExerciseRepoFactory.ExerciseRepoFactory.getCurrentDataSource()).toBe('firebase');
      } finally {
        global.require = originalRequire;
      }
    });
  });
});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJfZ2V0SmVzdE9iaiIsIm1vY2siLCJGaXJlYmFzZUV4ZXJjaXNlUmVwbyIsImdldEluc3RhbmNlIiwiamVzdCIsImZuIiwibW9ja1JldHVyblZhbHVlIiwidHlwZSIsIlN1cGFiYXNlRXhlcmNpc2VSZXBvIiwiZGVmYXVsdCIsImV4cG9Db25maWciLCJleHRyYSIsIl9FeGVyY2lzZVJlcG9GYWN0b3J5IiwicmVxdWlyZSIsIl9yZXF1aXJlIiwiZGVzY3JpYmUiLCJvcmlnaW5hbEVudiIsInByb2Nlc3MiLCJlbnYiLCJiZWZvcmVFYWNoIiwiT2JqZWN0IiwiYXNzaWduIiwiRXhlcmNpc2VSZXBvRmFjdG9yeSIsInJlc2V0SW5zdGFuY2VzIiwiY2xlYXJBbGxNb2NrcyIsImFmdGVyRWFjaCIsInRlc3QiLCJVU0VfU1VQQUJBU0VfREFUQSIsImZpcmViYXNlSW5zdGFuY2UiLCJleHBlY3QiLCJ0b0JlIiwic3VwYWJhc2VJbnN0YW5jZSIsImdldEN1cnJlbnREYXRhU291cmNlIiwidGVzdENhc2VzIiwiZm9yRWFjaCIsInZhbHVlIiwiZXhwZWN0ZWRSZXN1bHQiLCJ0b0xvd2VyQ2FzZSIsIkNvbnN0YW50cyIsInVzZVN1cGFiYXNlRGF0YSIsIm9yaWdpbmFsUmVxdWlyZSIsIm1vY2tSZXF1aXJlIiwibW9ja0ltcGxlbWVudGF0aW9uIiwibW9kdWxlIiwiRXJyb3IiLCJnbG9iYWwiXSwic291cmNlcyI6WyJFeGVyY2lzZVJlcG9GYWN0b3J5LWVudmlyb25tZW50LXRlc3QudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgRXhlcmNpc2VSZXBvRmFjdG9yeSB9IGZyb20gJ0AvbGliL3JlcG8vRXhlcmNpc2VSZXBvRmFjdG9yeSc7XG5cbi8vIE1vY2sgdGhlIHJlcG9zaXRvcnkgaW1wbGVtZW50YXRpb25zXG5qZXN0Lm1vY2soJ0AvbGliL3JlcG8vRmlyZWJhc2VFeGVyY2lzZVJlcG8nLCAoKSA9PiAoe1xuXHRGaXJlYmFzZUV4ZXJjaXNlUmVwbzoge1xuXHRcdGdldEluc3RhbmNlOiBqZXN0LmZuKCkubW9ja1JldHVyblZhbHVlKHsgdHlwZTogJ2ZpcmViYXNlJyB9KVxuXHR9XG59KSk7XG5cbmplc3QubW9jaygnQC9saWIvcmVwby9TdXBhYmFzZUV4ZXJjaXNlUmVwbycsICgpID0+ICh7XG5cdFN1cGFiYXNlRXhlcmNpc2VSZXBvOiB7XG5cdFx0Z2V0SW5zdGFuY2U6IGplc3QuZm4oKS5tb2NrUmV0dXJuVmFsdWUoeyB0eXBlOiAnc3VwYWJhc2UnIH0pXG5cdH1cbn0pKTtcblxuLy8gTW9jayBFeHBvIENvbnN0YW50c1xuamVzdC5tb2NrKCdleHBvLWNvbnN0YW50cycsICgpID0+ICh7XG5cdGRlZmF1bHQ6IHtcblx0XHRleHBvQ29uZmlnOiB7XG5cdFx0XHRleHRyYToge31cblx0XHR9XG5cdH1cbn0pKTtcblxuZGVzY3JpYmUoJ0V4ZXJjaXNlUmVwb0ZhY3RvcnkgLSBFbnZpcm9ubWVudCBWYXJpYWJsZSBIYW5kbGluZycsICgpID0+IHtcblx0Y29uc3Qgb3JpZ2luYWxFbnYgPSBwcm9jZXNzLmVudjtcblxuXHRiZWZvcmVFYWNoKCgpID0+IHtcblx0XHQvLyBSZXNldCBlbnZpcm9ubWVudCB2YXJpYWJsZXNcblx0XHRwcm9jZXNzLmVudiA9IHsgLi4ub3JpZ2luYWxFbnYgfTtcblx0XHRcblx0XHQvLyBSZXNldCBmYWN0b3J5IGluc3RhbmNlc1xuXHRcdEV4ZXJjaXNlUmVwb0ZhY3RvcnkucmVzZXRJbnN0YW5jZXMoKTtcblx0XHRcblx0XHQvLyBDbGVhciBhbGwgbW9ja3Ncblx0XHRqZXN0LmNsZWFyQWxsTW9ja3MoKTtcblx0fSk7XG5cblx0YWZ0ZXJFYWNoKCgpID0+IHtcblx0XHRwcm9jZXNzLmVudiA9IG9yaWdpbmFsRW52O1xuXHR9KTtcblxuXHRkZXNjcmliZSgnRHluYW1pYyBlbnZpcm9ubWVudCB2YXJpYWJsZSBjaGFuZ2VzJywgKCkgPT4ge1xuXHRcdHRlc3QoJ3N3aXRjaGVzIGZyb20gRmlyZWJhc2UgdG8gU3VwYWJhc2Ugd2hlbiBlbnYgdmFyIGNoYW5nZXMnLCAoKSA9PiB7XG5cdFx0XHQvLyBTdGFydCB3aXRoIEZpcmViYXNlXG5cdFx0XHRwcm9jZXNzLmVudi5VU0VfU1VQQUJBU0VfREFUQSA9ICdmYWxzZSc7XG5cdFx0XHRjb25zdCBmaXJlYmFzZUluc3RhbmNlID0gRXhlcmNpc2VSZXBvRmFjdG9yeS5nZXRJbnN0YW5jZSgpO1xuXHRcdFx0ZXhwZWN0KChmaXJlYmFzZUluc3RhbmNlIGFzIGFueSkudHlwZSkudG9CZSgnZmlyZWJhc2UnKTtcblxuXHRcdFx0Ly8gUmVzZXQgZmFjdG9yeSB0byBzaW11bGF0ZSBlbnZpcm9ubWVudCBjaGFuZ2Vcblx0XHRcdEV4ZXJjaXNlUmVwb0ZhY3RvcnkucmVzZXRJbnN0YW5jZXMoKTtcblxuXHRcdFx0Ly8gQ2hhbmdlIHRvIFN1cGFiYXNlXG5cdFx0XHRwcm9jZXNzLmVudi5VU0VfU1VQQUJBU0VfREFUQSA9ICd0cnVlJztcblx0XHRcdGNvbnN0IHN1cGFiYXNlSW5zdGFuY2UgPSBFeGVyY2lzZVJlcG9GYWN0b3J5LmdldEluc3RhbmNlKCk7XG5cdFx0XHRleHBlY3QoKHN1cGFiYXNlSW5zdGFuY2UgYXMgYW55KS50eXBlKS50b0JlKCdzdXBhYmFzZScpO1xuXHRcdH0pO1xuXG5cdFx0dGVzdCgnc3dpdGNoZXMgZnJvbSBTdXBhYmFzZSB0byBGaXJlYmFzZSB3aGVuIGVudiB2YXIgY2hhbmdlcycsICgpID0+IHtcblx0XHRcdC8vIFN0YXJ0IHdpdGggU3VwYWJhc2Vcblx0XHRcdHByb2Nlc3MuZW52LlVTRV9TVVBBQkFTRV9EQVRBID0gJ3RydWUnO1xuXHRcdFx0Y29uc3Qgc3VwYWJhc2VJbnN0YW5jZSA9IEV4ZXJjaXNlUmVwb0ZhY3RvcnkuZ2V0SW5zdGFuY2UoKTtcblx0XHRcdGV4cGVjdCgoc3VwYWJhc2VJbnN0YW5jZSBhcyBhbnkpLnR5cGUpLnRvQmUoJ3N1cGFiYXNlJyk7XG5cblx0XHRcdC8vIFJlc2V0IGZhY3RvcnkgdG8gc2ltdWxhdGUgZW52aXJvbm1lbnQgY2hhbmdlXG5cdFx0XHRFeGVyY2lzZVJlcG9GYWN0b3J5LnJlc2V0SW5zdGFuY2VzKCk7XG5cblx0XHRcdC8vIENoYW5nZSB0byBGaXJlYmFzZVxuXHRcdFx0cHJvY2Vzcy5lbnYuVVNFX1NVUEFCQVNFX0RBVEEgPSAnZmFsc2UnO1xuXHRcdFx0Y29uc3QgZmlyZWJhc2VJbnN0YW5jZSA9IEV4ZXJjaXNlUmVwb0ZhY3RvcnkuZ2V0SW5zdGFuY2UoKTtcblx0XHRcdGV4cGVjdCgoZmlyZWJhc2VJbnN0YW5jZSBhcyBhbnkpLnR5cGUpLnRvQmUoJ2ZpcmViYXNlJyk7XG5cdFx0fSk7XG5cblx0XHR0ZXN0KCdoYW5kbGVzIHVuZGVmaW5lZCB0byB0cnVlIHRyYW5zaXRpb24nLCAoKSA9PiB7XG5cdFx0XHQvLyBTdGFydCB3aXRoIHVuZGVmaW5lZCAoZGVmYXVsdHMgdG8gRmlyZWJhc2UpXG5cdFx0XHRkZWxldGUgcHJvY2Vzcy5lbnYuVVNFX1NVUEFCQVNFX0RBVEE7XG5cdFx0XHRjb25zdCBmaXJlYmFzZUluc3RhbmNlID0gRXhlcmNpc2VSZXBvRmFjdG9yeS5nZXRJbnN0YW5jZSgpO1xuXHRcdFx0ZXhwZWN0KChmaXJlYmFzZUluc3RhbmNlIGFzIGFueSkudHlwZSkudG9CZSgnZmlyZWJhc2UnKTtcblxuXHRcdFx0Ly8gUmVzZXQgZmFjdG9yeSBhbmQgY2hhbmdlIHRvIHRydWVcblx0XHRcdEV4ZXJjaXNlUmVwb0ZhY3RvcnkucmVzZXRJbnN0YW5jZXMoKTtcblx0XHRcdHByb2Nlc3MuZW52LlVTRV9TVVBBQkFTRV9EQVRBID0gJ3RydWUnO1xuXHRcdFx0Y29uc3Qgc3VwYWJhc2VJbnN0YW5jZSA9IEV4ZXJjaXNlUmVwb0ZhY3RvcnkuZ2V0SW5zdGFuY2UoKTtcblx0XHRcdGV4cGVjdCgoc3VwYWJhc2VJbnN0YW5jZSBhcyBhbnkpLnR5cGUpLnRvQmUoJ3N1cGFiYXNlJyk7XG5cdFx0fSk7XG5cblx0XHR0ZXN0KCdoYW5kbGVzIHRydWUgdG8gdW5kZWZpbmVkIHRyYW5zaXRpb24nLCAoKSA9PiB7XG5cdFx0XHQvLyBTdGFydCB3aXRoIHRydWVcblx0XHRcdHByb2Nlc3MuZW52LlVTRV9TVVBBQkFTRV9EQVRBID0gJ3RydWUnO1xuXHRcdFx0Y29uc3Qgc3VwYWJhc2VJbnN0YW5jZSA9IEV4ZXJjaXNlUmVwb0ZhY3RvcnkuZ2V0SW5zdGFuY2UoKTtcblx0XHRcdGV4cGVjdCgoc3VwYWJhc2VJbnN0YW5jZSBhcyBhbnkpLnR5cGUpLnRvQmUoJ3N1cGFiYXNlJyk7XG5cblx0XHRcdC8vIFJlc2V0IGZhY3RvcnkgYW5kIHJlbW92ZSBlbnYgdmFyXG5cdFx0XHRFeGVyY2lzZVJlcG9GYWN0b3J5LnJlc2V0SW5zdGFuY2VzKCk7XG5cdFx0XHRkZWxldGUgcHJvY2Vzcy5lbnYuVVNFX1NVUEFCQVNFX0RBVEE7XG5cdFx0XHRjb25zdCBmaXJlYmFzZUluc3RhbmNlID0gRXhlcmNpc2VSZXBvRmFjdG9yeS5nZXRJbnN0YW5jZSgpO1xuXHRcdFx0ZXhwZWN0KChmaXJlYmFzZUluc3RhbmNlIGFzIGFueSkudHlwZSkudG9CZSgnZmlyZWJhc2UnKTtcblx0XHR9KTtcblx0fSk7XG5cblx0ZGVzY3JpYmUoJ2dldEN1cnJlbnREYXRhU291cmNlIHdpdGggZW52aXJvbm1lbnQgY2hhbmdlcycsICgpID0+IHtcblx0XHR0ZXN0KCdyZWZsZWN0cyBlbnZpcm9ubWVudCB2YXJpYWJsZSBjaGFuZ2VzJywgKCkgPT4ge1xuXHRcdFx0Ly8gU3RhcnQgd2l0aCBGaXJlYmFzZVxuXHRcdFx0cHJvY2Vzcy5lbnYuVVNFX1NVUEFCQVNFX0RBVEEgPSAnZmFsc2UnO1xuXHRcdFx0ZXhwZWN0KEV4ZXJjaXNlUmVwb0ZhY3RvcnkuZ2V0Q3VycmVudERhdGFTb3VyY2UoKSkudG9CZSgnZmlyZWJhc2UnKTtcblxuXHRcdFx0Ly8gQ2hhbmdlIHRvIFN1cGFiYXNlICh3aXRob3V0IHJlc2V0dGluZyBpbnN0YW5jZXMpXG5cdFx0XHRwcm9jZXNzLmVudi5VU0VfU1VQQUJBU0VfREFUQSA9ICd0cnVlJztcblx0XHRcdGV4cGVjdChFeGVyY2lzZVJlcG9GYWN0b3J5LmdldEN1cnJlbnREYXRhU291cmNlKCkpLnRvQmUoJ3N1cGFiYXNlJyk7XG5cblx0XHRcdC8vIENoYW5nZSBiYWNrIHRvIEZpcmViYXNlXG5cdFx0XHRwcm9jZXNzLmVudi5VU0VfU1VQQUJBU0VfREFUQSA9ICdmYWxzZSc7XG5cdFx0XHRleHBlY3QoRXhlcmNpc2VSZXBvRmFjdG9yeS5nZXRDdXJyZW50RGF0YVNvdXJjZSgpKS50b0JlKCdmaXJlYmFzZScpO1xuXG5cdFx0XHQvLyBUZXN0IHVuZGVmaW5lZFxuXHRcdFx0ZGVsZXRlIHByb2Nlc3MuZW52LlVTRV9TVVBBQkFTRV9EQVRBO1xuXHRcdFx0ZXhwZWN0KEV4ZXJjaXNlUmVwb0ZhY3RvcnkuZ2V0Q3VycmVudERhdGFTb3VyY2UoKSkudG9CZSgnZmlyZWJhc2UnKTtcblx0XHR9KTtcblx0fSk7XG5cblx0ZGVzY3JpYmUoJ0VkZ2UgY2FzZXMgYW5kIGVycm9yIGNvbmRpdGlvbnMnLCAoKSA9PiB7XG5cdFx0dGVzdCgnaGFuZGxlcyBtYWxmb3JtZWQgZW52aXJvbm1lbnQgdmFyaWFibGUgdmFsdWVzJywgKCkgPT4ge1xuXHRcdFx0Y29uc3QgdGVzdENhc2VzID0gW1xuXHRcdFx0XHQnVFJVRScsICAgIC8vIHVwcGVyY2FzZSBzaG91bGQgd29ya1xuXHRcdFx0XHQnVHJ1ZScsICAgIC8vIG1peGVkIGNhc2Ugc2hvdWxkIHdvcmsgIFxuXHRcdFx0XHQnZmFsc2UnLCAgIC8vIGxvd2VyY2FzZSBmYWxzZVxuXHRcdFx0XHQnRkFMU0UnLCAgIC8vIHVwcGVyY2FzZSBmYWxzZVxuXHRcdFx0XHQneWVzJywgICAgIC8vIG5vbi1ib29sZWFuIHN0cmluZyBzaG91bGQgZGVmYXVsdCB0byBmYWxzZVxuXHRcdFx0XHQnbm8nLCAgICAgIC8vIG5vbi1ib29sZWFuIHN0cmluZyBzaG91bGQgZGVmYXVsdCB0byBmYWxzZVxuXHRcdFx0XHQnMScsICAgICAgIC8vIG51bWVyaWMgc3RyaW5nIHNob3VsZCBkZWZhdWx0IHRvIGZhbHNlXG5cdFx0XHRcdCcwJywgICAgICAgLy8gbnVtZXJpYyBzdHJpbmcgc2hvdWxkIGRlZmF1bHQgdG8gZmFsc2Vcblx0XHRcdFx0JycsICAgICAgICAvLyBlbXB0eSBzdHJpbmcgc2hvdWxkIGRlZmF1bHQgdG8gZmFsc2Vcblx0XHRcdF07XG5cblx0XHRcdHRlc3RDYXNlcy5mb3JFYWNoKCh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRFeGVyY2lzZVJlcG9GYWN0b3J5LnJlc2V0SW5zdGFuY2VzKCk7XG5cdFx0XHRcdHByb2Nlc3MuZW52LlVTRV9TVVBBQkFTRV9EQVRBID0gdmFsdWU7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zdCBleHBlY3RlZFJlc3VsdCA9IHZhbHVlLnRvTG93ZXJDYXNlKCkgPT09ICd0cnVlJyA/ICdzdXBhYmFzZScgOiAnZmlyZWJhc2UnO1xuXHRcdFx0XHRleHBlY3QoRXhlcmNpc2VSZXBvRmFjdG9yeS5nZXRDdXJyZW50RGF0YVNvdXJjZSgpKS50b0JlKGV4cGVjdGVkUmVzdWx0KTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0dGVzdCgncHJlZmVycyBwcm9jZXNzLmVudiBvdmVyIEV4cG8gQ29uc3RhbnRzIHdoZW4gYm90aCBhcmUgc2V0JywgKCkgPT4ge1xuXHRcdFx0Ly8gU2V0IEV4cG8gQ29uc3RhbnRzIHRvIHVzZSBTdXBhYmFzZVxuXHRcdFx0Y29uc3QgQ29uc3RhbnRzID0gcmVxdWlyZSgnZXhwby1jb25zdGFudHMnKS5kZWZhdWx0O1xuXHRcdFx0Q29uc3RhbnRzLmV4cG9Db25maWcuZXh0cmEudXNlU3VwYWJhc2VEYXRhID0gdHJ1ZTtcblxuXHRcdFx0Ly8gU2V0IHByb2Nlc3MuZW52IHRvIHVzZSBGaXJlYmFzZVxuXHRcdFx0cHJvY2Vzcy5lbnYuVVNFX1NVUEFCQVNFX0RBVEEgPSAnZmFsc2UnO1xuXG5cdFx0XHQvLyBTaG91bGQgcHJlZmVyIHByb2Nlc3MuZW52XG5cdFx0XHRleHBlY3QoRXhlcmNpc2VSZXBvRmFjdG9yeS5nZXRDdXJyZW50RGF0YVNvdXJjZSgpKS50b0JlKCdmaXJlYmFzZScpO1xuXHRcdH0pO1xuXG5cdFx0dGVzdCgnZmFsbHMgYmFjayB0byBFeHBvIENvbnN0YW50cyB3aGVuIHByb2Nlc3MuZW52IGlzIHVuZGVmaW5lZCcsICgpID0+IHtcblx0XHRcdC8vIFJlbW92ZSBwcm9jZXNzLmVudlxuXHRcdFx0ZGVsZXRlIHByb2Nlc3MuZW52LlVTRV9TVVBBQkFTRV9EQVRBO1xuXG5cdFx0XHQvLyBTZXQgRXhwbyBDb25zdGFudHMgdG8gdXNlIFN1cGFiYXNlXG5cdFx0XHRjb25zdCBDb25zdGFudHMgPSByZXF1aXJlKCdleHBvLWNvbnN0YW50cycpLmRlZmF1bHQ7XG5cdFx0XHRDb25zdGFudHMuZXhwb0NvbmZpZy5leHRyYS51c2VTdXBhYmFzZURhdGEgPSB0cnVlO1xuXG5cdFx0XHQvLyBTaG91bGQgdXNlIEV4cG8gQ29uc3RhbnRzXG5cdFx0XHRleHBlY3QoRXhlcmNpc2VSZXBvRmFjdG9yeS5nZXRDdXJyZW50RGF0YVNvdXJjZSgpKS50b0JlKCdzdXBhYmFzZScpO1xuXHRcdH0pO1xuXG5cdFx0dGVzdCgnaGFuZGxlcyBtaXNzaW5nIEV4cG8gQ29uc3RhbnRzIGdyYWNlZnVsbHknLCAoKSA9PiB7XG5cdFx0XHQvLyBSZW1vdmUgcHJvY2Vzcy5lbnZcblx0XHRcdGRlbGV0ZSBwcm9jZXNzLmVudi5VU0VfU1VQQUJBU0VfREFUQTtcblxuXHRcdFx0Ly8gQ2xlYXIgRXhwbyBDb25zdGFudHNcblx0XHRcdGNvbnN0IENvbnN0YW50cyA9IHJlcXVpcmUoJ2V4cG8tY29uc3RhbnRzJykuZGVmYXVsdDtcblx0XHRcdENvbnN0YW50cy5leHBvQ29uZmlnLmV4dHJhID0ge307XG5cblx0XHRcdC8vIFNob3VsZCBkZWZhdWx0IHRvIEZpcmViYXNlXG5cdFx0XHRleHBlY3QoRXhlcmNpc2VSZXBvRmFjdG9yeS5nZXRDdXJyZW50RGF0YVNvdXJjZSgpKS50b0JlKCdmaXJlYmFzZScpO1xuXHRcdH0pO1xuXHR9KTtcblxuXHRkZXNjcmliZSgnRHluYW1pYyByZXF1aXJlIGJlaGF2aW9yJywgKCkgPT4ge1xuXHRcdHRlc3QoJ2hhbmRsZXMgRXhwbyBDb25zdGFudHMgcmVxdWlyZSBlcnJvcnMnLCAoKSA9PiB7XG5cdFx0XHQvLyBNb2NrIHJlcXVpcmUgdG8gdGhyb3cgYW4gZXJyb3Jcblx0XHRcdGNvbnN0IG9yaWdpbmFsUmVxdWlyZSA9IHJlcXVpcmU7XG5cdFx0XHRjb25zdCBtb2NrUmVxdWlyZSA9IGplc3QuZm4oKS5tb2NrSW1wbGVtZW50YXRpb24oKG1vZHVsZTogc3RyaW5nKSA9PiB7XG5cdFx0XHRcdGlmIChtb2R1bGUgPT09ICdleHBvLWNvbnN0YW50cycpIHtcblx0XHRcdFx0XHR0aHJvdyBuZXcgRXJyb3IoJ01vZHVsZSBub3QgZm91bmQnKTtcblx0XHRcdFx0fVxuXHRcdFx0XHRyZXR1cm4gb3JpZ2luYWxSZXF1aXJlKG1vZHVsZSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gUmVwbGFjZSBnbG9iYWwgcmVxdWlyZSB0ZW1wb3JhcmlseVxuXHRcdFx0KGdsb2JhbCBhcyBhbnkpLnJlcXVpcmUgPSBtb2NrUmVxdWlyZTtcblxuXHRcdFx0Ly8gUmVtb3ZlIHByb2Nlc3MuZW52IHRvIGZvcmNlIEV4cG8gQ29uc3RhbnRzIGZhbGxiYWNrXG5cdFx0XHRkZWxldGUgcHJvY2Vzcy5lbnYuVVNFX1NVUEFCQVNFX0RBVEE7XG5cblx0XHRcdHRyeSB7XG5cdFx0XHRcdC8vIFNob3VsZCBoYW5kbGUgZXJyb3IgZ3JhY2VmdWxseSBhbmQgZGVmYXVsdCB0byBGaXJlYmFzZVxuXHRcdFx0XHRleHBlY3QoRXhlcmNpc2VSZXBvRmFjdG9yeS5nZXRDdXJyZW50RGF0YVNvdXJjZSgpKS50b0JlKCdmaXJlYmFzZScpO1xuXHRcdFx0fSBmaW5hbGx5IHtcblx0XHRcdFx0Ly8gUmVzdG9yZSBvcmlnaW5hbCByZXF1aXJlXG5cdFx0XHRcdChnbG9iYWwgYXMgYW55KS5yZXF1aXJlID0gb3JpZ2luYWxSZXF1aXJlO1xuXHRcdFx0fVxuXHRcdH0pO1xuXHR9KTtcbn0pOyJdLCJtYXBwaW5ncyI6IkFBR0FBLFdBQUEsR0FBS0MsSUFBSSxDQUFDLGlDQUFpQyxFQUFFO0VBQUEsT0FBTztJQUNuREMsb0JBQW9CLEVBQUU7TUFDckJDLFdBQVcsRUFBRUMsSUFBSSxDQUFDQyxFQUFFLENBQUMsQ0FBQyxDQUFDQyxlQUFlLENBQUM7UUFBRUMsSUFBSSxFQUFFO01BQVcsQ0FBQztJQUM1RDtFQUNELENBQUM7QUFBQSxDQUFDLENBQUM7QUFFSFAsV0FBQSxHQUFLQyxJQUFJLENBQUMsaUNBQWlDLEVBQUU7RUFBQSxPQUFPO0lBQ25ETyxvQkFBb0IsRUFBRTtNQUNyQkwsV0FBVyxFQUFFQyxJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDLENBQUNDLGVBQWUsQ0FBQztRQUFFQyxJQUFJLEVBQUU7TUFBVyxDQUFDO0lBQzVEO0VBQ0QsQ0FBQztBQUFBLENBQUMsQ0FBQztBQUdIUCxXQUFBLEdBQUtDLElBQUksQ0FBQyxnQkFBZ0IsRUFBRTtFQUFBLE9BQU87SUFDbENRLE9BQU8sRUFBRTtNQUNSQyxVQUFVLEVBQUU7UUFDWEMsS0FBSyxFQUFFLENBQUM7TUFDVDtJQUNEO0VBQ0QsQ0FBQztBQUFBLENBQUMsQ0FBQztBQXRCSCxJQUFBQyxvQkFBQSxHQUFBQyxPQUFBO0FBQXFFLFNBQUFiLFlBQUE7RUFBQSxJQUFBYyxRQUFBLEdBQUFELE9BQUE7SUFBQVQsSUFBQSxHQUFBVSxRQUFBLENBQUFWLElBQUE7RUFBQUosV0FBQSxZQUFBQSxZQUFBO0lBQUEsT0FBQUksSUFBQTtFQUFBO0VBQUEsT0FBQUEsSUFBQTtBQUFBO0FBd0JyRVcsUUFBUSxDQUFDLHFEQUFxRCxFQUFFLFlBQU07RUFDckUsSUFBTUMsV0FBVyxHQUFHQyxPQUFPLENBQUNDLEdBQUc7RUFFL0JDLFVBQVUsQ0FBQyxZQUFNO0lBRWhCRixPQUFPLENBQUNDLEdBQUcsR0FBQUUsTUFBQSxDQUFBQyxNQUFBLEtBQVFMLFdBQVcsQ0FBRTtJQUdoQ00sd0NBQW1CLENBQUNDLGNBQWMsQ0FBQyxDQUFDO0lBR3BDbkIsSUFBSSxDQUFDb0IsYUFBYSxDQUFDLENBQUM7RUFDckIsQ0FBQyxDQUFDO0VBRUZDLFNBQVMsQ0FBQyxZQUFNO0lBQ2ZSLE9BQU8sQ0FBQ0MsR0FBRyxHQUFHRixXQUFXO0VBQzFCLENBQUMsQ0FBQztFQUVGRCxRQUFRLENBQUMsc0NBQXNDLEVBQUUsWUFBTTtJQUN0RFcsSUFBSSxDQUFDLHlEQUF5RCxFQUFFLFlBQU07TUFFckVULE9BQU8sQ0FBQ0MsR0FBRyxDQUFDUyxpQkFBaUIsR0FBRyxPQUFPO01BQ3ZDLElBQU1DLGdCQUFnQixHQUFHTix3Q0FBbUIsQ0FBQ25CLFdBQVcsQ0FBQyxDQUFDO01BQzFEMEIsTUFBTSxDQUFFRCxnQkFBZ0IsQ0FBU3JCLElBQUksQ0FBQyxDQUFDdUIsSUFBSSxDQUFDLFVBQVUsQ0FBQztNQUd2RFIsd0NBQW1CLENBQUNDLGNBQWMsQ0FBQyxDQUFDO01BR3BDTixPQUFPLENBQUNDLEdBQUcsQ0FBQ1MsaUJBQWlCLEdBQUcsTUFBTTtNQUN0QyxJQUFNSSxnQkFBZ0IsR0FBR1Qsd0NBQW1CLENBQUNuQixXQUFXLENBQUMsQ0FBQztNQUMxRDBCLE1BQU0sQ0FBRUUsZ0JBQWdCLENBQVN4QixJQUFJLENBQUMsQ0FBQ3VCLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDeEQsQ0FBQyxDQUFDO0lBRUZKLElBQUksQ0FBQyx5REFBeUQsRUFBRSxZQUFNO01BRXJFVCxPQUFPLENBQUNDLEdBQUcsQ0FBQ1MsaUJBQWlCLEdBQUcsTUFBTTtNQUN0QyxJQUFNSSxnQkFBZ0IsR0FBR1Qsd0NBQW1CLENBQUNuQixXQUFXLENBQUMsQ0FBQztNQUMxRDBCLE1BQU0sQ0FBRUUsZ0JBQWdCLENBQVN4QixJQUFJLENBQUMsQ0FBQ3VCLElBQUksQ0FBQyxVQUFVLENBQUM7TUFHdkRSLHdDQUFtQixDQUFDQyxjQUFjLENBQUMsQ0FBQztNQUdwQ04sT0FBTyxDQUFDQyxHQUFHLENBQUNTLGlCQUFpQixHQUFHLE9BQU87TUFDdkMsSUFBTUMsZ0JBQWdCLEdBQUdOLHdDQUFtQixDQUFDbkIsV0FBVyxDQUFDLENBQUM7TUFDMUQwQixNQUFNLENBQUVELGdCQUFnQixDQUFTckIsSUFBSSxDQUFDLENBQUN1QixJQUFJLENBQUMsVUFBVSxDQUFDO0lBQ3hELENBQUMsQ0FBQztJQUVGSixJQUFJLENBQUMsc0NBQXNDLEVBQUUsWUFBTTtNQUVsRCxPQUFPVCxPQUFPLENBQUNDLEdBQUcsQ0FBQ1MsaUJBQWlCO01BQ3BDLElBQU1DLGdCQUFnQixHQUFHTix3Q0FBbUIsQ0FBQ25CLFdBQVcsQ0FBQyxDQUFDO01BQzFEMEIsTUFBTSxDQUFFRCxnQkFBZ0IsQ0FBU3JCLElBQUksQ0FBQyxDQUFDdUIsSUFBSSxDQUFDLFVBQVUsQ0FBQztNQUd2RFIsd0NBQW1CLENBQUNDLGNBQWMsQ0FBQyxDQUFDO01BQ3BDTixPQUFPLENBQUNDLEdBQUcsQ0FBQ1MsaUJBQWlCLEdBQUcsTUFBTTtNQUN0QyxJQUFNSSxnQkFBZ0IsR0FBR1Qsd0NBQW1CLENBQUNuQixXQUFXLENBQUMsQ0FBQztNQUMxRDBCLE1BQU0sQ0FBRUUsZ0JBQWdCLENBQVN4QixJQUFJLENBQUMsQ0FBQ3VCLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDeEQsQ0FBQyxDQUFDO0lBRUZKLElBQUksQ0FBQyxzQ0FBc0MsRUFBRSxZQUFNO01BRWxEVCxPQUFPLENBQUNDLEdBQUcsQ0FBQ1MsaUJBQWlCLEdBQUcsTUFBTTtNQUN0QyxJQUFNSSxnQkFBZ0IsR0FBR1Qsd0NBQW1CLENBQUNuQixXQUFXLENBQUMsQ0FBQztNQUMxRDBCLE1BQU0sQ0FBRUUsZ0JBQWdCLENBQVN4QixJQUFJLENBQUMsQ0FBQ3VCLElBQUksQ0FBQyxVQUFVLENBQUM7TUFHdkRSLHdDQUFtQixDQUFDQyxjQUFjLENBQUMsQ0FBQztNQUNwQyxPQUFPTixPQUFPLENBQUNDLEdBQUcsQ0FBQ1MsaUJBQWlCO01BQ3BDLElBQU1DLGdCQUFnQixHQUFHTix3Q0FBbUIsQ0FBQ25CLFdBQVcsQ0FBQyxDQUFDO01BQzFEMEIsTUFBTSxDQUFFRCxnQkFBZ0IsQ0FBU3JCLElBQUksQ0FBQyxDQUFDdUIsSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUN4RCxDQUFDLENBQUM7RUFDSCxDQUFDLENBQUM7RUFFRmYsUUFBUSxDQUFDLCtDQUErQyxFQUFFLFlBQU07SUFDL0RXLElBQUksQ0FBQyx1Q0FBdUMsRUFBRSxZQUFNO01BRW5EVCxPQUFPLENBQUNDLEdBQUcsQ0FBQ1MsaUJBQWlCLEdBQUcsT0FBTztNQUN2Q0UsTUFBTSxDQUFDUCx3Q0FBbUIsQ0FBQ1Usb0JBQW9CLENBQUMsQ0FBQyxDQUFDLENBQUNGLElBQUksQ0FBQyxVQUFVLENBQUM7TUFHbkViLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDUyxpQkFBaUIsR0FBRyxNQUFNO01BQ3RDRSxNQUFNLENBQUNQLHdDQUFtQixDQUFDVSxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsQ0FBQ0YsSUFBSSxDQUFDLFVBQVUsQ0FBQztNQUduRWIsT0FBTyxDQUFDQyxHQUFHLENBQUNTLGlCQUFpQixHQUFHLE9BQU87TUFDdkNFLE1BQU0sQ0FBQ1Asd0NBQW1CLENBQUNVLG9CQUFvQixDQUFDLENBQUMsQ0FBQyxDQUFDRixJQUFJLENBQUMsVUFBVSxDQUFDO01BR25FLE9BQU9iLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDUyxpQkFBaUI7TUFDcENFLE1BQU0sQ0FBQ1Asd0NBQW1CLENBQUNVLG9CQUFvQixDQUFDLENBQUMsQ0FBQyxDQUFDRixJQUFJLENBQUMsVUFBVSxDQUFDO0lBQ3BFLENBQUMsQ0FBQztFQUNILENBQUMsQ0FBQztFQUVGZixRQUFRLENBQUMsaUNBQWlDLEVBQUUsWUFBTTtJQUNqRFcsSUFBSSxDQUFDLCtDQUErQyxFQUFFLFlBQU07TUFDM0QsSUFBTU8sU0FBUyxHQUFHLENBQ2pCLE1BQU0sRUFDTixNQUFNLEVBQ04sT0FBTyxFQUNQLE9BQU8sRUFDUCxLQUFLLEVBQ0wsSUFBSSxFQUNKLEdBQUcsRUFDSCxHQUFHLEVBQ0gsRUFBRSxDQUNGO01BRURBLFNBQVMsQ0FBQ0MsT0FBTyxDQUFDLFVBQUNDLEtBQUssRUFBSztRQUM1QmIsd0NBQW1CLENBQUNDLGNBQWMsQ0FBQyxDQUFDO1FBQ3BDTixPQUFPLENBQUNDLEdBQUcsQ0FBQ1MsaUJBQWlCLEdBQUdRLEtBQUs7UUFFckMsSUFBTUMsY0FBYyxHQUFHRCxLQUFLLENBQUNFLFdBQVcsQ0FBQyxDQUFDLEtBQUssTUFBTSxHQUFHLFVBQVUsR0FBRyxVQUFVO1FBQy9FUixNQUFNLENBQUNQLHdDQUFtQixDQUFDVSxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsQ0FBQ0YsSUFBSSxDQUFDTSxjQUFjLENBQUM7TUFDeEUsQ0FBQyxDQUFDO0lBQ0gsQ0FBQyxDQUFDO0lBRUZWLElBQUksQ0FBQywyREFBMkQsRUFBRSxZQUFNO01BRXZFLElBQU1ZLFNBQVMsR0FBR3pCLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDSixPQUFPO01BQ25ENkIsU0FBUyxDQUFDNUIsVUFBVSxDQUFDQyxLQUFLLENBQUM0QixlQUFlLEdBQUcsSUFBSTtNQUdqRHRCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDUyxpQkFBaUIsR0FBRyxPQUFPO01BR3ZDRSxNQUFNLENBQUNQLHdDQUFtQixDQUFDVSxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsQ0FBQ0YsSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUNwRSxDQUFDLENBQUM7SUFFRkosSUFBSSxDQUFDLDREQUE0RCxFQUFFLFlBQU07TUFFeEUsT0FBT1QsT0FBTyxDQUFDQyxHQUFHLENBQUNTLGlCQUFpQjtNQUdwQyxJQUFNVyxTQUFTLEdBQUd6QixPQUFPLENBQUMsZ0JBQWdCLENBQUMsQ0FBQ0osT0FBTztNQUNuRDZCLFNBQVMsQ0FBQzVCLFVBQVUsQ0FBQ0MsS0FBSyxDQUFDNEIsZUFBZSxHQUFHLElBQUk7TUFHakRWLE1BQU0sQ0FBQ1Asd0NBQW1CLENBQUNVLG9CQUFvQixDQUFDLENBQUMsQ0FBQyxDQUFDRixJQUFJLENBQUMsVUFBVSxDQUFDO0lBQ3BFLENBQUMsQ0FBQztJQUVGSixJQUFJLENBQUMsMkNBQTJDLEVBQUUsWUFBTTtNQUV2RCxPQUFPVCxPQUFPLENBQUNDLEdBQUcsQ0FBQ1MsaUJBQWlCO01BR3BDLElBQU1XLFNBQVMsR0FBR3pCLE9BQU8sQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDSixPQUFPO01BQ25ENkIsU0FBUyxDQUFDNUIsVUFBVSxDQUFDQyxLQUFLLEdBQUcsQ0FBQyxDQUFDO01BRy9Ca0IsTUFBTSxDQUFDUCx3Q0FBbUIsQ0FBQ1Usb0JBQW9CLENBQUMsQ0FBQyxDQUFDLENBQUNGLElBQUksQ0FBQyxVQUFVLENBQUM7SUFDcEUsQ0FBQyxDQUFDO0VBQ0gsQ0FBQyxDQUFDO0VBRUZmLFFBQVEsQ0FBQywwQkFBMEIsRUFBRSxZQUFNO0lBQzFDVyxJQUFJLENBQUMsdUNBQXVDLEVBQUUsWUFBTTtNQUVuRCxJQUFNYyxlQUFlLEdBQUczQixPQUFPO01BQy9CLElBQU00QixXQUFXLEdBQUdyQyxJQUFJLENBQUNDLEVBQUUsQ0FBQyxDQUFDLENBQUNxQyxrQkFBa0IsQ0FBQyxVQUFDQyxNQUFjLEVBQUs7UUFDcEUsSUFBSUEsTUFBTSxLQUFLLGdCQUFnQixFQUFFO1VBQ2hDLE1BQU0sSUFBSUMsS0FBSyxDQUFDLGtCQUFrQixDQUFDO1FBQ3BDO1FBQ0EsT0FBT0osZUFBZSxDQUFDRyxNQUFNLENBQUM7TUFDL0IsQ0FBQyxDQUFDO01BR0RFLE1BQU0sQ0FBU2hDLE9BQU8sR0FBRzRCLFdBQVc7TUFHckMsT0FBT3hCLE9BQU8sQ0FBQ0MsR0FBRyxDQUFDUyxpQkFBaUI7TUFFcEMsSUFBSTtRQUVIRSxNQUFNLENBQUNQLHdDQUFtQixDQUFDVSxvQkFBb0IsQ0FBQyxDQUFDLENBQUMsQ0FBQ0YsSUFBSSxDQUFDLFVBQVUsQ0FBQztNQUNwRSxDQUFDLFNBQVM7UUFFUmUsTUFBTSxDQUFTaEMsT0FBTyxHQUFHMkIsZUFBZTtNQUMxQztJQUNELENBQUMsQ0FBQztFQUNILENBQUMsQ0FBQztBQUNILENBQUMsQ0FBQyIsImlnbm9yZUxpc3QiOltdfQ==