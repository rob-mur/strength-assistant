{"version":3,"names":["_auth","_interopRequireWildcard","require","Object","keys","forEach","key","prototype","hasOwnProperty","call","_exportNames","exports","defineProperty","enumerable","get","_firebaseCore","e","t","WeakMap","r","n","__esModule","o","i","f","__proto__","default","has","set","_t","getOwnPropertyDescriptor","_callSuper","_getPrototypeOf2","_possibleConstructorReturn2","_isNativeReflectConstruct","Reflect","construct","constructor","apply","Boolean","valueOf","AuthNativeService","_FirebaseService","_classCallCheck2","_inherits2","_createClass2","value","init","initialized","logInfo","startTime","Date","now","operation","authInstance","auth","setupEmulator","duration","error","logError","message","stack","isEmulatorEnabled","host","getEmulatorHost","port","emulatorUrl","emulator","useEmulator","logWarn","getAuthInstance","assertInitialized","Error","isReady","FirebaseService","authService","initAuth","signInAnonymouslyNative","_signInAnonymouslyNative","arguments","_asyncToGenerator2","result","signInAnonymously","user","createAccountNative","_x","_x2","_createAccountNative","email","password","createUserWithEmailAndPassword","signInNative","_x3","_x4","_signInNative","signInWithEmailAndPassword","signOutNative","_signOutNative","signOut","onAuthStateChangedNative","callback","onAuthStateChanged"],"sources":["auth.native.ts"],"sourcesContent":["import auth, { FirebaseAuthTypes } from \"@react-native-firebase/auth\";\nimport { FirebaseService } from \"./firebase-core\";\n\nclass AuthNativeService extends FirebaseService {\n\tprivate authInstance: FirebaseAuthTypes.Module | undefined;\n\n\tconstructor() {\n\t\tsuper(\"Firebase Auth\");\n\t}\n\n\tinit(): void {\n\t\tif (this.initialized) {\n\t\t\tthis.logInfo(\"Already initialized, skipping\");\n\t\t\treturn;\n\t\t}\n\n\t\tconst startTime = Date.now();\n\t\tthis.logInfo(\"Initializing Firebase Auth...\", { operation: \"init\" });\n\n\t\ttry {\n\t\t\tthis.authInstance = auth();\n\t\t\tthis.setupEmulator();\n\t\t\tthis.initialized = true;\n\t\t\t\n\t\t\tthis.logInfo(\"Auth initialization complete\", { \n\t\t\t\toperation: \"init\",\n\t\t\t\tduration: Date.now() - startTime \n\t\t\t});\n\t\t} catch (error: any) {\n\t\t\tthis.logError(\"Failed to initialize Firebase Auth\", {\n\t\t\t\toperation: \"init\",\n\t\t\t\tduration: Date.now() - startTime,\n\t\t\t\terror: {\n\t\t\t\t\tmessage: error.message,\n\t\t\t\t\tstack: error.stack\n\t\t\t\t}\n\t\t\t});\n\t\t\tthrow error;\n\t\t}\n\t}\n\n\tprivate setupEmulator(): void {\n\t\tif (!this.authInstance) return;\n\n\t\tif (this.isEmulatorEnabled()) {\n\t\t\tconst host = this.getEmulatorHost();\n\t\t\tconst port = 9099;\n\t\t\tconst emulatorUrl = `http://${host}:${port}`;\n\t\t\t\n\t\t\tthis.logInfo(\"Development mode detected, connecting to auth emulator\", {\n\t\t\t\toperation: \"emulator_setup\",\n\t\t\t\temulator: { host, port }\n\t\t\t});\n\n\t\t\ttry {\n\t\t\t\tthis.authInstance.useEmulator(emulatorUrl);\n\t\t\t\tthis.logInfo(\"Successfully connected to Auth emulator\", {\n\t\t\t\t\toperation: \"emulator_setup\",\n\t\t\t\t\temulator: { host, port }\n\t\t\t\t});\n\t\t\t} catch (error: any) {\n\t\t\t\tthis.logError(\"Failed to connect to emulator\", {\n\t\t\t\t\toperation: \"emulator_setup\",\n\t\t\t\t\temulator: { host, port },\n\t\t\t\t\terror: {\n\t\t\t\t\t\tmessage: error.message\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis.logWarn(\"Continuing with production Auth\");\n\t\t\t}\n\t\t} else {\n\t\t\tthis.logInfo(\"Production mode, using production Auth\", {\n\t\t\t\toperation: \"emulator_setup\"\n\t\t\t});\n\t\t}\n\t}\n\n\tgetAuthInstance(): FirebaseAuthTypes.Module {\n\t\tthis.assertInitialized(\"getAuthInstance()\");\n\t\tif (!this.authInstance) {\n\t\t\tthrow new Error(\"Auth instance not available\");\n\t\t}\n\t\treturn this.authInstance;\n\t}\n\n\tisReady(): boolean {\n\t\treturn this.initialized && !!this.authInstance;\n\t}\n}\n\nconst authService = new AuthNativeService();\n\nexport function initAuth(): void {\n\tauthService.init();\n}\n\nexport function getAuthInstance(): FirebaseAuthTypes.Module {\n\treturn authService.getAuthInstance();\n}\n\n// Auth methods\nexport async function signInAnonymouslyNative(): Promise<FirebaseAuthTypes.User> {\n\tconst authInstance = getAuthInstance();\n\tconst result = await authInstance.signInAnonymously();\n\treturn result.user;\n}\n\nexport async function createAccountNative(email: string, password: string): Promise<FirebaseAuthTypes.User> {\n\tconst authInstance = getAuthInstance();\n\tconst result = await authInstance.createUserWithEmailAndPassword(email, password);\n\treturn result.user;\n}\n\nexport async function signInNative(email: string, password: string): Promise<FirebaseAuthTypes.User> {\n\tconst authInstance = getAuthInstance();\n\tconst result = await authInstance.signInWithEmailAndPassword(email, password);\n\treturn result.user;\n}\n\nexport async function signOutNative(): Promise<void> {\n\tconst authInstance = getAuthInstance();\n\tawait authInstance.signOut();\n}\n\nexport function onAuthStateChangedNative(callback: (user: FirebaseAuthTypes.User | null) => void): () => void {\n\tconst authInstance = getAuthInstance();\n\treturn authInstance.onAuthStateChanged(callback);\n}\n\nexport * from \"@react-native-firebase/auth\";"],"mappings":"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","ignoreList":[]}