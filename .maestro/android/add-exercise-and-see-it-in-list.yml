url: com.jimmy_solutions.strength_assistant.test
---
- runScript: ../../scripts/clear_emulator.js
- launchApp

# Handle optional auth step (only if not already authenticated)
- tapOn:
    id: "continue-as-guest"
    optional: true

# Wait longer for auth to complete and get-started button to appear
- extendedWaitUntil:
    visible:
      id: "get-started"
    timeout: 30000
- tapOn:
    id: "get-started"
- tapOn:
    id: "add-exercise"
- tapOn:
    id: "name"
- inputText: "ExerciseName"
- tapOn:
    id: "submit"
# Wait for exercise submission to complete and dialog to close
- extendedWaitUntil:
    visible:
      id: "add-exercise"
    timeout: 15000
- hideKeyboard
# Wait for exercise to be saved and navigation to complete
- extendedWaitUntil:
    visible:
      id: "exercisesTab"
    timeout: 10000
- tapOn:
    id: "exercisesTab"
- assertVisible:
    id: "exercise-screen"
# Wait for exercises to load from the database
- extendedWaitUntil:
    visible:
      id: "ExerciseName"
    timeout: 10000
